<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="baidu-site-verification" content="codeva-2tBONWXoFH" />
  <meta name="msvalidate.01" content="DEF5F2F984531D10266A543EDD015EB1" />
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="https://blog.shawncoding.top">
  <title>Elasticsearch8.xå­¦ä¹ ç¬”è®° | æ˜Ÿæ˜Ÿçš„çŒ«(&gt;^Ï‰^&lt;)å–µ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ES7.xç‰ˆæœ¬å¯ä»¥å‚è€ƒï¼šElasticsearch7å­¦ä¹ ç¬”è®°  ä¸€ã€Elasticsearch8.xæ¦‚è¿° 1ã€Elasticsearch æ–°ç‰¹æ€§ ä» 2019 å¹´ 4 æœˆ 10 æ—¥ Elasticsearch7.0 ç‰ˆæœ¬çš„å‘å¸ƒï¼Œåˆ° 2022 å¹´ 2 æœˆ 11 æ—¥ Elasticsearch8.0 ç‰ˆæœ¬çš„å‘å¸ƒçš„è¿‘ 3 å¹´é—´ï¼ŒåŸºäºä¸æ–­ä¼˜åŒ–çš„å¼€å‘è®¾è®¡ç†å¿µï¼ŒElasticsearch å‘å¸ƒäº†ä¸€ç³»åˆ—çš„å°ç‰ˆ">
<meta property="og:type" content="article">
<meta property="og:title" content="Elasticsearch8.xå­¦ä¹ ç¬”è®°">
<meta property="og:url" content="https://blog.shawncoding.top/posts/6b517eb9.html">
<meta property="og:site_name" content="æ˜Ÿæ˜Ÿçš„çŒ«(&gt;^Ï‰^&lt;)å–µ">
<meta property="og:description" content="ES7.xç‰ˆæœ¬å¯ä»¥å‚è€ƒï¼šElasticsearch7å­¦ä¹ ç¬”è®°  ä¸€ã€Elasticsearch8.xæ¦‚è¿° 1ã€Elasticsearch æ–°ç‰¹æ€§ ä» 2019 å¹´ 4 æœˆ 10 æ—¥ Elasticsearch7.0 ç‰ˆæœ¬çš„å‘å¸ƒï¼Œåˆ° 2022 å¹´ 2 æœˆ 11 æ—¥ Elasticsearch8.0 ç‰ˆæœ¬çš„å‘å¸ƒçš„è¿‘ 3 å¹´é—´ï¼ŒåŸºäºä¸æ–­ä¼˜åŒ–çš„å¼€å‘è®¾è®¡ç†å¿µï¼ŒElasticsearch å‘å¸ƒäº†ä¸€ç³»åˆ—çš„å°ç‰ˆ">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://qnypic.shawncoding.top/blog/202304071915837.png">
<meta property="og:image" content="http://qnypic.shawncoding.top/blog/202304071915856.png">
<meta property="article:published_time" content="2023-04-07T13:42:41.000Z">
<meta property="article:modified_time" content="2023-04-07T13:49:08.173Z">
<meta property="article:author" content="Shawn">
<meta property="article:tag" content="ä¸­é—´ä»¶">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://qnypic.shawncoding.top/blog/202304071915837.png">
  
    <link rel="alternative" href="/atom.xml" title="æ˜Ÿæ˜Ÿçš„çŒ«(&gt;^Ï‰^&lt;)å–µ" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/1.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.0cf68a.css">
<link rel="stylesheet" type="text/css" href="/./search.css">
  
  <link rel="stylesheet" type="text/css" href="/./avatarrotation.css">
  
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  <!-- Global site tag (gtag.js) - Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-178745185-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-178745185-1');
    </script>

<!-- End Google Analytics -->
  
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?bfc79b86aa87f7cc5e5cb4920188a950";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>

  <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <!--ç™¾åº¦è‡ªåŠ¨æ¨é€-->

    <!-- å¼€å¯ç™¾åº¦ç«™é•¿å¹³å°è‡ªåŠ¨æ¨é€https://ziyuan.baidu.com/linksubmit/indexï¼Œ
    https://ziyuan.baidu.com/college/courseinfo?id=267&page=2#h2_article_title19-->
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
    
<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>

    <div class="mymenucontainer" onclick="myFunction(this)">
      <div class="bar1"></div>
      <div class="bar2"></div>
      <div class="bar3"></div>
    </div>

    <div class="left-col" q-class="show:isShow">
      
<!-- <div class="overlay" style="background: url('https://w.wallhaven.cc/full/k9/wallhaven-k9zqjd.png') no-repeat center bottom;background-size: cover;opacity: 1"></div> -->
<div class="overlay" ></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/1.png" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">Shawn</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">ä¸»é¡µ</a></li>
	        
				<li><a href="/categories">åˆ†ç±»</a></li>
	        
				<li><a href="/archives">å½’æ¡£</a></li>
	        
				<li><a href="/photos/index.html">ç›¸å†Œ</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">æ‰€æœ‰æ–‡ç« </a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">å‹é“¾</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">å…³äºæˆ‘</a>
    			
            
            
		</nav>
		<ul style="font-size:12px; font-style:oblique; font-weight:100; color:#1D94CE; margin-top:-15px" >
			æ€»æ–‡ç« æ•°ï¼š168
		</ul>
		
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/LXT2017" title="github"><i class="icon-github"></i></a>
		        
					<a class="csdn" target="_blank" href="https://blog.csdn.net/lemon_TT" title="csdn"><i class="icon-csdn"></i></a>
		        
					<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="mail" target="_blank" href="mailto:shawn955@163.com" title="mail"><i class="icon-mail"></i></a>
		        
			</div>

			
			<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=244 height=100 src="//music.163.com/outchain/player?type=2&id=550082870&auto=0&height=66"></iframe>
			

			
		</nav>

	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse" style="background: rgba(255, 255, 255, 0.4)">
    <!-- <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse"> -->
      
<nav id="mobile-nav">
  	<!-- <div class="overlay js-overlay" style="background: #4d4d4d"></div> -->
  	<div class="overlay js-overlay"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/img/1.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">Shawn</h1>
			</hgroup>
			
			
			
				
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/LXT2017" title="github"><i class="icon-github"></i></a>
			        
						<a class="csdn" target="_blank" href="https://blog.csdn.net/lemon_TT" title="csdn"><i class="icon-csdn"></i></a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="mail" target="_blank" href="mailto:shawn955@163.com" title="mail"><i class="icon-mail"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 80%">
				
				
					<li style="width: 25%"><a href="/">ä¸»é¡µ</a></li>
		        
					<li style="width: 25%"><a href="/categories">åˆ†ç±»</a></li>
		        
					<li style="width: 25%"><a href="/archives">å½’æ¡£</a></li>
		        
					<li style="width: 25%"><a href="/photos/index.html">ç›¸å†Œ</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>



            
      <div class="page-header" style="">
          
          <span>ğŸ»  
              <span id="jinrishici-sentence" title="ä»Šæ—¥è¯—è¯">æ­£åœ¨åŠ è½½ä»Šæ—¥è¯—è¯....</span>
          </span>
          <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>

          
          <script type="text/javascript" src="/js/search.js"></script>
          <span id="local-search" class="local-search local-search-plugin" style="">
            <input type="search" placeholder="ç«™å†…æœç´¢" id="local-search-input" class="local-search-input-cls" style="">
            <i id="local-search-icon-search" class="icon" aria-hidden="true" title="ç«™å†…æœç´¢">ğŸ”</i>
            <div id="local-search-result" class="local-search-result-cls"></div>
          </span>

          <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
          <script>
              if ($('.local-search').size()) {
                $.getScript('/js/search.js', function() {
                  searchFunc("/search.xml", 'local-search-input', 'local-search-result');
                });
              }
          </script>
          
      </div>
      



      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            <article id="post-Elasticsearch8-xå­¦ä¹ ç¬”è®°" class="article article-type-post " itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
        
        <a href="/posts/6b517eb9.html" class="archive-article-date">
  	<time datetime="2023-04-07T13:42:41.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-04-07</time>
  	
</a>
        

        <!-- å¼€å§‹æ·»åŠ å­—æ•°ç»Ÿè®¡-->
            
        <div style="margin-top:10px;">
    <span class="post-time">
      <span class="post-meta-item-icon">
        <i class="fa fa-keyboard-o"></i>
        <span class="post-meta-item-text">  å­—æ•°ç»Ÿè®¡: </span>
        <span class="post-count">14.2kå­—</span>
      </span>
    </span>

    <span class="post-time">
      &nbsp; | &nbsp;
      <span class="post-meta-item-icon">
        <i class="fa fa-hourglass-half"></i>
        <span class="post-meta-item-text">  é˜…è¯»æ—¶é•¿â‰ˆ</span>
        <span class="post-count">58åˆ†</span>
      </span>
    </span>
</div>
        
        <!-- æ·»åŠ å®Œæˆ -->

      </header>
    
    <div class="article-entry" itemprop="articleBody">

      

      
      <center><p>
  
    <h1 class="article-title_code_ant" itemprop="name">
      Elasticsearch8.xå­¦ä¹ ç¬”è®°
    </h1>
  
</p></center>

      
        <blockquote>
<p>ES7.xç‰ˆæœ¬å¯ä»¥å‚è€ƒï¼š<a href="https://blog.csdn.net/lemon_TT/article/details/129101681" target="_blank" rel="noopener" title="Elasticsearch7å­¦ä¹ ç¬”è®°">Elasticsearch7å­¦ä¹ ç¬”è®°</a></p>
</blockquote>
<h1>ä¸€ã€Elasticsearch8.xæ¦‚è¿°</h1>
<h2 id="1ã€Elasticsearch-æ–°ç‰¹æ€§">1ã€Elasticsearch æ–°ç‰¹æ€§</h2>
<p>ä» 2019 å¹´ 4 æœˆ 10 æ—¥ Elasticsearch7.0 ç‰ˆæœ¬çš„å‘å¸ƒï¼Œåˆ° 2022 å¹´ 2 æœˆ 11 æ—¥ Elasticsearch8.0 ç‰ˆæœ¬çš„å‘å¸ƒçš„è¿‘ 3 å¹´é—´ï¼ŒåŸºäºä¸æ–­ä¼˜åŒ–çš„å¼€å‘è®¾è®¡ç†å¿µï¼ŒElasticsearch å‘å¸ƒäº†ä¸€ç³»åˆ—çš„å°ç‰ˆæœ¬ã€‚è¿™äº›å°ç‰ˆæœ¬åœ¨ä»¥ä¸‹æ–¹é¢å–å¾—äº†é•¿è¶³çš„è¿›æ­¥å¹¶åŒæ—¶å¼•å…¥ä¸€äº›å…¨æ–°çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>å‡å°‘å†…å­˜å †ä½¿ç”¨ï¼Œå®Œå…¨æ”¯æŒ ARM æ¶æ„ï¼Œå¼•å…¥å…¨æ–°çš„æ–¹å¼ä»¥ä½¿ç”¨æ›´å°‘çš„å­˜å‚¨ç©ºé—´ï¼Œä»è€Œè®©æ¯ä¸ªèŠ‚ç‚¹æ‰˜ç®¡æ›´å¤šçš„æ•°æ®</li>
<li>é™ä½æŸ¥è¯¢å¼€é”€ï¼Œåœ¨å¤§è§„æ¨¡éƒ¨ç½²ä¸­æˆæ•ˆå°¤ä¸ºæ˜æ˜¾</li>
<li>æé«˜æ—¥æœŸç›´æ–¹å›¾å’Œæœç´¢èšåˆçš„é€Ÿåº¦ï¼Œå¢å¼ºäº†é¡µé¢ç¼“å­˜çš„æ€§èƒ½ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„&quot;pre-filter&quot;æœç´¢çŸ­è¯­</li>
<li>åœ¨ Elasticsearch 7.3 å’Œ Elasticsearch 7.4 ç‰ˆä¸­ï¼Œå¼•å…¥äº†å¯¹çŸ¢é‡ç›¸ä¼¼å‡½æ•°çš„æ”¯æŒåœ¨æœ€æ–°å‘å¸ƒçš„ 8.0 ç‰ˆæœ¬ä¸­ï¼Œä¹ŸåŒæ ·å¢åŠ å’Œå®Œå–„äº†å¾ˆå¤šæ–°çš„åŠŸèƒ½</li>
<li>å¢åŠ å¯¹è‡ªç„¶è¯­è¨€å¤„ç† (NLP) æ¨¡å‹çš„åŸç”Ÿæ”¯æŒï¼Œè®©çŸ¢é‡æœç´¢åŠŸèƒ½æ›´å®¹æ˜“å®ç°ï¼Œè®©å®¢æˆ·å’Œå‘˜å·¥èƒ½å¤Ÿä½¿ç”¨ä»–ä»¬è‡ªå·±çš„æ–‡å­—å’Œè¯­è¨€æ¥æœç´¢å¹¶æ”¶åˆ°é«˜åº¦ç›¸å…³çš„ç»“æœ</li>
<li>ç›´æ¥åœ¨ Elasticsearch ä¸­æ‰§è¡Œå‘½åå®ä½“è¯†åˆ«ã€æƒ…æ„Ÿåˆ†æã€æ–‡æœ¬åˆ†ç±»ç­‰ï¼Œè€Œæ— éœ€ä½¿ç”¨é¢å¤–çš„ç»„ä»¶æˆ–è¿›è¡Œç¼–ç </li>
<li>Elasticsearch 8.0 åŸºäº Lucene 9.0 å¼€å‘çš„ï¼Œé‚£äº›åˆ©ç”¨ç°ä»£ NLP çš„æœç´¢ä½“éªŒï¼Œéƒ½å¯ä»¥å€ŸåŠ©ï¼ˆæ–°å¢çš„ï¼‰å¯¹è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢çš„åŸç”Ÿæ”¯æŒï¼Œå¿«é€Ÿä¸”å¤§è§„æ¨¡åœ°å®ç°ã€‚é€šè¿‡ ANNï¼Œå¯ä»¥å¿«é€Ÿå¹¶é«˜æ•ˆåœ°å°†åŸºäºçŸ¢é‡çš„æŸ¥è¯¢ä¸åŸºäºçŸ¢é‡çš„æ–‡æ¡£è¯­æ–™åº“ï¼ˆæ— è®ºæ˜¯å°è¯­æ–™åº“ã€å¤§è¯­æ–™åº“è¿˜æ˜¯å·¨å‹è¯­æ–™åº“ï¼‰è¿›è¡Œæ¯”è¾ƒ</li>
<li>å¯ä»¥ç›´æ¥åœ¨ Elasticsearch ä¸­ä½¿ç”¨ PyTorch Machine Learning æ¨¡å‹ï¼ˆå¦‚ BERTï¼‰ï¼Œå¹¶åœ¨Elasticsearch ä¸­åŸç”Ÿä½¿ç”¨è¿™äº›æ¨¡å‹æ‰§è¡Œæ¨ç†</li>
</ul>
<a id="more"></a>
<h2 id="2ã€8-xä¸7-xçš„å¯¹æ¯”">2ã€8.xä¸7.xçš„å¯¹æ¯”</h2>
<ul>
<li>å‡å°‘å†…å­˜å †ä½¿ç”¨ï¼Œå®Œå…¨æ”¯æŒ ARM æ¶æ„ï¼Œå¼•å…¥å…¨æ–°çš„æ–¹å¼ä»¥ä½¿ç”¨æ›´å°‘çš„å­˜å‚¨ç©ºé—´ï¼Œä»è€Œè®©æ¯ä¸ªèŠ‚ç‚¹æ‰˜ç®¡æ›´å¤šçš„æ•°æ®</li>
<li>Elasticsearch8.xéœ€è¦jdk17</li>
<li>é™ä½æŸ¥è¯¢å¼€é”€ï¼Œåœ¨å¤§è§„æ¨¡éƒ¨ç½²ä¸­æˆæ•ˆå°¤ä¸ºæ˜æ˜¾</li>
<li>é¦–æ¬¡å¯åŠ¨ Elasticsearch8.xæ—¶ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œå®‰å…¨é…ç½®</li>
<li>åœ¨ Elasticsearch 8.0 ä¸­åšäº†ä¸€äº›æ”¹å˜æ¥ä¿æŠ¤ç³»ç»Ÿç´¢å¼•ä¸è¢«ç›´æ¥è®¿é—®</li>
<li>ä¸º<code>keyword</code>ã€ <code>match_only_text</code>å’Œ<code>text</code>å­—æ®µèŠ‚çœå­˜å‚¨ç©ºé—´</li>
<li>åŠ å¿«<code>geo_point</code>ã€<code>geo_shape</code>å’ŒèŒƒå›´å­—æ®µç´¢å¼•é€Ÿåº¦</li>
</ul>
<h1>äºŒã€Elasticsearch <strong>å®‰è£…</strong>ä¸ä½¿ç”¨</h1>
<h2 id="1ã€Elasticsearch-é›†ç¾¤å®‰è£…">1ã€Elasticsearch é›†ç¾¤å®‰è£…</h2>
<h3 id="1-1-ESä¸‹è½½ä¸é›†ç¾¤è§„åˆ’">1.1 ESä¸‹è½½ä¸é›†ç¾¤è§„åˆ’</h3>
<blockquote>
<p>Java çš„å®˜æ–¹åœ°å€ï¼š<a href="ttps://www.oracle.com/java" title="https://www.oracle.com/java">https://www.oracle.com/java</a><br>
ESå®˜ç½‘ï¼š<a href="http://www.elastic.co/cn/" target="_blank" rel="noopener" title="http://www.elastic.co/cn/">http://www.elastic.co/cn/</a><br>
ESä¸‹è½½ï¼š<a href="https://www.elastic.co/cn/downloads/past-releases#elasticsearch" target="_blank" rel="noopener" title="https://www.elastic.co/cn/downloads/past-releases#elasticsearch">https://www.elastic.co/cn/downloads/past-releases#elasticsearch</a></p>
</blockquote>
<p>æˆ‘ä»¬å‡†å¤‡ä¸‰å° linux è™šæ‹Ÿæœº(åŸºäºCentos7)ï¼Œç”¨äºé…ç½®Elasticsearch é›†ç¾¤ï¼Œé›†ç¾¤ä¸­-èŠ‚ç‚¹åç§°ä¾æ¬¡ä¸º es-node-1ï¼Œes-node-2ï¼Œes-node-3ï¼Œå…¶ä¸­ESç‰ˆæœ¬æˆ‘ä»¬é€‰æ‹©ç•¥æ—©çš„ 8.1.0 ç‰ˆæœ¬ä¸‹è½½åœ°å€(å¯ä»¥ç›´æ¥é€‰æ‹©é€‚é…JDKç‰ˆæœ¬çš„)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„ä»¥rootç™»å½•</span></span><br><span class="line">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.1.0-linux-x86_64.tar.gz</span><br><span class="line"><span class="comment"># å°†ä¸‹è½½å¥½çš„å‹ç¼©åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­,è§£å‹</span></span><br><span class="line">mkdir -p /usr/soft</span><br><span class="line">tar zxvf elasticsearch-8.1.0-linux-x86_64.tar.gz -C /usr/soft</span><br><span class="line"><span class="built_in">cd</span> /usr/soft/</span><br><span class="line">mv elasticsearch-8.1.0/ elasticsearch8</span><br></pre></td></tr></table></figure>
<p>è§£å‹åçš„Elasticsearch çš„ç›®å½•ç»“æ„å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th><strong>ç›®å½•</strong></th>
<th><strong>å«ä¹‰</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>bin</td>
<td>å¯æ‰§è¡Œè„šæœ¬ç›®å½•</td>
</tr>
<tr>
<td>config</td>
<td>é…ç½®ç›®å½•</td>
</tr>
<tr>
<td>jdk</td>
<td>å†…ç½® JDK ç›®å½•</td>
</tr>
<tr>
<td>lib</td>
<td>ç±»åº“</td>
</tr>
<tr>
<td>logs</td>
<td>æ—¥å¿—ç›®å½•</td>
</tr>
<tr>
<td>modules</td>
<td>æ¨¡å—ç›®å½•</td>
</tr>
<tr>
<td>plugins</td>
<td>æ’ä»¶ç›®å½•</td>
</tr>
</tbody>
</table>
<h3 id="1-2-é…ç½®ç¯å¢ƒ">1.2 é…ç½®ç¯å¢ƒ</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–°å¢ es ç”¨æˆ·</span></span><br><span class="line">useradd es</span><br><span class="line"><span class="comment"># ä¸º es ç”¨æˆ·è®¾ç½®å¯†ç </span></span><br><span class="line">passwd es</span><br><span class="line"><span class="comment"># ä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…</span></span><br><span class="line">chown -R es:es /usr/soft/elasticsearch8</span><br><span class="line"><span class="comment"># åˆ›å»ºæ•°æ®æ–‡ä»¶ç›®å½•</span></span><br><span class="line">mkdir /usr/soft/elasticsearch8/data</span><br><span class="line"><span class="comment"># åˆ›å»ºè¯ä¹¦ç›®å½•</span></span><br><span class="line">mkdir /usr/soft/elasticsearch8/config/certs</span><br><span class="line"></span><br><span class="line"><span class="comment"># ==========================================</span></span><br><span class="line"><span class="comment"># åœ¨ç¬¬ä¸€å°æœåŠ¡å™¨èŠ‚ç‚¹ master è®¾ç½®é›†ç¾¤å¤šèŠ‚ç‚¹é€šä¿¡å¯†é’¥</span></span><br><span class="line"><span class="comment"># åˆ‡æ¢ç”¨æˆ·</span></span><br><span class="line">su es</span><br><span class="line"><span class="built_in">cd</span> /usr/soft/elasticsearch8</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­¾å‘ ca è¯ä¹¦ï¼Œè¿‡ç¨‹ä¸­éœ€æŒ‰ä¸¤æ¬¡å›è½¦é”®</span></span><br><span class="line">bin/elasticsearch-certutil ca</span><br><span class="line"><span class="comment"># ç”¨ ca è¯ä¹¦ç­¾å‘èŠ‚ç‚¹è¯ä¹¦ï¼Œè¿‡ç¨‹ä¸­éœ€æŒ‰ä¸‰æ¬¡å›è½¦é”®</span></span><br><span class="line">bin/elasticsearch-certutil cert --ca elastic-stack-ca.p12</span><br><span class="line"><span class="comment"># å°†ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶ç§»åŠ¨åˆ° config/certs ç›®å½•ä¸­</span></span><br><span class="line">mv elastic-stack-ca.p12 elastic-certificates.p12 config/certs</span><br><span class="line"></span><br><span class="line"><span class="comment"># =============================================</span></span><br><span class="line"><span class="comment"># åœ¨ç¬¬ä¸€å°æœåŠ¡å™¨èŠ‚ç‚¹ master è®¾ç½®é›†ç¾¤å¤šèŠ‚ç‚¹ HTTP è¯ä¹¦</span></span><br><span class="line"><span class="comment"># ç­¾å‘ Https è¯ä¹¦</span></span><br><span class="line">bin/elasticsearch-certutil http</span><br><span class="line"><span class="comment"># ä»¥ä¸‹æ˜¯æ¯æ¬¡è¦æ±‚è¾“å…¥æ—¶ï¼Œéœ€è¦è¾“å…¥çš„å†…å®¹</span></span><br><span class="line">n <span class="comment">#æ˜¯å¦è®¤è¯</span></span><br><span class="line">y <span class="comment">#æ˜¯å¦å·²æœ‰è¯ä¹¦</span></span><br><span class="line">certs/elastic-stack-ca.p12 <span class="comment">#è¯ä¹¦ç›®å½•</span></span><br><span class="line">å›è½¦ <span class="comment">#è¾“å…¥è¯ä¹¦å¯†ç ï¼ˆå¦‚æœæ²¡æœ‰è®¾ç½®å°±å›è½¦ï¼‰</span></span><br><span class="line">5y <span class="comment">#è¯ä¹¦æœ‰æ•ˆæ—¶é—´5å¹´</span></span><br><span class="line">n <span class="comment">#æ¯ä¸ªç»“ç‚¹éƒ½ç”Ÿæˆè¯ä¹¦å—</span></span><br><span class="line"></span><br><span class="line">master <span class="comment">#ç»“ç‚¹çš„ä¸»æœºåç§°</span></span><br><span class="line">slave1 <span class="comment">#ç»“ç‚¹çš„ä¸»æœºåç§°</span></span><br><span class="line">slave2 <span class="comment">#ç»“ç‚¹çš„ä¸»æœºåç§°</span></span><br><span class="line">å›è½¦ <span class="comment">#é€€å‡ºè¾“å…¥</span></span><br><span class="line">y <span class="comment">#ç¡®å®š</span></span><br><span class="line"></span><br><span class="line">192.168.3.34 <span class="comment">#ç»“ç‚¹çš„ip</span></span><br><span class="line">192.168.3.35 <span class="comment">#ç»“ç‚¹çš„ip</span></span><br><span class="line">192.168.3.36 <span class="comment">#ç»“ç‚¹çš„ip</span></span><br><span class="line">å›è½¦ <span class="comment">#é€€å‡ºè¾“å…¥</span></span><br><span class="line">y <span class="comment">#ç¡®å®š</span></span><br><span class="line"></span><br><span class="line">n <span class="comment">#æ˜¯å¦ä¿®æ”¹è¯ä¹¦é…ç½®</span></span><br><span class="line">å›è½¦ <span class="comment">#è¾“å…¥å¯†ç </span></span><br><span class="line">å›è½¦ <span class="comment">#ç”Ÿæˆä½ç½®ï¼ˆå›è½¦é»˜è®¤ï¼‰</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ====================================</span></span><br><span class="line"><span class="comment"># è§£å‹åˆšåˆšç”Ÿæˆçš„ zip åŒ…</span></span><br><span class="line">unzip elasticsearch-ssl-http.zip</span><br><span class="line"><span class="comment"># å°†è§£å‹åçš„è¯ä¹¦æ–‡ä»¶ç§»åŠ¨åˆ° config/certs ç›®å½•ä¸­</span></span><br><span class="line">mv elasticsearch/http.p12 kibana/elasticsearch-ca.pem config/certs</span><br></pre></td></tr></table></figure>
<h3 id="1-3-ä¿®æ”¹é…ç½®æ–‡ä»¶">1.3 ä¿®æ”¹é…ç½®æ–‡ä»¶</h3>
<p><code>config/elasticsearch.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½® ES é›†ç¾¤åç§°</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">es-cluster</span> </span><br><span class="line"><span class="comment"># è®¾ç½®é›†ç¾¤ä¸­å½“å‰èŠ‚ç‚¹åç§°</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">master</span></span><br><span class="line"><span class="comment"># è®¾ç½®æ•°æ®ï¼Œæ—¥å¿—æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="attr">path.data:</span> <span class="string">/usr/soft/elasticsearch8/data</span></span><br><span class="line"><span class="attr">path.logs:</span> <span class="string">/usr/soft/elasticsearch8/logs</span></span><br><span class="line"><span class="comment"># è®¾ç½®ç½‘ç»œè®¿é—®èŠ‚ç‚¹</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="string">master</span></span><br><span class="line"><span class="comment"># è®¾ç½®ç½‘ç»œè®¿é—®ç«¯å£</span></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="comment"># åˆå§‹èŠ‚ç‚¹</span></span><br><span class="line"><span class="attr">discovery.seed_hosts:</span> <span class="string">["master"]</span></span><br><span class="line"><span class="comment"># å®‰å…¨è®¤è¯</span></span><br><span class="line"><span class="attr">xpack.security.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">xpack.security.enrollment.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">xpack.security.http.ssl:</span></span><br><span class="line"> <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line"> <span class="attr">keystore.path:</span> <span class="string">/usr/soft/elasticsearch8/config/certs/http.p12</span></span><br><span class="line"> <span class="attr">truststore.path:</span> <span class="string">/usr/soft/elasticsearch8/config/certs/http.p12</span></span><br><span class="line"><span class="attr">xpack.security.transport.ssl:</span></span><br><span class="line"> <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line"> <span class="attr">verification_mode:</span> <span class="string">certificate</span></span><br><span class="line"> <span class="attr">keystore.path:</span> <span class="string">/usr/soft/elasticsearch8/config/certs/elastic-certificates.p12</span></span><br><span class="line"> <span class="attr">truststore.path:</span> <span class="string">/usr/soft/elasticsearch8/config/certs/elastic-certificates.p12</span></span><br><span class="line"><span class="comment"># æ­¤å¤„éœ€æ³¨æ„ï¼Œä¸ºä¸Šé¢é…ç½®çš„èŠ‚ç‚¹åç§°</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> <span class="string">["master"]</span></span><br><span class="line"><span class="attr">http.host:</span> <span class="string">[_local_,</span> <span class="string">_site_]</span></span><br><span class="line"><span class="attr">ingest.geoip.downloader.enabled:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">xpack.security.http.ssl.client_authentication:</span> <span class="string">none</span></span><br></pre></td></tr></table></figure>
<h3 id="1-4-å¯åŠ¨ES">1.4 å¯åŠ¨ES</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†æ¬¡ä¹‹å‰éœ€è¦æ‰©å¤§æ–‡ä»¶å¥æŸ„æ•°ï¼Œä¸ç„¶ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment"># ç”±äºesæ–‡ä»¶æ¯”è¾ƒå¤šï¼Œéœ€è¦ä¿®æ”¹ç³»ç»Ÿé…ç½®</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹ /etc/security/limits.conf</span></span><br><span class="line"><span class="comment"># åœ¨æ–‡ä»¶æœ«å°¾ä¸­å¢åŠ ä¸‹é¢å†…å®¹ï¼Œæ¯ä¸ªè¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æ–‡ä»¶æ•°çš„é™åˆ¶</span></span><br><span class="line">es soft nofile 65536</span><br><span class="line">es hard nofile 65536</span><br><span class="line"><span class="comment"># ä¿®æ”¹ /etc/security/limits.d/20-nproc.conf</span></span><br><span class="line"><span class="comment"># åœ¨æ–‡ä»¶æœ«å°¾ä¸­å¢åŠ ä¸‹é¢å†…å®¹ï¼Œæ¯ä¸ªè¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æ–‡ä»¶æ•°çš„é™åˆ¶</span></span><br><span class="line">es soft nofile 65536</span><br><span class="line">es hard nofile 65536</span><br><span class="line"><span class="comment"># æ“ä½œç³»ç»Ÿçº§åˆ«å¯¹æ¯ä¸ªç”¨æˆ·åˆ›å»ºçš„è¿›ç¨‹æ•°çš„é™åˆ¶</span></span><br><span class="line">* hard nproc 4096</span><br><span class="line"><span class="comment"># æ³¨ï¼š * åœ°è¡¨linux æ‰€æœ‰ç”¨æˆ·åç§°</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹/etc/sysctl.conf</span></span><br><span class="line"><span class="comment"># åœ¨æ–‡ä»¶æœ«å°¾ä¸­å¢åŠ ä¸‹é¢å†…å®¹</span></span><br><span class="line"><span class="comment"># ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰çš„ VMA(è™šæ‹Ÿå†…å­˜åŒºåŸŸ)çš„æ•°é‡,é»˜è®¤å€¼ä¸º 65536</span></span><br><span class="line">vm.max_map_count=655360</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½</span></span><br><span class="line">sysctl -p</span><br><span class="line"><span class="comment"># æœ€åæŸ¥çœ‹ä¸€ä¸‹ï¼Œä¸è¡Œå°±é‡å¯ä¸€ä¸‹</span></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„è½¯é™åˆ¶</span></span><br><span class="line"><span class="built_in">ulimit</span> -n </span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ç¡¬é™åˆ¶</span></span><br><span class="line"><span class="built_in">ulimit</span> -H -n</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ ES è½¯ä»¶</span></span><br><span class="line">bin/elasticsearch</span><br><span class="line"></span><br><span class="line"><span class="comment"># reset with `bin/elasticsearch-reset-password -u elastic`</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ¬¡æˆåŠŸå¯åŠ¨åï¼Œä¼šæ˜¾ç¤ºå¯†ç ï¼Œè¯·è®°ä½(ä¿å­˜ä¸‹æ¥ï¼Œåé¢ä¼šç”¨åˆ°)ï¼Œåœ¨è®¿é—®æ—¶éœ€è¦ï¼Œå› ä¸ºé…ç½®äº†å®‰å…¨åè®®ï¼Œæ‰€ä»¥ä½¿ç”¨ https åè®®è¿›è¡Œè®¿é—®ï¼Œä½†ç”±äºè¯ä¹¦æ˜¯è‡ªå·±ç”Ÿæˆçš„ï¼Œå¹¶ä¸å¯é ï¼Œæ‰€ä»¥ä¼šæœ‰å®‰å…¨æç¤ºã€‚è®¿é—®:<code>https://192.168.3.34:9200/</code>(æ³¨æ„è´¦å·å¯†ç çš„ä¿å­˜)</p>
<h3 id="1-5-å®‰è£…å…¶ä»–ç»“ç‚¹">1.5 å®‰è£…å…¶ä»–ç»“ç‚¹</h3>
<p>æ“ä½œå’Œä¸Šé¢ä¸€æ ·è¯ä¹¦ç›´æ¥æ‹·è´<code>config/elasticsearch.yml</code>å¹¶ä¿®æ”¹ï¼š<code>node.name</code>ã€<code>network.host</code>(åå­—å’Œå‰é¢ä¸ä¸€æ ·)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åå°å¯åŠ¨æœåŠ¡</span></span><br><span class="line">bin/elasticsearch -d</span><br></pre></td></tr></table></figure>
<p>æœ€åå¯ä»¥é€šè¿‡<a href="https://github.com/mobz/elasticsearch-head" target="_blank" rel="noopener" title="elasticsearch-head">elasticsearch-head</a>æ’ä»¶æŸ¥çœ‹é›†ç¾¤æƒ…å†µ</p>
<h3 id="1-6-é—®é¢˜è§£å†³">1.6 é—®é¢˜è§£å†³</h3>
<ul>
<li>
<p>Elastic s earch æ˜¯ä½¿ç”¨ java å¼€å‘çš„ï¼Œ 8.1 ç‰ˆæœ¬çš„ ES éœ€è¦ JDK 17 åŠ ä»¥ä¸Šç‰ˆæœ¬ã€‚é»˜è®¤å®‰è£…åŒ…ä¸­ å¸¦æœ‰ JDK ç¯å¢ƒï¼Œå¦‚æœç³»ç»Ÿé…ç½®** ES_ JAVA_HOME ç¯å¢ƒå˜é‡ï¼Œé‚£ä¹ˆä¼šé‡‡ç”¨ç³»ç»Ÿé…ç½®çš„JDK**ã€‚å¦‚æœæ²¡æœ‰é…ç½® è¯¥ç¯å¢ƒå˜é‡ï¼ŒES ä¼š ä½¿ç”¨è‡ªå¸¦ æ†ç»‘ çš„ JDK ã€‚è™½ç„¶è‡ªå¸¦çš„ JDK æ˜¯ ESè½¯ä»¶æ¨èçš„ Java ç‰ˆæœ¬ï¼Œä½† ä¸€èˆ¬å»ºè®®ä½¿ç”¨ç³»ç»Ÿé…ç½®çš„ JDK</p>
</li>
<li>
<p>Windows ç¯å¢ƒ ä¸­å‡ºç°ä¸‹é¢çš„é”™è¯¯ä¿¡æ¯ï¼Œæ˜¯å› ä¸ºå¼€å¯äº† SSL è®¤è¯ï¼š<code>received p1aintext http traffic an an https charnelï¼Œclosing cormnection Metty4HftoChannel (Localkadress=/127.0.0.1.9200,</code>è§£å†³æ–¹æ³•ä¿®æ”¹<br>
<code>config/elasticsearch.yml</code> æ–‡ä»¶ï¼Œå°† enabled çš„å€¼ä¿®æ”¹ä¸º false</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">xpack.security.http.ssl:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">keystore.path:</span> <span class="string">certs/http.p12</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¯åŠ¨æˆåŠŸåï¼Œå¦‚æœè®¿é—® localhost:9200 åœ°å€åï¼Œå¼¹å‡ºç™»å½•çª—å£ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ï¼Œå› ä¸ºå¼€å¯äº†å¯†ç éªŒè¯æ¨¡å¼ï¼Œåœ¨å¯åŠ¨çª—å£ä¸­ä¼šæ˜¾ç¤ºè¾“å…¥è´¦å·å’Œå¯†ç ã€‚å¦‚æœæ²¡æœ‰æ³¨æ„åˆ°æˆ–æ²¡æœ‰æ‰¾åˆ°è´¦å·å¯†ç ï¼Œå¯ä»¥è®¾ç½®å…å¯†ç™»å½•ï¼š<code>xpack.security.enabled: false</code></p>
</li>
<li>
<p>åŒå‡»å¯åŠ¨çª—å£é—ªé€€ï¼Œé€šè¿‡è·¯å¾„è®¿é—®è¿½è¸ªé”™è¯¯ï¼Œå¦‚æœæ˜¯&quot;ç©ºé—´ä¸è¶³&quot;ï¼Œè¯·ä¿®æ”¹<code>config/jvm.options</code> é…ç½®æ–‡ä»¶</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">-Xms4g</span></span><br><span class="line"><span class="string">-Xmx4g</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¯åŠ¨åï¼Œå¦‚æœå¯†ç å¿˜è®°äº†ï¼Œæ€ä¹ˆåŠï¼Ÿå¯ä»¥é‡‡ç”¨æŒ‡ä»¤é‡ç½®å¯†ç ï¼Œå¦‚æœåªå¯åŠ¨å•ä¸€èŠ‚ç‚¹ï¼Œæ­¤æ“ä½œå¯èƒ½ä¼šå¤±è´¥ï¼Œè‡³å°‘å¯åŠ¨2 ä¸ªèŠ‚ç‚¹ï¼Œæµ‹è¯•æˆåŠŸ</p>
</li>
</ul>
<h2 id="2ã€Kibana-å®‰è£…">2ã€Kibana å®‰è£…</h2>
<h3 id="2-1-ä¸‹è½½">2.1 ä¸‹è½½</h3>
<p>Elasticsearch ä¸‹è½½çš„ç‰ˆæœ¬æ˜¯ 8.1.0ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©åŒæ ·çš„ 8.1.0 ç‰ˆï¼Œ<a href="https://www.elastic.co/cn/downloads/past-releases#kibana" target="_blank" rel="noopener" title="ä¸‹è½½åœ°å€">ä¸‹è½½åœ°å€</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://artifacts.elastic.co/downloads/kibana/kibana-8.1.0-linux-x86_64.tar.gz</span><br><span class="line"><span class="comment"># å°†ä¸‹è½½çš„å‹ç¼©åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨,è§£å‹ç¼©</span></span><br><span class="line">tar -zxvf kibana-8.1.0-linux-x86_64.tar.gz -C /usr/soft</span><br></pre></td></tr></table></figure>
<h3 id="2-2-é…ç½®ç¯å¢ƒ">2.2 é…ç½®ç¯å¢ƒ</h3>
<p>ç»™ Kibana ç”Ÿæˆè¯ä¹¦æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ ES æœåŠ¡å™¨ä¸­ç”Ÿæˆè¯ä¹¦ï¼Œè¾“å…¥å›è½¦å³å¯</span></span><br><span class="line"><span class="built_in">cd</span> /usr/soft/elasticsearch8</span><br><span class="line">bin/elasticsearch-certutil csr -name kibana -dns master</span><br><span class="line"><span class="comment"># è§£å‹æ–‡ä»¶</span></span><br><span class="line">unzip csr-bundle.zip</span><br><span class="line"><span class="comment"># å°†è§£å‹åçš„æ–‡ä»¶ç§»åŠ¨åˆ° kibana çš„ config ç›®å½•ä¸­</span></span><br><span class="line"><span class="built_in">cd</span> kibana/</span><br><span class="line">mv kibana.csr kibana.key /usr/soft/kibana-8.1.0/config/</span><br><span class="line"><span class="comment"># ç”Ÿæˆ crt æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">cd</span> /usr/soft/kibana-8.1.0/config</span><br><span class="line">openssl x509 -req -<span class="keyword">in</span> kibana.csr -signkey kibana.key -out kibana.crt</span><br><span class="line"></span><br><span class="line"><span class="comment"># ===============================</span></span><br><span class="line">åˆ›å»º<span class="string">"kibana_system"</span>ç”¨æˆ·</span><br><span class="line"><span class="built_in">cd</span> /usr/soft/elasticsearch8</span><br><span class="line">bin\elasticsearch-reset-password -u kibana_system</span><br><span class="line">y</span><br><span class="line"><span class="comment"># ä¿å­˜æ–°çš„å¯†ç </span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-ä¿®æ”¹é…ç½®æ–‡ä»¶">2.3 ä¿®æ”¹é…ç½®æ–‡ä»¶</h3>
<p><code>/usr/soft/kibana-8.1.0/config/kibana.yml</code>,æ³¨æ„ä¿®æ”¹elasticsearch.passwordçš„å¯†ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯å£</span></span><br><span class="line">server.port: 5601</span><br><span class="line"><span class="comment"># æœåŠ¡ä¸»æœºå</span></span><br><span class="line">server.host: <span class="string">"master"</span></span><br><span class="line"><span class="comment"># å›½é™…åŒ– - ä¸­æ–‡</span></span><br><span class="line">i18n.locale: <span class="string">"zh-CN"</span></span><br><span class="line"><span class="comment"># ES æœåŠ¡ä¸»æœºåœ°å€</span></span><br><span class="line">elasticsearch.hosts: [<span class="string">"https://master:9200"</span>]</span><br><span class="line"><span class="comment"># è®¿é—® ES æœåŠ¡çš„è´¦å·å¯†ç </span></span><br><span class="line">elasticsearch.username: <span class="string">"kibana_system"</span></span><br><span class="line">elasticsearch.password: <span class="string">"uwFAc4V9vl9WZVeACrYg"</span></span><br><span class="line">elasticsearch.ssl.verificationMode: none</span><br><span class="line">elasticsearch.ssl.certificateAuthorities: [ <span class="string">"/usr/soft/elasticsearch8/config/certs/elasticsearch-ca.pem"</span> ]</span><br><span class="line">server.ssl.enabled: <span class="literal">true</span></span><br><span class="line">server.ssl.certificate: /usr/soft/kibana-8.1.0/config/kibana.crt</span><br><span class="line">server.ssl.key: /usr/soft/kibana-8.1.0/config/kibana.key</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹è½¯ä»¶ç›®å½•æ‹¥æœ‰è€…ï¼Œå¦‚æœä½¿ç”¨elasticç”¨æˆ·ä¼šæŠ¥é”™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> /usr/soft/kibana-8.1.0</span><br><span class="line">chown -R es:es /usr/soft/kibana-8.1.0/</span><br></pre></td></tr></table></figure>
<h3 id="2-4-å¯åŠ¨">2.4 å¯åŠ¨</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢ç”¨æˆ·</span></span><br><span class="line">su es</span><br><span class="line"><span class="comment"># å¯åŠ¨è½¯ä»¶</span></span><br><span class="line">bin/kibana</span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥åå°å¯åŠ¨</span></span><br><span class="line">nohup /usr/soft/kibana-8.1.0/bin/kibana &gt;kibana.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>
<p>è®¿é—®<code>https://192.168.3.34:5601/</code>(ä½¿ç”¨elasticç”¨æˆ·ç™»å½•)</p>
<h1>ä¸‰ã€Elasticsearch åŸºç¡€åŠŸèƒ½</h1>
<p>ä¸‹é¢æ‰€æœ‰åŠŸèƒ½éƒ½åœ¨Kibanaçš„æ§åˆ¶å°è¿›è¡Œæ¼”ç¤ºæ“ä½œ</p>
<h2 id="1ã€ç´¢å¼•æ“ä½œ">1ã€ç´¢å¼•æ“ä½œ</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç´¢å¼•</span></span><br><span class="line"><span class="comment"># PUTç´¢å¼•åç§°(å°å†™)</span></span><br><span class="line"><span class="comment"># å¦‚æœé‡å¤ä¼šæŠ¥é”™</span></span><br><span class="line">PUT test_index</span><br><span class="line"></span><br><span class="line"><span class="comment"># ================================</span></span><br><span class="line"><span class="comment"># å¯ä»¥å¢åŠ é…ç½®</span></span><br><span class="line">PUT test_index_1</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"aliases"</span>: &#123;</span><br><span class="line">    <span class="string">"test1"</span>: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># ESä¸å…è®¸ä¿®æ”¹ç´¢å¼•ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#===========================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># HEADç´¢å¼•,http200è¡¨ç¤ºæˆåŠŸï¼Œä¸å­˜åœ¨æ—¶404</span></span><br><span class="line">head test_index</span><br><span class="line"></span><br><span class="line"><span class="comment"># ==================</span></span><br><span class="line"><span class="comment"># åˆ é™¤,å¦‚æœåˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„ç´¢å¼•ï¼Œé‚£ä¹ˆä¼šè¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">DELETE test_index_1</span><br><span class="line"></span><br><span class="line"><span class="comment"># ===================================</span></span><br><span class="line"><span class="comment"># æŸ¥è¯¢ç´¢å¼•ï¼Œè¿”å›ç´¢å¼•è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">GET test_index</span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ‰€æœ‰ç´¢å¼•</span></span><br><span class="line">GET _cat/indices</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th><strong>å†…å®¹</strong></th>
<th><strong>å«ä¹‰</strong></th>
<th><strong>å…·ä½“æè¿°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>green</td>
<td>health</td>
<td>å½“å‰æœåŠ¡å™¨å¥åº·çŠ¶æ€ï¼š</td>
</tr>
<tr>
<td><strong>green</strong>(é›†ç¾¤å®Œæ•´) <strong>yellow</strong>(å•ç‚¹æ­£å¸¸ã€é›†ç¾¤ä¸å®Œæ•´) red(å•ç‚¹ä¸æ­£å¸¸)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>open</td>
<td>status</td>
<td>ç´¢å¼•æ‰“å¼€ã€å…³é—­çŠ¶æ€</td>
</tr>
<tr>
<td>myindex</td>
<td>index</td>
<td>ç´¢å¼•å</td>
</tr>
<tr>
<td>Swx2xWHLR6yv23kTrK3sAg</td>
<td>uuid</td>
<td>ç´¢å¼•ç»Ÿä¸€ç¼–å·</td>
</tr>
<tr>
<td>1</td>
<td>pri</td>
<td>ä¸»åˆ†ç‰‡æ•°é‡</td>
</tr>
<tr>
<td>1</td>
<td>rep</td>
<td>å‰¯æœ¬æ•°é‡</td>
</tr>
<tr>
<td>0</td>
<td>docs.count</td>
<td>å¯ç”¨æ–‡æ¡£æ•°é‡</td>
</tr>
<tr>
<td>0</td>
<td>docs.deleted</td>
<td>æ–‡æ¡£åˆ é™¤çŠ¶æ€ï¼ˆé€»è¾‘åˆ é™¤ï¼‰</td>
</tr>
<tr>
<td>450b</td>
<td>store.size</td>
<td>ä¸»åˆ†ç‰‡å’Œå‰¯åˆ†ç‰‡æ•´ä½“å ç©ºé—´å¤§å°</td>
</tr>
<tr>
<td>225b</td>
<td>pri.store.size</td>
<td>ä¸»åˆ†ç‰‡å ç©ºé—´å¤§å°</td>
</tr>
</tbody>
</table>
<h2 id="2ã€æ–‡æ¡£æ“ä½œ">2ã€æ–‡æ¡£æ“ä½œ</h2>
<blockquote>
<p>æ–‡æ¡£æ˜¯ ES è½¯ä»¶æœç´¢æ•°æ®çš„æœ€å°å•ä½, ä¸ä¾èµ–é¢„å…ˆå®šä¹‰çš„æ¨¡å¼ï¼Œæ‰€ä»¥å¯ä»¥å°†æ–‡æ¡£ç±»æ¯”ä¸ºè¡¨çš„ä¸€è¡ŒJSONç±»å‹çš„æ•°æ®ã€‚æˆ‘ä»¬çŸ¥é“å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œè¦æå‰å®šä¹‰å­—æ®µæ‰èƒ½ä½¿ç”¨ï¼Œåœ¨Elasticsearch ä¸­ï¼Œå¯¹äºå­—æ®µæ˜¯éå¸¸çµæ´»çš„ï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥è¯¥å­—æ®µï¼Œæˆ–è€…åŠ¨æ€çš„æ·»åŠ ä¸€ä¸ªæ–°çš„å­—æ®µã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ–‡æ¡£</span></span><br><span class="line">PUT test_doc</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­¤å¤„å› ä¸ºæ²¡æœ‰æŒ‡å®šæ•°æ®å”¯ä¸€æ€§æ ‡è¯†ï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨PUT è¯·æ±‚ï¼Œåªèƒ½ä½¿ç”¨POST è¯·æ±‚ï¼Œä¸”å¯¹æ•°æ®ä¼šç”Ÿæˆéšæœºçš„å”¯ä¸€æ€§æ ‡è¯†ã€‚å¦åˆ™ä¼šè¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">PUT test_doc/_doc/1001</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"id"</span>:1001,</span><br><span class="line">  <span class="string">"name"</span>:<span class="string">"shawn"</span>,</span><br><span class="line">  <span class="string">"age"</span>:18</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># ç¬¬äºŒç§æ–¹æ³•</span></span><br><span class="line">POST test_doc/_doc</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"id"</span>:1001,</span><br><span class="line">  <span class="string">"name"</span>:<span class="string">"shawn1"</span>,</span><br><span class="line">  <span class="string">"age"</span>:25</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœåœ¨åˆ›å»ºæ•°æ®æ—¶ï¼ŒæŒ‡å®šå”¯ä¸€æ€§æ ‡è¯†ï¼Œé‚£ä¹ˆè¯·æ±‚èŒƒå¼ POSTï¼ŒPUT éƒ½å¯ä»¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ–‡æ¡£</span></span><br><span class="line"><span class="comment"># æ ¹æ®å”¯ä¸€æ€§æ ‡è¯†å¯ä»¥æŸ¥è¯¢å¯¹åº”çš„æ–‡æ¡£ï¼Œå¦‚æœæ²¡æœ‰å”¯ä¸€æ ‡è¯†ï¼Œä¼šå¤±è´¥</span></span><br><span class="line">GET test_doc/_doc/1001</span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ–‡æ¡£ä¸­æ‰€æœ‰æ•°æ®</span></span><br><span class="line">GET test_doc/_search</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ–‡æ¡£</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ–‡æ¡£æœ¬è´¨ä¸Šå’Œæ–°å¢æ–‡æ¡£æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœå­˜åœ¨å°±ä¿®æ”¹ï¼Œå¦‚æœä¸å­˜åœ¨å°±æ–°å¢</span></span><br><span class="line">PUT test_doc/_doc/1001</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"id"</span>:10011,</span><br><span class="line">  <span class="string">"name"</span>:<span class="string">"shawn"</span>,</span><br><span class="line">  <span class="string">"age"</span>:18</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># POSTä¹Ÿå¯ä»¥</span></span><br><span class="line">POST test_doc/_doc/jYuBboYBpWpNx-SxIIHr</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"id"</span>:10011,</span><br><span class="line">  <span class="string">"name"</span>:<span class="string">"shawn"</span>,</span><br><span class="line">  <span class="string">"age"</span>:18</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æ–‡æ¡£</span></span><br><span class="line"><span class="comment"># åˆ é™¤ä¸€ä¸ªæ–‡æ¡£ä¸ä¼šç«‹å³ä»ç£ç›˜ä¸Šç§»é™¤ï¼Œå®ƒåªæ˜¯è¢«æ ‡è®°æˆå·²åˆ é™¤ï¼ˆé€»è¾‘åˆ é™¤ï¼‰</span></span><br><span class="line"><span class="comment"># ä¸å†™ä¸»é”®æ ‡è¯†ä¼šæŠ¥é”™</span></span><br><span class="line">DELETE test_doc/_doc/1002</span><br></pre></td></tr></table></figure>
<h2 id="3ã€æœç´¢">3ã€æœç´¢</h2>
<h3 id="3-1-æ•°æ®æœç´¢">3.1 æ•°æ®æœç´¢</h3>
<p>é¦–å…ˆè¿›è¡Œæ•°æ®å‡†å¤‡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">PUT test_query</span><br><span class="line"></span><br><span class="line">PUT test_query/_bulk</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"test_query"</span>,<span class="string">"_id"</span>:<span class="string">"1001"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"id"</span>:<span class="string">"1001"</span>, <span class="string">"name"</span>:<span class="string">"zhang san"</span>,<span class="string">"age"</span>:30&#125;</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"test_query"</span>,<span class="string">"_id"</span>:<span class="string">"1002"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"id"</span>:<span class="string">"1002"</span>, <span class="string">"name"</span>:<span class="string">"li si"</span>,<span class="string">"age"</span>:40&#125;</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"test_query"</span>,<span class="string">"_id"</span>:<span class="string">"1003"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"id"</span>:<span class="string">"1003"</span>, <span class="string">"name"</span>:<span class="string">"wang wu"</span>,<span class="string">"age"</span>:50&#125;</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"test_query"</span>,<span class="string">"_id"</span>:<span class="string">"1004"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"id"</span>:<span class="string">"1004"</span>, <span class="string">"name"</span>:<span class="string">"zhangsan"</span>,<span class="string">"age"</span>:30&#125;</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"test_query"</span>,<span class="string">"_id"</span>:<span class="string">"1005"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"id"</span>:<span class="string">"1005"</span>, <span class="string">"name"</span>:<span class="string">"li_si"</span>,<span class="string">"age"</span>:40&#125;</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"test_query"</span>,<span class="string">"_id"</span>:<span class="string">"1006"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"id"</span>:<span class="string">"1006"</span>, <span class="string">"name"</span>:<span class="string">"wang_wu"</span>,<span class="string">"age"</span>:50&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ===============================================</span></span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line">GET test_query/_search</span><br><span class="line">GET test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"match_all"</span>: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># Matchæ˜¯åˆ†è¯æŸ¥æ¹–ESä¼šå°†æ•°æ®åˆ†è¯ï¼ˆå…³é”®è¯ï¼‰ä¿å­˜</span></span><br><span class="line">GET test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"match"</span>: &#123;</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"zhang li"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®Œæ•´å…³é”®è¯åŒ¹é…ï¼Œå‘ç°æ²¡æœ‰æŸ¥åˆ°</span></span><br><span class="line"><span class="comment"># å› ä¸ºæŒ‰åˆ†è¯ä¿å­˜äº†ï¼Œå¹¶æ²¡æœ‰å®Œæ•´è¯è¯­çš„ä¿å­˜ä¿¡æ¯</span></span><br><span class="line">GET test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"term"</span>: &#123;</span><br><span class="line">      <span class="string">"name"</span>: &#123;</span><br><span class="line">        <span class="string">"value"</span>: <span class="string">"zhang san"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œé™åˆ¶</span></span><br><span class="line">GET test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_source"</span>: [<span class="string">"name"</span>,<span class="string">"age"</span>], </span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"match"</span>: &#123;</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"zhang li"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»„åˆæŸ¥è¯¢</span></span><br><span class="line">GET test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"bool"</span>: &#123;</span><br><span class="line">      <span class="string">"should"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"match"</span>: &#123;</span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"zhang li"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"match"</span>: &#123;</span><br><span class="line">            <span class="string">"age"</span>: <span class="string">"40"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’åºæŸ¥è¯¢</span></span><br><span class="line">GET test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"match"</span>: &#123;</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"zhang li"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"sort"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"age"</span>: &#123;</span><br><span class="line">        <span class="string">"order"</span>: <span class="string">"desc"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">GET test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"match_all"</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"from"</span>: 0,</span><br><span class="line">  <span class="string">"size"</span>: 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-èšåˆæœç´¢">3.2 èšåˆæœç´¢</h3>
<blockquote>
<p>èšåˆå…è®¸ä½¿ç”¨è€…å¯¹ es æ–‡æ¡£è¿›è¡Œç»Ÿè®¡åˆ†æï¼Œç±»ä¼¼ä¸å…³ç³»å‹æ•°æ®åº“ä¸­çš„ group byï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„èšåˆï¼Œä¾‹å¦‚å–æœ€å¤§å€¼ã€å¹³å‡å€¼ç­‰ç­‰</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ†ç»„æ“ä½œ</span></span><br><span class="line">get test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"aggs"</span>:&#123;</span><br><span class="line">    <span class="string">"ageGroup"</span>:&#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"age"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"size"</span>:0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†ç»„å’Œèšåˆ(æ±‚å’Œ)</span></span><br><span class="line">get test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"aggs"</span>:&#123;</span><br><span class="line">    <span class="string">"ageGroup"</span>:&#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"age"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"ageSum"</span>: &#123;</span><br><span class="line">          <span class="string">"sum"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"age"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"size"</span>:0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ±‚å¹´é¾„å¹³å‡å€¼</span></span><br><span class="line">get test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"aggs"</span>:&#123;</span><br><span class="line">    <span class="string">"ageGroup"</span>:&#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"age"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"aveAge"</span>: &#123;</span><br><span class="line">          <span class="string">"avg"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"age"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"size"</span>:0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å‰å‡ åtopN</span></span><br><span class="line">get test_query/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"aggs"</span>:&#123;</span><br><span class="line">    <span class="string">"top3"</span>:&#123;</span><br><span class="line">     <span class="string">"top_hits"</span>: &#123;</span><br><span class="line">       <span class="string">"sort"</span>: [&#123;</span><br><span class="line">         <span class="string">"age"</span>: &#123;</span><br><span class="line">           <span class="string">"order"</span>: <span class="string">"desc"</span></span><br><span class="line">         &#125;</span><br><span class="line">       &#125;], </span><br><span class="line">       <span class="string">"size"</span>: 3</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"size"</span>:0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4ã€ç´¢å¼•æ¨¡æ¿">4ã€ç´¢å¼•æ¨¡æ¿</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨¡æ¿åç§°å°å†™</span></span><br><span class="line">PUT _template/mytemplate</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"index_patterns"</span> :[</span><br><span class="line">    <span class="string">"my*"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"index"</span>:&#123;</span><br><span class="line">        <span class="string">"number_of_shards"</span>:<span class="string">"2"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"mappings"</span>: &#123;</span><br><span class="line">      <span class="string">"properties"</span>: &#123;</span><br><span class="line">        <span class="string">"now"</span>:&#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"date"</span>,</span><br><span class="line">          <span class="string">"format"</span>: <span class="string">"yyyy/MM/dd"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># ç”¨æ³•myå¼€å¤´çš„åº”ç”¨</span></span><br><span class="line">GET _template/mytemplate</span><br><span class="line">PUT my_test_temp</span><br><span class="line">GET my_test_temp</span><br><span class="line"><span class="comment"># åˆ é™¤</span></span><br><span class="line">DELETE _template/mytemplate</span><br></pre></td></tr></table></figure>
<h2 id="5ã€ä¸­æ–‡åˆ†è¯">5ã€ä¸­æ–‡åˆ†è¯</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æˆ‘ä»¬åœ¨ä½¿ç”¨ Elasticsearch å®˜æ–¹é»˜è®¤çš„åˆ†è¯æ’ä»¶æ—¶ä¼šå‘ç°ï¼Œå…¶å¯¹ä¸­æ–‡çš„åˆ†è¯æ•ˆæœä¸ä½³ï¼Œç»å¸¸åˆ†è¯åå¾—æ•ˆæœä¸æ˜¯æˆ‘ä»¬æƒ³è¦å¾—</span></span><br><span class="line">GET _analyze</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"analyzer"</span>: <span class="string">"chinese"</span>, </span><br><span class="line">  <span class="string">"text"</span>: [<span class="string">"æˆ‘æ˜¯ä¸€ä¸ªå­¦ç”Ÿ"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†èƒ½å¤Ÿæ›´å¥½åœ°å¯¹ä¸­æ–‡è¿›è¡Œæœç´¢å’ŒæŸ¥è¯¢ï¼Œå°±éœ€è¦åœ¨Elasticsearch ä¸­é›†æˆå¥½çš„åˆ†è¯å™¨æ’ä»¶ï¼Œ è€Œ IK åˆ†è¯å™¨å°±æ˜¯ç”¨äºå¯¹ä¸­æ–‡æä¾›æ”¯æŒå¾—æ’ä»¶ï¼Œä¸‹è½½åœ°å€ï¼š<a href="https://github.com/medcl/elasticsearch-analysis-ik/releases" target="_blank" rel="noopener" title="https://github.com/medcl/elasticsearch-analysis-ik/releases">https://github.com/medcl/elasticsearch-analysis-ik/releases</a></p>
<p>æ³¨æ„å’ŒESç‰ˆæœ¬åŒ¹é…ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰æ‹© 8.1.0ï¼Œåœ¨å®‰è£…ç›®å½•å¾—plugins ç›®ä¸­ï¼Œå°†ä¸‹è½½å¾—å‹ç¼©åŒ…ç›´æ¥è§£å‹ç¼©å¾—é‡Œé¢å³å¯ï¼Œæœ€åé‡å¯ **Elasticsearch **æœåŠ¡</p>
<h3 id="5-1-ä½¿ç”¨IKåˆ†è¯å™¨">5.1 ä½¿ç”¨IKåˆ†è¯å™¨</h3>
<p>IK åˆ†è¯å™¨æä¾›äº†ä¸¤ä¸ªåˆ†è¯ç®—æ³•ï¼š</p>
<ul>
<li>ik_smart: æœ€å°‘åˆ‡åˆ†</li>
<li>Ik_max_word:æœ€ç»†ç²’åº¦åˆ’åˆ†</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET _analyze</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"analyzer"</span>: <span class="string">"ik_smart"</span>,</span><br><span class="line">  <span class="string">"text"</span>: [<span class="string">"æˆ‘æ˜¯ä¸€ä¸ªä¸‰å¥½å­¦ç”Ÿ"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-è‡ªå®šä¹‰åˆ†è¯æ•ˆæœ">5.2 è‡ªå®šä¹‰åˆ†è¯æ•ˆæœ</h3>
<p>æˆ‘ä»¬åœ¨ä½¿ç”¨ IK åˆ†è¯å™¨æ—¶ä¼šå‘ç°å…¶å®æœ‰æ—¶å€™åˆ†è¯çš„æ•ˆæœä¹Ÿå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸå¾…çš„,æœ‰æ—¶ä¸€äº›ç‰¹æ®Šå¾—æœ¯è¯­ä¼šè¢«æ‹†å¼€ï¼Œæ¯”å¦‚ä¸Šé¢å¾—ä¸­æ–‡â€œä¸€ä¸ªå­¦ç”Ÿâ€å¸Œæœ›ä¸è¦æ‹†å¼€ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿå…¶å® IK æ’ä»¶ç»™æˆ‘ä»¬æä¾›äº†è‡ªå®šä¹‰åˆ†è¯å­—å…¸ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ·»åŠ è‡ªå·±æƒ³è¦ä¿ç•™å¾—å­—äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆè¿›å…¥æ’ä»¶configï¼Œåˆ›å»ºtest.cfgï¼Œå°†ä¸€å¥è¯æ”¾è¿›å»</span></span><br><span class="line"><span class="comment"># æ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼šIKAnalyzer.cfg.xml</span></span><br><span class="line"><span class="comment"># ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•å­—å…¸</span></span><br><span class="line">&lt;entry key=<span class="string">"ext_dict"</span>&gt;test.dic&lt;/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶åé‡å¯è¿›è¡Œæµ‹è¯•</span></span><br></pre></td></tr></table></figure>
<h2 id="6ã€æ–‡æ¡£å¾—åˆ†">6ã€æ–‡æ¡£å¾—åˆ†</h2>
<h3 id="6-1-æ‰“åˆ†æœºåˆ¶ä¸¾ä¾‹">6.1 æ‰“åˆ†æœºåˆ¶ä¸¾ä¾‹</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">PUT test_score</span><br><span class="line"></span><br><span class="line">PUT test_score/_doc/1001</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"text"</span>:<span class="string">"zhang san ni hao"</span></span><br><span class="line">&#125;</span><br><span class="line">PUT test_score/_doc/1002</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"text"</span>:<span class="string">"zhang si"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># å¯ä»¥å‘ç°å¾—åˆ†æ˜¯ä¸ä¸€æ ·çš„ï¼ŒåŒ¹é…åº¦</span></span><br><span class="line">GET test_score/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"match"</span>: &#123;</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"zhang"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># è¯¦ç»†ä¿¡æ¯æŸ¥çœ‹</span></span><br><span class="line">GET test_score/_search?explain=<span class="literal">true</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"match"</span>: &#123;</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"zhang"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-æ‰“åˆ†æœºåˆ¶è¯¦è§£">6.2 æ‰“åˆ†æœºåˆ¶è¯¦è§£</h3>
<p>Lucene å’ŒES çš„å¾—åˆ†æœºåˆ¶æ˜¯ä¸€ä¸ªåŸºäºè¯é¢‘å’Œé€†æ–‡æ¡£è¯é¢‘çš„å…¬å¼ï¼Œç®€ç§°ä¸º TF-IDF å…¬å¼(å…·ä½“å¯ä»¥è‡ªè¡ŒæŸ¥é˜…èµ„æ–™)</p>
<ul>
<li>TF (è¯é¢‘)</li>
</ul>
<p>Term Frequency : æœç´¢æ–‡æœ¬ä¸­çš„å„ä¸ªè¯æ¡ï¼ˆtermï¼‰åœ¨æŸ¥è¯¢æ–‡æœ¬ä¸­å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œ å‡ºç°æ¬¡æ•°è¶Šå¤šï¼Œå°±è¶Šç›¸å…³ï¼Œå¾—åˆ†ä¼šæ¯”è¾ƒé«˜</p>
<ul>
<li>IDF(é€†æ–‡æ¡£é¢‘ç‡)</li>
</ul>
<p>Inverse Document Frequency : æœç´¢æ–‡æœ¬ä¸­çš„å„ä¸ªè¯æ¡ï¼ˆtermï¼‰åœ¨æ•´ä¸ªç´¢å¼•çš„æ‰€æœ‰æ–‡æ¡£ä¸­å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œå‡ºç°çš„æ¬¡æ•°è¶Šå¤šï¼Œè¯´æ˜è¶Šä¸é‡è¦ï¼Œä¹Ÿå°±è¶Šä¸ç›¸å…³ï¼Œå¾—åˆ†å°±æ¯”è¾ƒä½</p>
<h3 id="6-3-ä¿®æ”¹æŸ¥è¯¢é¡ºåº">6.3 ä¿®æ”¹æŸ¥è¯¢é¡ºåº</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯ä»¥é€šè¿‡ä¿®æ”¹æƒé‡æ¥è·å¾—ä¸åŒçš„score</span></span><br><span class="line">GET /testscore/_search?explain=<span class="literal">true</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"bool"</span>: &#123;</span><br><span class="line">      <span class="string">"should"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"match"</span>: &#123;</span><br><span class="line">            <span class="string">"title"</span>: &#123;</span><br><span class="line">              <span class="string">"query"</span>: <span class="string">"Hadoop"</span>,<span class="string">"boost"</span>: 1</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å››ã€Elasticsearchè¿›é˜¶åŠŸèƒ½</h1>
<h2 id="1ã€Java-API-æ“ä½œ">1ã€Java API æ“ä½œ</h2>
<p>éšç€Elasticsearch 8.x æ–°ç‰ˆæœ¬çš„åˆ°æ¥ï¼Œ Type çš„æ¦‚å¿µè¢«åºŸé™¤ï¼Œä¸ºäº†é€‚åº”è¿™ç§æ•°æ®ç»“æ„çš„æ”¹å˜ï¼Œ Elasticsearch å®˜æ–¹ä» 7.15 ç‰ˆæœ¬å¼€å§‹å»ºè®®ä½¿ç”¨æ–°çš„ Elasticsearch Java Client</p>
<h3 id="1-1-å¢åŠ ä¾èµ–å…³ç³»">1.1 å¢åŠ ä¾èµ–å…³ç³»</h3>
<p>é¦–å…ˆå¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">elastic.version</span>&gt;</span>8.1.0<span class="tag">&lt;/<span class="name">elastic.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.plugin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>x-pack-sql-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>co.elastic.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;elastic.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.json-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-è·å–å®¢æˆ·ç«¯å¯¹è±¡">1.2 è·å–å®¢æˆ·ç«¯å¯¹è±¡</h3>
<p>å°±åƒè¿æ¥MySQL æ•°æ®åº“ä¸€æ ·ï¼Œ Java é€šè¿‡å®¢æˆ·ç«¯æ“ä½œ Elasticsearch ä¹Ÿè¦è·å–åˆ°è¿æ¥åæ‰å¯ä»¥ã€‚å’±ä»¬ç°åœ¨ä½¿ç”¨çš„åŸºäº https å®‰å…¨çš„ Elasticsearch æœåŠ¡ï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†ä¹‹å‰çš„è¯ä¹¦è¿›è¡Œä¸€ä¸ªè½¬æ¢</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/soft/elasticsearch8/config/certs/</span><br><span class="line">ls</span><br><span class="line"><span class="comment"># ç”Ÿæˆè¯ä¹¦</span></span><br><span class="line">openssl pkcs12 -<span class="keyword">in</span> elastic-stack-ca.p12 -clcerts -nokeys -out java-ca.crt</span><br></pre></td></tr></table></figure>
<p>åœ¨æ ¹ç›®å½•åˆ›å»ºcertsæ–‡ä»¶å¤¹ï¼Œå°†è¯ä¹¦æ”¾å…¥certsä¸­ï¼Œé…ç½®è¯ä¹¦åï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨https æ–¹å¼è·å–è¿æ¥å¯¹è±¡äº†ã€‚javaåˆ›å»ºç±»ï¼Œå¦‚æœå¯åŠ¨ä¸æŠ¥é”™å³æˆåŠŸ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EsClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        initEsConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initEsConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å®¢æˆ·ç«¯å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">final</span> CredentialsProvider credentialsProvider = <span class="keyword">new</span> BasicCredentialsProvider();</span><br><span class="line">        <span class="comment">// æ³¨æ„è¿™é‡Œæ”¹æˆè‡ªå·±çš„è´¦å·å¯†ç </span></span><br><span class="line">        credentialsProvider.setCredentials(AuthScope.ANY,</span><br><span class="line">                <span class="keyword">new</span> UsernamePasswordCredentials(<span class="string">"elastic"</span>, <span class="string">"XV=4ZU5OzQEk46Z1T_Zl"</span>));</span><br><span class="line"></span><br><span class="line">        Path caCertificatePath = Paths.get(<span class="string">"es/certs/java-ca.crt"</span>);</span><br><span class="line">        CertificateFactory factory =</span><br><span class="line">                CertificateFactory.getInstance(<span class="string">"X.509"</span>);</span><br><span class="line">        Certificate trustedCa;</span><br><span class="line">        <span class="keyword">try</span> (InputStream is = Files.newInputStream(caCertificatePath)) &#123;</span><br><span class="line">            trustedCa = factory.generateCertificate(is);</span><br><span class="line">        &#125;</span><br><span class="line">        KeyStore trustStore = KeyStore.getInstance(<span class="string">"pkcs12"</span>);</span><br><span class="line">        trustStore.load(<span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">        trustStore.setCertificateEntry(<span class="string">"ca"</span>, trustedCa);</span><br><span class="line">        SSLContextBuilder sslContextBuilder = SSLContexts.custom()</span><br><span class="line">                .loadTrustMaterial(trustStore, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">final</span> SSLContext sslContext = sslContextBuilder.build();</span><br><span class="line">        <span class="comment">// ä¸»æœºåæ”¹æˆè‡ªå·±çš„</span></span><br><span class="line">        RestClientBuilder builder = RestClient.builder(</span><br><span class="line">                        <span class="keyword">new</span> HttpHost(<span class="string">"master"</span>, <span class="number">9200</span>, <span class="string">"https"</span>))</span><br><span class="line">                .setHttpClientConfigCallback(<span class="keyword">new</span> RestClientBuilder.HttpClientConfigCallback() &#123;</span><br><span class="line">                 <span class="meta">@Override</span></span><br><span class="line">                 <span class="function"><span class="keyword">public</span> HttpAsyncClientBuilder <span class="title">customizeHttpClient</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">                         HttpAsyncClientBuilder httpClientBuilder)</span> </span>&#123;</span><br><span class="line">                     <span class="keyword">return</span> httpClientBuilder.setSSLContext(sslContext)</span><br><span class="line">                             .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)</span><br><span class="line">                             .setDefaultCredentialsProvider(credentialsProvider);</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;);</span><br><span class="line">        RestClient restClient = builder.build();</span><br><span class="line">        ElasticsearchTransport transport = <span class="keyword">new</span> RestClientTransport(</span><br><span class="line">                restClient, <span class="keyword">new</span> JacksonJsonpMapper());</span><br><span class="line">        <span class="comment">// åŒæ­¥å®¢æˆ·ç«¯å¯¹è±¡</span></span><br><span class="line">        ElasticsearchClient client = <span class="keyword">new</span> ElasticsearchClient(transport);</span><br><span class="line">        <span class="comment">// å¼‚æ­¥</span></span><br><span class="line"><span class="comment">//        ElasticsearchAsyncClient asyncClient = new ElasticsearchAsyncClient(transport);</span></span><br><span class="line">        transport.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯springï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨http</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ElasticSearchConfig</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//æ³¨å…¥IOCå®¹å™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ElasticsearchClient <span class="title">elasticsearchClient</span><span class="params">()</span></span>&#123;</span><br><span class="line">        RestClient client = RestClient.builder(<span class="keyword">new</span> HttpHost(<span class="string">"localhost"</span>, <span class="number">9200</span>,<span class="string">"http"</span>)).build();</span><br><span class="line">        ElasticsearchTransport transport = <span class="keyword">new</span> RestClientTransport(client,<span class="keyword">new</span> JacksonJsonpMapper());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ElasticsearchClient(transport);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-3-ç´¢å¼•æ“ä½œ">1.3 ç´¢å¼•æ“ä½œ</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EsClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ElasticsearchClient client;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ElasticsearchAsyncClient asyncClient;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ElasticsearchTransport transport;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        initEsConnection();</span><br><span class="line">        operationIndex();</span><br><span class="line">        transport.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">operationIndex</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºç´¢å¼•</span></span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ„å»ºå™¨æ¨¡å¼åˆ›å»ºï¼ŒESAPIéƒ½æ˜¯è¿™æ ·</span></span><br><span class="line">        CreateIndexRequest request = <span class="keyword">new</span> CreateIndexRequest.Builder().index(<span class="string">"myindex"</span>).build();</span><br><span class="line">        <span class="keyword">final</span> CreateIndexResponse createIndexResponse = client.indices().create(request);</span><br><span class="line">        System.out.println(<span class="string">" åˆ›å»ºç´¢å¼•æˆåŠŸï¼š ï¼š"</span> + createIndexResponse.index());</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢ç´¢å¼•</span></span><br><span class="line">        GetIndexRequest getIndexRequest = <span class="keyword">new</span> GetIndexRequest.Builder().index(<span class="string">"myindex"</span>).build();</span><br><span class="line">        <span class="keyword">final</span> GetIndexResponse getIndexResponse = client.indices().get(getIndexRequest);</span><br><span class="line">        System.out.println( <span class="string">"ç´¢å¼•æŸ¥è¯¢æˆåŠŸï¼š ï¼š"</span> + getIndexResponse.result());</span><br><span class="line">        <span class="comment">// åˆ é™¤ç´¢å¼•</span></span><br><span class="line">        DeleteIndexRequest deleteIndexRequest = <span class="keyword">new</span> DeleteIndexRequest.Builder().index(<span class="string">"myindex"</span>).build();</span><br><span class="line">        <span class="keyword">final</span> DeleteIndexResponse delete = client.indices().delete(deleteIndexRequest);</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">boolean</span> acknowledged = delete.acknowledged();</span><br><span class="line">        System.out.println(<span class="string">" åˆ é™¤ç´¢å¼•æˆåŠŸï¼š ï¼š"</span> + acknowledged);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initEsConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å®¢æˆ·ç«¯å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">final</span> CredentialsProvider credentialsProvider = <span class="keyword">new</span> BasicCredentialsProvider();</span><br><span class="line">        credentialsProvider.setCredentials(AuthScope.ANY,</span><br><span class="line">                <span class="keyword">new</span> UsernamePasswordCredentials(<span class="string">"elastic"</span>, <span class="string">"XV=4ZU5OzQEk46Z1T_Zl"</span>));</span><br><span class="line"></span><br><span class="line">        Path caCertificatePath = Paths.get(<span class="string">"es/certs/java-ca.crt"</span>);</span><br><span class="line">        CertificateFactory factory =</span><br><span class="line">                CertificateFactory.getInstance(<span class="string">"X.509"</span>);</span><br><span class="line">        Certificate trustedCa;</span><br><span class="line">        <span class="keyword">try</span> (InputStream is = Files.newInputStream(caCertificatePath)) &#123;</span><br><span class="line">            trustedCa = factory.generateCertificate(is);</span><br><span class="line">        &#125;</span><br><span class="line">        KeyStore trustStore = KeyStore.getInstance(<span class="string">"pkcs12"</span>);</span><br><span class="line">        trustStore.load(<span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">        trustStore.setCertificateEntry(<span class="string">"ca"</span>, trustedCa);</span><br><span class="line">        SSLContextBuilder sslContextBuilder = SSLContexts.custom()</span><br><span class="line">                .loadTrustMaterial(trustStore, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">final</span> SSLContext sslContext = sslContextBuilder.build();</span><br><span class="line">        RestClientBuilder builder = RestClient.builder(</span><br><span class="line">                        <span class="keyword">new</span> HttpHost(<span class="string">"master"</span>, <span class="number">9200</span>, <span class="string">"https"</span>))</span><br><span class="line">                .setHttpClientConfigCallback(<span class="keyword">new</span> RestClientBuilder.HttpClientConfigCallback() &#123;</span><br><span class="line">                 <span class="meta">@Override</span></span><br><span class="line">                 <span class="function"><span class="keyword">public</span> HttpAsyncClientBuilder <span class="title">customizeHttpClient</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">                         HttpAsyncClientBuilder httpClientBuilder)</span> </span>&#123;</span><br><span class="line">                     <span class="keyword">return</span> httpClientBuilder.setSSLContext(sslContext)</span><br><span class="line">                             .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)</span><br><span class="line">                             .setDefaultCredentialsProvider(credentialsProvider);</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;);</span><br><span class="line">        RestClient restClient = builder.build();</span><br><span class="line">        transport = <span class="keyword">new</span> RestClientTransport(</span><br><span class="line">                restClient, <span class="keyword">new</span> JacksonJsonpMapper());</span><br><span class="line">        <span class="comment">// åŒæ­¥å®¢æˆ·ç«¯å¯¹è±¡</span></span><br><span class="line">        client = <span class="keyword">new</span> ElasticsearchClient(transport);</span><br><span class="line">        <span class="comment">// å¼‚æ­¥</span></span><br><span class="line">        asyncClient = <span class="keyword">new</span> ElasticsearchAsyncClient(transport);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Lambdaæ“ä½œå‡½æ•°å¦‚ä¸‹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">operationIndexLambda</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºç´¢å¼•</span></span><br><span class="line">        <span class="keyword">final</span> Boolean acknowledged = client.indices().create(p -&gt; p.index(<span class="string">"myindex1"</span>)).acknowledged();</span><br><span class="line">        System.out.println(<span class="string">"åˆ›å»ºç´¢å¼•æˆåŠŸ"</span>);</span><br><span class="line">        <span class="comment">// è·å–ç´¢å¼•</span></span><br><span class="line">        System.out.println(client.indices().get(req -&gt; req.index(<span class="string">"myindex1"</span>)));</span><br><span class="line">        <span class="comment">// åˆ é™¤ç´¢å¼•</span></span><br><span class="line">        client.indices().delete(reqbuilder -&gt; reqbuilder.index(<span class="string">"myindex1"</span>)).acknowledged();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-4-æ–‡æ¡£æ“ä½œ">1.4 æ–‡æ¡£æ“ä½œ</h3>
<p>Usersè‡ªè¡Œåˆ›å»º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">operationDocument</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Users user = <span class="keyword">new</span> Users(<span class="string">"shawn"</span>, <span class="number">18</span>);</span><br><span class="line">    <span class="comment">// åˆ›å»ºæ–‡æ¡£</span></span><br><span class="line">    IndexRequest indexRequest = <span class="keyword">new</span> IndexRequest.Builder&lt;Users&gt;()</span><br><span class="line">            .index(<span class="string">"myindex"</span>).id(<span class="string">"1001"</span>).document(user).build();</span><br><span class="line">    <span class="keyword">final</span> IndexResponse index = client.index(indexRequest);</span><br><span class="line">    System.out.println(<span class="string">" æ–‡æ¡£æ“ä½œç»“æœ :"</span> + index);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¹é‡åˆ›å»ºæ–‡æ¡£</span></span><br><span class="line">    <span class="keyword">final</span> List&lt;BulkOperation&gt; operations = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i= <span class="number">1</span>;i &lt;= <span class="number">5</span>; i++ ) &#123;</span><br><span class="line">        CreateOperation&lt;Users&gt; otObj = <span class="keyword">new</span> CreateOperation.Builder&lt;Users&gt;()</span><br><span class="line">                .index(<span class="string">"myindex"</span>)</span><br><span class="line">                .id(<span class="string">"200"</span> + i)</span><br><span class="line">                .document(<span class="keyword">new</span> Users(<span class="string">"shawn"</span> + i, <span class="number">18</span> + i))</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> BulkOperation bulk = <span class="keyword">new</span></span><br><span class="line">                BulkOperation.Builder().create(otObj).build();</span><br><span class="line">        operations.add(bulk);</span><br><span class="line">    &#125;</span><br><span class="line">    BulkRequest bulkRequest = <span class="keyword">new</span> BulkRequest.Builder().operations(operations).build();</span><br><span class="line">    <span class="keyword">final</span> BulkResponse bulkResponse = client.bulk(bulkRequest);</span><br><span class="line">    System.out.println(<span class="string">" æ•°æ®æ“ä½œæˆåŠŸï¼š ï¼š"</span>+ bulkResponse);</span><br><span class="line">    <span class="comment">// åˆ é™¤æ–‡æ¡£</span></span><br><span class="line">    DeleteRequest deleteRequest = <span class="keyword">new</span> DeleteRequest.Builder().index(<span class="string">"myindex"</span>).id(<span class="string">"1001"</span>).build();</span><br><span class="line">    client.delete(deleteRequest);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">operationDocumentLambda</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Users user = <span class="keyword">new</span> Users(<span class="string">"shawn"</span>, <span class="number">18</span>);</span><br><span class="line">    List&lt;Users&gt; userList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    userList.add(user);</span><br><span class="line">    <span class="comment">// åˆ›å»ºæ–‡æ¡£</span></span><br><span class="line">    System.out.println(</span><br><span class="line">            client.index(req-&gt;</span><br><span class="line">                    req.index(<span class="string">"myindex"</span>)</span><br><span class="line">                            .id(<span class="string">"1001"</span>)</span><br><span class="line">                            .document(user)).result());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¹é‡åˆ›å»ºæ–‡æ¡£</span></span><br><span class="line">    client.bulk(req -&gt;&#123;</span><br><span class="line">            userList.forEach(</span><br><span class="line">                    u -&gt; &#123;</span><br><span class="line">                        req.operations(</span><br><span class="line">                                b -&gt; &#123;</span><br><span class="line">                                    b.create(d -&gt;</span><br><span class="line">                                            d.id(u.getAge() + <span class="string">"200"</span>)</span><br><span class="line">                                                    .index(<span class="string">"myindex"</span>)</span><br><span class="line">                                                    .document(u));</span><br><span class="line">                                    <span class="keyword">return</span> b;</span><br><span class="line">                                &#125;</span><br><span class="line">                        );</span><br><span class="line">                    &#125;</span><br><span class="line">            );</span><br><span class="line">        <span class="keyword">return</span> req;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤æ–‡æ¡£</span></span><br><span class="line">    client.delete(req -&gt; req.index(<span class="string">"myindex"</span>).id(<span class="string">"1001"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-5-æ–‡æ¡£æŸ¥è¯¢">1.5 æ–‡æ¡£æŸ¥è¯¢</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">operationSearch</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> SearchRequest.Builder searchRequestBuilder = <span class="keyword">new</span></span><br><span class="line">            SearchRequest.Builder().index(<span class="string">"myindex1"</span>);</span><br><span class="line">    MatchQuery matchQuery = <span class="keyword">new</span></span><br><span class="line">            MatchQuery.Builder().field(<span class="string">"city"</span>).query(FieldValue.of(<span class="string">"beijing"</span>)).build();</span><br><span class="line">    Query query = <span class="keyword">new</span> Query.Builder().match(matchQuery).build();</span><br><span class="line">    searchRequestBuilder.query(query);</span><br><span class="line">    SearchRequest searchRequest = searchRequestBuilder.build();</span><br><span class="line">    <span class="keyword">final</span> SearchResponse&lt;Object&gt; search = client.search(searchRequest, Object<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    System.out.println(search);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">operationSearchLambda</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    client.search(</span><br><span class="line">            req -&gt; &#123;</span><br><span class="line">                req.query(</span><br><span class="line">                        q -&gt;</span><br><span class="line">                            q.match(</span><br><span class="line">                                    m -&gt; m.field(<span class="string">"city"</span>).query(<span class="string">"beijing"</span>)</span><br><span class="line">                            ));</span><br><span class="line">                <span class="keyword">return</span> req;</span><br><span class="line">            &#125;,Object<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-6-å®¢æˆ·ç«¯å¼‚æ­¥æ“ä½œ">1.6 å®¢æˆ·ç«¯å¼‚æ­¥æ“ä½œ</h3>
<p>ES Java API æä¾›äº†åŒæ­¥å’Œå¼‚æ­¥çš„ä¸¤ç§å®¢æˆ·ç«¯å¤„ç†ã€‚ä¹‹å‰æ¼”ç¤ºçš„éƒ½æ˜¯åŒæ­¥å¤„ç†ï¼Œå¼‚æ­¥å®¢<br>
æˆ·ç«¯çš„å¤„ç†å’ŒåŒæ­¥å®¢æˆ·ç«¯å¤„ç†çš„ API åŸºæœ¬åŸç†ç›¸åŒï¼Œä¸åŒçš„æ˜¯éœ€è¦å¼‚æ­¥å¯¹è¿”å›ç»“æœè¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">operationAsync</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      <span class="comment">// åˆ›å»ºç´¢å¼•</span></span><br><span class="line">      asyncClient.indices().create(</span><br><span class="line">              req -&gt; req.index(<span class="string">"newindex"</span>)</span><br><span class="line">      ).thenApply(</span><br><span class="line">              CreateIndexResponse::acknowledged</span><br><span class="line">      ).whenComplete(</span><br><span class="line">      (resp, error) -&gt; &#123;</span><br><span class="line">          System.out.println(<span class="string">"å›è°ƒå‡½æ•°"</span>);</span><br><span class="line">          <span class="keyword">if</span> (!resp) &#123;</span><br><span class="line">              System.out.println();</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              error.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="2ã€EQLæ“ä½œ">2ã€EQLæ“ä½œ</h2>
<blockquote>
<p>EQL çš„å…¨åæ˜¯ Event Query Language (EQL)ã€‚äº‹ä»¶æŸ¥è¯¢è¯­è¨€ï¼ˆEQLï¼‰æ˜¯ä¸€ç§ç”¨äºåŸºäºäº‹ä»¶çš„æ—¶é—´åºåˆ—æ•°æ®ï¼ˆä¾‹å¦‚æ—¥å¿—ï¼ŒæŒ‡æ ‡å’Œè·Ÿè¸ªï¼‰çš„æŸ¥è¯¢è¯­è¨€ã€‚åœ¨ Elastic Security å¹³å°ä¸Šï¼Œå½“è¾“å…¥æœ‰æ•ˆçš„ EQL æ—¶ï¼ŒæŸ¥è¯¢ä¼šåœ¨æ•°æ®èŠ‚ç‚¹ä¸Šç¼–è¯‘ï¼Œæ‰§è¡ŒæŸ¥è¯¢å¹¶è¿”å›ç»“æœã€‚è¿™ä¸€åˆ‡éƒ½å¿«é€Ÿã€å¹¶è¡Œåœ°å‘ç”Ÿï¼Œè®©ç”¨æˆ·ç«‹å³çœ‹åˆ°ç»“æœã€‚</p>
</blockquote>
<p>EQL çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>EQL ä½¿ä½ å¯ä»¥è¡¨è¾¾äº‹ä»¶ä¹‹é—´çš„å…³ç³»ï¼Œè®¸å¤šæŸ¥è¯¢è¯­è¨€å…è®¸æ‚¨åŒ¹é…å•ä¸ªäº‹ä»¶ã€‚EQL ä½¿ä½ å¯ä»¥åŒ¹é…ä¸åŒäº‹ä»¶ç±»åˆ«å’Œæ—¶é—´è·¨åº¦çš„ä¸€ç³»åˆ—äº‹ä»¶</li>
<li>EQL çš„å­¦ä¹ æ›²çº¿å¾ˆä½ã€‚EQL è¯­æ³•çœ‹èµ·æ¥åƒå…¶ä»–å¸¸è§æŸ¥è¯¢è¯­è¨€ï¼Œä¾‹å¦‚ SQLã€‚ EQL ä½¿ä½ å¯ä»¥ç›´è§‚åœ°ç¼–å†™å’Œè¯»å–æŸ¥è¯¢ï¼Œä»è€Œå¯ä»¥è¿›è¡Œå¿«é€Ÿï¼Œè¿­ä»£çš„æœç´¢</li>
<li>EQL è®¾è®¡ç”¨äºå®‰å…¨ç”¨ä¾‹ã€‚å°½ç®¡ä½ å¯ä»¥å°†å…¶ç”¨äºä»»ä½•åŸºäºäº‹ä»¶çš„æ•°æ®ï¼Œä½†æˆ‘ä»¬åˆ›å»ºäº† EQL æ¥è¿›è¡Œå¨èƒæœå¯»ã€‚ EQLä¸ä»…æ”¯æŒå±å®³æŒ‡æ ‡ï¼ˆIOCï¼‰æœç´¢ï¼Œè€Œä¸”å¯ä»¥æè¿°è¶…å‡ºIOC èŒƒå›´çš„æ´»åŠ¨ã€‚</li>
</ul>
<h3 id="2-1-åŸºç¡€è¯­æ³•">2.1 åŸºç¡€è¯­æ³•</h3>
<p>è¦è¿è¡Œ EQL æœç´¢ï¼Œæœç´¢åˆ°çš„æ•°æ®æµæˆ–ç´¢å¼•å¿…é¡»åŒ…å«æ—¶é—´æˆ³å’Œäº‹ä»¶ç±»åˆ«å­—æ®µã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒEQL ä½¿ç”¨Elastic é€šç”¨æ¨¡å¼ï¼ˆECSï¼‰ä¸­çš„ @timestamp å’Œ event.category å­—æ®µã€‚<code>@timestamp</code> è¡¨ç¤ºæ—¶é—´æˆ³ï¼Œ<code>event.category</code> è¡¨ç¤ºäº‹ä»¶åˆ†ç±»ã€‚å’±ä»¬å‡†å¤‡ä¸€äº›ç®€å•çš„æ•°æ®,ç”¨äºè¡¨ç¤ºç”µå•†ç½‘ç«™é¡µé¢è·³è½¬</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰¹é‡å¢åŠ æ•°æ®</span></span><br><span class="line">PUT /gmall</span><br><span class="line">PUT _bulk</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"gmall"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"@timestamp"</span>:<span class="string">"2022-06-01T12:00:00.00+08:00"</span>,<span class="string">"event"</span>:&#123;<span class="string">"category"</span>:<span class="string">"page"</span>&#125;,<span class="string">"page"</span>:&#123;<span class="string">"session_id"</span>:<span class="string">"42FC7E13-CB3E-5C05-0000-0010A0125101"</span>,<span class="string">"last_page_id"</span>:<span class="string">""</span>,<span class="string">"page_id"</span>:<span class="string">"login"</span>,<span class="string">"user_id"</span>:<span class="string">""</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"gmall"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"@timestamp"</span>:<span class="string">"2022-06-01T12:01:00.00+08:00"</span>,<span class="string">"event"</span>:&#123;<span class="string">"category"</span>:<span class="string">"page"</span>&#125;,<span class="string">"page"</span>:&#123;<span class="string">"session_id"</span>:<span class="string">"42FC7E13-CB3E-5C05-0000-0010A0125101"</span>,<span class="string">"last_page_id"</span>:<span class="string">"login"</span>,<span class="string">"page_id"</span>:<span class="string">"good_list"</span>,<span class="string">"user_id"</span>:<span class="string">"1"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"gmall"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"@timestamp"</span>:<span class="string">"2022-06-01T12:05:00.00+08:00"</span>,<span class="string">"event"</span>:&#123;<span class="string">"category"</span>:<span class="string">"page"</span>&#125;,<span class="string">"page"</span>:&#123;<span class="string">"session_id"</span>:<span class="string">"42FC7E13-CB3E-5C05-0000-0010A0125101"</span>,<span class="string">"last_page_id"</span>:<span class="string">"good_list"</span>,<span class="string">"page_id"</span>:<span class="string">"good_detail"</span>,<span class="string">"user_id"</span>:<span class="string">"1"</span>&#125;&#125;</span><br><span class="line">GET gmall/_search</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®çª—å£æœç´¢</span></span><br><span class="line"><span class="comment"># åœ¨äº‹ä»¶å“åº”è¿‡ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šæ—¶å€™ï¼Œäº†è§£ç‰¹å®šæ—¶é—´å‘ç”Ÿçš„æ‰€æœ‰äº‹ä»¶æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä½¿ç”¨ä¸€ç§åä¸ºany çš„ç‰¹æ®Šäº‹ä»¶ç±»å‹ï¼Œé’ˆå¯¹æ‰€æœ‰äº‹ä»¶è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœæƒ³è¦åŒ¹é…ç‰¹å®šäº‹ä»¶ï¼Œå°±éœ€è¦æŒ‡æ˜äº‹ä»¶åˆ†ç±»åç§°</span></span><br><span class="line">GET /gmall/_eql/search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>:<span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">    any where page.user_id == "</span>1<span class="string">"</span></span><br><span class="line"><span class="string">  "</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„äº‹ä»¶</span></span><br><span class="line">GET /gmall/_eql/search</span><br><span class="line">&#123;<span class="string">"query"</span>:<span class="string">"\n    any where true\n  "</span>,<span class="string">"filter"</span>:&#123;<span class="string">"range"</span>:&#123;<span class="string">"@timestamp"</span>:&#123;<span class="string">"gte"</span>:<span class="string">"1654056000000"</span>,<span class="string">"lt"</span>:<span class="string">"1654056005000"</span>&#125;&#125;&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># äº‹ä»¶åºåˆ—</span></span><br><span class="line">GET /gmall/_eql/search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">sequence by page.session_id</span></span><br><span class="line"><span class="string">[page where page.page_id=="</span>login<span class="string">"]</span></span><br><span class="line"><span class="string">[page where page.page_id=="</span>good_detail<span class="string">"]</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-å®‰å…¨æ£€æµ‹">2.2 å®‰å…¨æ£€æµ‹</h3>
<blockquote>
<p>EQLåœ¨ Elastic Securit ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚ å®é™…åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ EQL è¯­è¨€æ¥è¿›è¡Œæ£€æµ‹å®‰å…¨å¨èƒå’Œå…¶ä»–å¯ç–‘è¡Œä¸º</p>
</blockquote>
<p>ä¾‹å¦‚regsvr32.exe æ˜¯ä¸€ä¸ªå†…ç½®çš„å‘½ä»¤è¡Œå®ç”¨ç¨‹åºï¼Œç”¨äºåœ¨ Windows ä¸­æ³¨å†Œ.dll åº“ã€‚ä½œä¸ºæœ¬æœºå·¥å…·ï¼Œregsvr32.exe å…·æœ‰å—ä¿¡ä»»çš„çŠ¶æ€ï¼Œä»è€Œä½¿å®ƒå¯ä»¥ç»•è¿‡å¤§å¤šæ•°å…è®¸åˆ—è¡¨è½¯ä»¶å’Œè„šæœ¬é˜»æ­¢ç¨‹åºã€‚ æœ‰æƒè®¿é—®ç”¨æˆ·å‘½ä»¤è¡Œçš„æ”»å‡»è€…å¯ä»¥ä½¿ç”¨ regsvr32.exe é€šè¿‡.dll åº“è¿è¡Œæ¶æ„è„šæœ¬ï¼Œå³ä½¿åœ¨å…¶ä»–æƒ…å†µä¸‹ä¹Ÿä¸å…è®¸è¿™äº›è„šæœ¬è¿è¡Œã€‚regsvr32 æ»¥ç”¨çš„ä¸€ç§å¸¸è§å˜ä½“æ˜¯ Squfullydoo æ”»å‡»ã€‚åœ¨ Squfullydoo æ”»å‡»ä¸­ï¼Œregsvr32.exe å‘½ä»¤ä½¿ç”¨ scrobj.dll åº“æ³¨å†Œå¹¶è¿è¡Œè¿œç¨‹è„šæœ¬ã€‚å¯ä»¥é€šè¿‡ESæŸ¥æ‰¾æ¶æ„æ”»å‡»</p>
<h2 id="3ã€SQLæ“ä½œ">3ã€SQLæ“ä½œ</h2>
<h3 id="3-1-æ¦‚è¿°">3.1 æ¦‚è¿°</h3>
<blockquote>
<p><a href="https://www.elastic.co/cn/what-is/elasticsearch-sql" target="_blank" rel="noopener" title="https://www.elastic.co/cn/what-is/elasticsearch-sql">https://www.elastic.co/cn/what-is/elasticsearch-sql</a></p>
</blockquote>
<p>ä¸€èˆ¬ä½¿ç”¨Elasticsearch çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ Query DSL æ¥æŸ¥è¯¢æ•°æ®ï¼Œä» Elasticsearch6.3 ç‰ˆæœ¬ä»¥åï¼ŒElasticsearch å·²ç»æ”¯æŒ SQL æŸ¥è¯¢äº†ã€‚Elasticsearch SQL æ˜¯ä¸€ä¸ªX-Pack ç»„ä»¶ï¼Œå®ƒå…è®¸é’ˆå¯¹Elasticsearch å®æ—¶æ‰§è¡Œç±»ä¼¼ SQL çš„æŸ¥è¯¢ã€‚æ— è®ºä½¿ç”¨ REST æ¥å£ï¼Œå‘½ä»¤è¡Œè¿˜æ˜¯ JDBCï¼Œä»»ä½•å®¢æˆ·ç«¯éƒ½å¯ä»¥ä½¿ç”¨ SQL å¯¹Elasticsearch ä¸­çš„æ•°æ®è¿›è¡ŒåŸç”Ÿæœç´¢å’Œèšåˆæ•°æ®ã€‚å¯ä»¥å°† Elasticsearch SQL çœ‹ä½œæ˜¯ä¸€ç§ç¿»è¯‘å™¨ï¼Œå®ƒå¯ä»¥å°†SQL ç¿»è¯‘æˆQuery DSLã€‚Elasticsearch SQL å…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>åŸç”Ÿæ”¯æŒï¼šElasticsearch SQL æ˜¯ä¸“é—¨ä¸º Elasticsearch æ‰“é€ çš„ã€‚</li>
<li>æ²¡æœ‰é¢å¤–çš„é›¶ä»¶ï¼šæ— éœ€å…¶ä»–ç¡¬ä»¶ï¼Œå¤„ç†å™¨ï¼Œè¿è¡Œç¯å¢ƒæˆ–ä¾èµ–åº“å³å¯æŸ¥è¯¢ Elasticsearchï¼Œ Elasticsearch SQL ç›´æ¥åœ¨ Elasticsearch å†…éƒ¨è¿è¡Œã€‚</li>
<li>è½»å·§é«˜æ•ˆï¼šElasticsearch SQL å¹¶æœªæŠ½è±¡åŒ–å…¶æœç´¢åŠŸèƒ½ï¼Œç›¸åçš„å®ƒæ‹¥æŠ±å¹¶æ¥å—äº† SQL æ¥å®ç°å…¨æ–‡æœç´¢ï¼Œä»¥ç®€æ´çš„æ–¹å¼å®æ—¶è¿è¡Œå…¨æ–‡æœç´¢ã€‚</li>
</ul>
<h3 id="3-2-SQLå’ŒElasticsearchå¯¹åº”å…³ç³»">3.2 SQLå’ŒElasticsearchå¯¹åº”å…³ç³»</h3>
<table>
<thead>
<tr>
<th><strong>SQL</strong></th>
<th><strong>Elasticsearch</strong></th>
<th><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Column</td>
<td>field</td>
<td>å¯¹æ¯”ä¸¤ä¸ªï¼Œæ•°æ®éƒ½å­˜å‚¨åœ¨å‘½åæ¡ç›®ä¸­ï¼Œå…·æœ‰å¤šç§æ•°æ®ç±»å‹ï¼ŒåŒ…å«ä¸€ä¸ªå€¼ã€‚SQL å°†æ­¤ç±»æ¡ç›®ç§°ä¸ºåˆ—ï¼Œè€Œ Elasticsearch ç§°ä¸ºå­—æ®µã€‚è¯·æ³¨æ„ï¼Œ åœ¨ Elasticsearch ä¸­ï¼Œä¸€ä¸ªå­—æ®µå¯ä»¥åŒ…å«å¤šä¸ªç›¸åŒç±»å‹çš„å€¼ï¼ˆæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼‰ï¼Œè€Œåœ¨ SQL ä¸­ï¼Œä¸€ä¸ªåˆ—å¯ä»¥åªåŒ…å«ä¸€ä¸ªæ‰€è¿°ç±»å‹çš„å€¼ã€‚Elasticsearch SQL å°†å°½æœ€å¤§åŠªåŠ›ä¿ç•™ SQL è¯­ä¹‰ï¼Œå¹¶æ ¹æ®æŸ¥è¯¢æ‹’ç»é‚£äº›è¿”å›å…·æœ‰å¤šä¸ªå€¼çš„å­—æ®µçš„æŸ¥è¯¢</td>
</tr>
<tr>
<td>Row</td>
<td>document</td>
<td>Columns å’Œfields æœ¬èº«ä¸å­˜åœ¨ï¼›å®ƒä»¬æ˜¯ row æˆ– a çš„ä¸€éƒ¨åˆ†documentã€‚ä¸¤è€…çš„è¯­ä¹‰ç•¥æœ‰ä¸åŒï¼šrow è¶‹äºä¸¥æ ¼ï¼ˆå¹¶ä¸”æœ‰æ›´å¤šçš„å¼ºåˆ¶æ‰§è¡Œï¼‰ï¼Œè€Œdocument è¶‹äºæ›´åŠ çµæ´»æˆ–æ¾æ•£ï¼ˆåŒæ—¶ä»ç„¶å…·æœ‰ç»“æ„ï¼‰</td>
</tr>
<tr>
<td>Table</td>
<td>Index</td>
<td>æ‰§è¡ŒæŸ¥è¯¢çš„ç›®æ ‡</td>
</tr>
<tr>
<td>Schema</td>
<td>Mapping</td>
<td>åœ¨RDBMS ä¸­ï¼Œ schem ä¸»è¦æ˜¯è¡¨çš„å‘½åç©ºé—´ï¼Œé€šå¸¸ç”¨ä½œå®‰å…¨è¾¹ç•Œã€‚Elasticsearch æ²¡æœ‰ä¸ºå®ƒæä¾›ç­‰æ•ˆçš„æ¦‚å¿µã€‚ä½†æ˜¯ï¼Œå½“å¯ç”¨å®‰å…¨æ€§æ—¶ï¼ŒElasticsearch ä¼šè‡ªåŠ¨åº”ç”¨å®‰å…¨æ€§å¼ºåˆ¶ï¼Œä»¥ä¾¿è§’è‰²åªèƒ½çœ‹åˆ°å®ƒè¢«å…è®¸è®¿é—®çš„æ•°æ®</td>
</tr>
<tr>
<td>Database</td>
<td>Clusterå®ä¾‹</td>
<td>åœ¨SQL ä¸­ï¼Œ catalog æˆ–è€… database ä»æ¦‚å¿µä¸Šå¯ä»¥äº’æ¢ä½¿ç”¨ï¼Œè¡¨ç¤ºä¸€ç»„æ¨¡å¼ï¼Œå³å¤šä¸ªè¡¨ã€‚åœ¨ Elasticsearch ä¸­ï¼Œå¯ç”¨çš„ç´¢å¼•é›†è¢«åˆ†ç»„åœ¨ä¸€ä¸ªcluster ï¼Œè¯­ä¹‰ä¹Ÿæœ‰æ‰€ä¸åŒã€‚ database æœ¬è´¨ä¸Šæ˜¯å¦ä¸€ä¸ªå‘½åç©ºé—´ï¼ˆå¯èƒ½å¯¹æ•°æ®çš„å­˜å‚¨æ–¹å¼æœ‰ä¸€äº›å½±å“ï¼‰ï¼Œè€Œ Elasticsearch cluster æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶å®ä¾‹ï¼Œæˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´æ˜¯ä¸€ç»„è‡³å°‘ä¸€ä¸ª Elasticsearch å®ä¾‹ï¼ˆé€šå¸¸æ˜¯åˆ†å¸ƒå¼è¡Œï¼‰ã€‚åœ¨å®è·µä¸­ï¼Œè¿™æ„å‘³ç€è™½ç„¶åœ¨ SQL ä¸­ï¼Œä¸€ä¸ªå®ä¾‹ä¸­å¯èƒ½æœ‰å¤šä¸ªç›®å½•ï¼Œä½†åœ¨ Elasticsearch ä¸­ï¼Œä¸€ä¸ªç›®å½•ä»…é™äºä¸€ä¸ª</td>
</tr>
</tbody>
</table>
<h3 id="3-3-æ•°æ®å‡†å¤‡ä¸æ¡ä»¶æŸ¥è¯¢">3.3 æ•°æ®å‡†å¤‡ä¸æ¡ä»¶æŸ¥è¯¢</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">PUT my-sql-index/_bulk?refresh</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_id"</span>:<span class="string">"JAVA"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"name"</span>:<span class="string">"JAVA"</span>,<span class="string">"author"</span>:<span class="string">"zhangsan"</span>,<span class="string">"release_date"</span>:<span class="string">"2022-05-01"</span>,<span class="string">"page_count"</span>:561&#125;</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_id"</span>:<span class="string">"BIGDATA"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"name"</span>:<span class="string">"BIGDATA"</span>,<span class="string">"author"</span>:<span class="string">"lisi"</span>,<span class="string">"release_date"</span>:<span class="string">"2022-05-02"</span>,<span class="string">"page_count"</span>:482&#125;</span><br><span class="line">&#123;<span class="string">"index"</span>:&#123;<span class="string">"_id"</span>:<span class="string">"SCALA"</span>&#125;&#125;</span><br><span class="line">&#123;<span class="string">"name"</span>:<span class="string">"SCALA"</span>,<span class="string">"author"</span>:<span class="string">"wangwu"</span>,<span class="string">"release_date"</span>:<span class="string">"2022-05-03"</span>,<span class="string">"page_count"</span>:604&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªæ•°æ®æŸ¥è¯¢</span></span><br><span class="line"><span class="comment"># SQL</span></span><br><span class="line"><span class="comment"># è¿™é‡Œçš„è¡¨å°±æ˜¯ç´¢å¼•</span></span><br><span class="line"><span class="comment">#å¯ä»¥é€šè¿‡ format å‚æ•°æ§åˆ¶è¿”å›ç»“æœçš„æ ¼å¼ï¼Œé»˜è®¤ä¸º jsonæ ¼å¼</span></span><br><span class="line"><span class="comment"># txt:è¡¨ç¤ºæ–‡æœ¬æ ¼å¼ï¼Œçœ‹èµ·æ¥æ›´ç›´è§‚ç‚¹. # csv:ä½¿ç”¨é€—å·éš”å¼€çš„æ•°æ®</span></span><br><span class="line"><span class="comment"># json:JSON æ ¼å¼æ•°æ®</span></span><br><span class="line"><span class="comment"># tsv: ä½¿ç”¨ tab é”®éš”å¼€æ•°æ®</span></span><br><span class="line"><span class="comment"># yaml:å±æ€§é…ç½®æ ¼å¼</span></span><br><span class="line">POST _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">SELECT * FROM "</span>my-sql-index<span class="string">"</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">POST _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">SELECT * FROM "</span>my-sql-index<span class="string">" where page_count &gt; 500 "</span><span class="string">""</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-4-SQLä¸DSLæ··åˆæŸ¥è¯¢">3.4 SQLä¸DSLæ··åˆæŸ¥è¯¢</h3>
<p>å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨Query DSL æ—¶ï¼Œä¹Ÿå¯ä»¥å…ˆä½¿ç”¨SQL æ¥æŸ¥è¯¢ï¼Œç„¶åé€šè¿‡Translate API è½¬æ¢å³å¯ï¼ŒæŸ¥è¯¢çš„ç»“æœä¸ºDSL æ–¹å¼çš„ç»“æœï¼Œè½¬æ¢ SQL ä¸º DSL è¿›è¡Œæ“ä½œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è½¬æ¢</span></span><br><span class="line">POST _sql/translate</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">SELECT * FROM "</span>my-sql-index<span class="string">" where page_count &gt; 500 "</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ··åˆä½¿ç”¨</span></span><br><span class="line">POST _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">SELECT * FROM "</span>my-sql-index<span class="string">" where page_count &gt; 500 "</span><span class="string">""</span>,</span><br><span class="line">  <span class="string">"filter"</span>: &#123;</span><br><span class="line">    <span class="string">"range"</span>: &#123;</span><br><span class="line">      <span class="string">"page_count"</span>: &#123;</span><br><span class="line">        <span class="string">"gte"</span>: 400,</span><br><span class="line">        <span class="string">"lte"</span>: 600</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"fetch_size"</span>: 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-5-å¸¸ç”¨SQlæ“ä½œ">3.5 å¸¸ç”¨SQlæ“ä½œ</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥è¯¢æ‰€æœ‰ç´¢å¼•</span></span><br><span class="line">GET _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">" show tables</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢æŒ‡å®šç´¢å¼•</span></span><br><span class="line">GET _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">" show tables like 'myindex'</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡ç³ŠæŸ¥è¯¢ç´¢å¼•</span></span><br><span class="line">GET _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">show tables like 'my-%' "</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç´¢å¼•ç»“æ„</span></span><br><span class="line">GET _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">" describe myindex</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸºç¡€æŸ¥è¯¢æ“ä½œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">SELECT select_expr [, â€¦] [ FROM table_name ]</span><br><span class="line">[ WHERE condition ]</span><br><span class="line">[ GROUP BY grouping_element [, â€¦] ] [ HAVING condition]</span><br><span class="line">[ ORDER BY expression [ ASC | DESC ] [, â€¦] ] [ LIMIT [ count ] ]</span><br><span class="line">[ PIVOT ( aggregation_expr FOR column IN ( value [ [ AS ] <span class="built_in">alias</span> ] [, â€¦] ) ) ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¡ä»¶è¿‡æ»¤</span></span><br><span class="line">POST _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">" SELECT * FROM "</span>my-sql-index<span class="string">" where name = 'JAVA' "</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line">GET _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">SELECT * FROM "</span>my-sql-index<span class="string">"</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŒ‰ç…§æ—¥æœŸè¿›è¡Œåˆ†ç»„</span></span><br><span class="line">GET _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">SELECT release_date FROM "</span>my-sql-index<span class="string">" group by release_date</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹åˆ†ç»„åçš„æ•°æ®è¿›è¡Œè¿‡æ»¤</span></span><br><span class="line">GET _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">SELECT sum(page_count), release_date as datacnt FROM "</span>my-sql-index<span class="string">" group by release_date having sum(page_count) &gt; 100</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹é¡µé¢æ•°é‡è¿›è¡Œæ’åºï¼ˆé™åºï¼‰</span></span><br><span class="line">GET _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">select * from "</span>my-sql-index<span class="string">" order by page_count desc "</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#é™å®šæŸ¥è¯¢æ•°é‡</span></span><br><span class="line">GET _sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">select * from "</span>my-sql-index<span class="string">" limit 3 "</span><span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># =================================</span></span><br><span class="line"><span class="comment"># æ¸¸æ ‡ï¼ˆcursorï¼‰æ˜¯ç³»ç»Ÿä¸ºç”¨æˆ·å¼€è®¾çš„ä¸€ä¸ªæ•°æ®ç¼“å†²åŒºï¼Œå­˜å‚¨ sql è¯­å¥çš„æ‰§è¡Œç»“æœï¼Œæ¯ä¸ªæ¸¸æ ‡åŒºéƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œç”¨æˆ·å¯ä»¥ç”¨ sql è¯­å¥é€ä¸€ä»æ¸¸æ ‡ä¸­è·å–è®°å½•ï¼Œå¹¶èµ‹ç»™ä¸»å˜é‡ï¼Œäº¤ç”±ä¸»è¯­è¨€è¿›ä¸€æ­¥å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment"># å°±æœ¬è´¨è€Œè¨€ï¼Œæ¸¸æ ‡å®é™…ä¸Šæ˜¯ä¸€ç§èƒ½ä»åŒ…æ‹¬å¤šæ¡æ•°æ®è®°å½•çš„ç»“æœé›†ä¸­æ¯æ¬¡æå–ä¸€æ¡æˆ–å¤šæ¡è®°å½•çš„æœºåˆ¶</span></span><br><span class="line"></span><br><span class="line">POST _sql?format=json</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"query"</span>: <span class="string">""</span><span class="string">" SELECT * FROM "</span>my-sql-index<span class="string">" order by page_count desc "</span><span class="string">""</span>, <span class="string">"fetch_size"</span>: 2</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># è¿”å›ç»“æœä¸­çš„cursor å°±æ˜¯ç¼“å†²åŒºçš„æ ‡è¯†ï¼Œè¿™å°±æ„å‘³ç€å¯ä»¥ä»ç¼“å†²åŒºä¸­ç›´æ¥è·å–åç»­æ•°æ®ï¼Œæ“ä½œä¸Šæœ‰ç‚¹ç±»ä¼¼äºè¿­ä»£å™¨ï¼Œå¯å¤šæ¬¡æ‰§è¡Œã€‚</span></span><br><span class="line"><span class="comment"># æ­¤å¤„æ¸¸æ ‡ cursor å€¼éœ€è¦æ ¹æ®è¯»è€…æ‰§è¡Œçš„æ“ä½œè¿›è¡Œä¿®æ”¹ï¼Œè¯·å‹¿ç›´æ¥ä½¿ç”¨</span></span><br><span class="line"><span class="comment"># å¦‚æœæ‰§è¡Œåï¼Œæ— ä»»ä½•ç»“æœè¿”å›ï¼Œè¯´æ˜æ•°æ®å·²ç»è¯»å–å®Œæ¯•,æ­¤æ—¶å†æ¬¡æ‰§è¡Œï¼Œä¼šè¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">POST /_sql?format=json</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"cursor"</span>: <span class="string">"8/LoA0RGTACMjMFKwzAchxesIkPwEXyGVHfoYYfNkYyBBSNJ1lxGuvzbbk2Tsaas+ny+17R4EC/D7/b78fEhhdpPRKjtsrjHiooii5POUPFkSIKNtPXCEazWq4mglc1rZQ1N/axSB9iLlmNGOWEq55NXJs27kCLkmM1nP8zXz1v5hk0m62SZLhTnxHyIZvUiZR+zx9Sb/r+d8nLnNJ2ev7m/RsWN7kLljygK0IfRCBWR0w38zivnT+jW6ABh18AgjA+6hM3Wdy6gyHpXDufdESzoFjaD+cd/+AIAAP//AwA="</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœå…³é—­ç¼“å†²åŒºï¼Œæ‰§è¡Œä¸‹é¢æŒ‡ä»¤å³å¯</span></span><br><span class="line">POST /_sql/close</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"cursor"</span>: <span class="string">"8/LoA0RGTACMjMFKwzAchxesIkPwEXyGVHfoYYfNkYyBBSNJ1lxGuvzbbk2Tsaas+ny+17R4EC/D7/b78fEhhdpPRKjtsrjHiooii5POUPFkSIKNtPXCEazWq4mglc1rZQ1N/axSB9iLlmNGOWEq55NXJs27kCLkmM1nP8zXz1v5hk0m62SZLhTnxHyIZvUiZR+zx9Sb/r+d8nLnNJ2ev7m/RsWN7kLljygK0IfRCBWR0w38zivnT+jW6ABh18AgjA+6hM3Wdy6gyHpXDufdESzoFjaD+cd/+AIAAP//AwA="</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-6-åŸºç¡€èšåˆæ“ä½œ">3.6 åŸºç¡€èšåˆæ“ä½œ</h3>
<blockquote>
<p>å¸¸ç”¨çš„å‡½æ•°å¯ä»¥å‚è€ƒï¼š<a href="https://blog.csdn.net/lemon_TT/article/details/128374620" target="_blank" rel="noopener" title="MySQL8.0åŸºç¡€ç¯‡">MySQL8.0åŸºç¡€ç¯‡</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œè®²å‡ ä¸ªç‰¹åˆ«çš„</span></span><br><span class="line"><span class="comment"># å¦‚æœéœ€è¦åŒ¹é…é€šé…ç¬¦æœ¬èº« ä½¿ç”¨è½¬ä¹‰å­—ç¬¦</span></span><br><span class="line">SELECT * FROM <span class="string">"my-sql-index"</span> WHERE name like <span class="string">'JAVA/%'</span> ESCAPE <span class="string">'/'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RLIKE ä¸è¦è¯¯ä¼šï¼Œè¿™é‡Œçš„ R è¡¨ç¤ºçš„ä¸æ˜¯æ–¹å‘ï¼Œè€Œæ˜¯æ­£åˆ™è¡¨ç¤ºå¼ Regex</span></span><br><span class="line">SELECT * FROM <span class="string">"my-sql-index"</span> WHERE name like <span class="string">'JAV*A'</span></span><br><span class="line">SELECT * FROM <span class="string">"my-sql-index"</span> WHERE name rlike <span class="string">'JAV*A'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°½ç®¡ LIKE åœ¨ Elasticsearch SQL ä¸­æœç´¢æˆ–è¿‡æ»¤æ—¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„é€‰é¡¹ï¼Œä½†å…¨æ–‡æœç´¢ MATCH å’Œ QUERYé€Ÿåº¦æ›´å¿«ã€åŠŸèƒ½æ›´å¼ºå¤§ï¼Œå¹¶ä¸”æ˜¯é¦–é€‰æ›¿ä»£æ–¹æ¡ˆã€‚</span></span><br><span class="line"><span class="comment"># MATCH MATCH( åŒ¹é…å­—æ®µï¼Œè§„åˆ™ , é…ç½®å‚æ•° å¯é€‰))</span></span><br><span class="line">SELECT * FROM <span class="string">"my-sql-index"</span> <span class="built_in">where</span> MATCH (name, <span class="string">'JAVA'</span>)</span><br><span class="line">SELECT * FROM <span class="string">"my-sql-index"</span> <span class="built_in">where</span> MATCH (name, <span class="string">'JAVA'</span>)</span><br><span class="line"><span class="comment"># MATCH MATCH((' åŒ¹é…å­—æ®µ æƒé‡ 1, åŒ¹é…å­—æ®µ æƒé‡ 2'2'ï¼Œè§„åˆ™ , é…ç½®å‚æ•° å¯é€‰</span></span><br><span class="line">SELECT * FROM <span class="string">"my-sql-index"</span> <span class="built_in">where</span> MATCH(<span class="string">'author^2,name^5'</span>, <span class="string">'java'</span>)</span><br><span class="line"><span class="comment"># QUERY</span></span><br><span class="line">SELECT * FROM <span class="string">"my-sql-index"</span> <span class="built_in">where</span> QUERY(<span class="string">'name:Java'</span>)</span><br><span class="line"><span class="comment"># SCORE : è¯„åˆ†</span></span><br><span class="line">SELECT *, score () FROM <span class="string">"my-sql-index"</span> <span class="built_in">where</span> QUERY(<span class="string">'name:Java'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¡ä»¶åˆ†æ”¯å‡½æ•°</span></span><br><span class="line"><span class="comment"># å¤šé‡åˆ†æ”¯åˆ¤æ–­</span></span><br><span class="line">SELECT CASE 5</span><br><span class="line">    WHEN 1 THEN <span class="string">'elastic'</span></span><br><span class="line">    WHEN 2 THEN <span class="string">'search'</span></span><br><span class="line">    WHEN 3 THEN <span class="string">'elasticsearch'</span></span><br><span class="line">    ELSE <span class="string">'default'</span></span><br><span class="line">END AS <span class="string">"case"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ES é›† ç¾¤</span></span><br><span class="line">SELECT DATABASE()</span><br><span class="line"><span class="comment"># ç”¨æˆ·</span></span><br><span class="line">SELECT USER()</span><br></pre></td></tr></table></figure>
<h3 id="3-7-SQL-å®¢æˆ·ç«¯-DataGrip">3.7 SQL å®¢æˆ·ç«¯ DataGrip</h3>
<p>DataGripæ˜¯ JetBrains å‘å¸ƒçš„å¤šå¼•æ“æ•°æ®åº“ç¯å¢ƒï¼Œå¯ä»¥åœ¨IDEAè¿æ¥ï¼Œä¸è¿‡è¦æ”¶è´¹(è¯•ç”¨30å¤©)ï¼Œè¿æ¥es driverï¼Œé…ç½®å¥½sslç­‰å³å¯</p>
<h2 id="4ã€è‡ªç„¶è¯­è¨€å¤„ç†-NLP">4ã€è‡ªç„¶è¯­è¨€å¤„ç† NLP</h2>
<blockquote>
<p>éšç€ 8.0 çš„å‘å¸ƒï¼ŒElastic å¾ˆé«˜å…´èƒ½å¤Ÿå°† PyTorch æœºå™¨å­¦ä¹ æ¨¡å‹ä¸Šä¼ åˆ° Elasticsearch ä¸­ï¼Œ ä»¥åœ¨ Elastic Stack ä¸­æä¾›ç°ä»£è‡ªç„¶è¯­è¨€å¤„ç† (NLP)ã€‚ç°åœ¨ï¼ŒElasticsearch ç”¨æˆ·èƒ½å¤Ÿé›†æˆç”¨äºæ„å»ºNLP æ¨¡å‹çš„æœ€æµè¡Œçš„æ ¼å¼ä¹‹ä¸€ï¼Œå¹¶å°†è¿™äº›æ¨¡å‹ä½œä¸º NLP æ•°æ®ç®¡é“çš„ä¸€éƒ¨åˆ†é€šè¿‡æˆ‘ä»¬çš„Inference processor æ•´åˆåˆ°Elasticsearch ä¸­</p>
</blockquote>
<h3 id="4-1-ç®€ä»‹">4.1 ç®€ä»‹</h3>
<ul>
<li>æƒ…ç»ªåˆ†æï¼šç”¨äºè¯†åˆ«æ­£é¢ä¸è´Ÿé¢é™ˆè¿°çš„äºŒå…ƒåˆ†ç±»</li>
<li>å‘½åå®ä½“è¯†åˆ« (NER)ï¼šä»éç»“æ„åŒ–æ–‡æœ¬æ„å»ºç»“æ„ï¼Œå°è¯•æå–åç§°ã€ä½ç½®æˆ–ç»„ç»‡ç­‰ç»†èŠ‚</li>
<li>æ–‡æœ¬åˆ†ç±»ï¼šé›¶æ ·æœ¬åˆ†ç±»å…è®¸ä½ æ ¹æ®ä½ é€‰æ‹©çš„ç±»å¯¹æ–‡æœ¬è¿›è¡Œåˆ†ç±»ï¼Œè€Œæ— éœ€è¿›è¡Œé¢„è®­ç»ƒã€‚</li>
<li>æ–‡æœ¬åµŒå…¥ï¼šç”¨äº k è¿‘é‚» (kNN) Â æœç´¢</li>
</ul>
<h3 id="4-2-Elasticsearch-ä¸­çš„è‡ªç„¶è¯­è¨€å¤„ç†">4.2 Elasticsearch ä¸­çš„è‡ªç„¶è¯­è¨€å¤„ç†</h3>
<p>é€šè¿‡ä¸åœ¨ PyTorch  æ¨¡å‹ä¸­æ„å»º NLP  æ¨¡å‹çš„æœ€æµè¡Œçš„æ ¼å¼ä¹‹ä¸€é›†æˆï¼ŒElasticsearch  å¯ä»¥æä¾›ä¸€ä¸ªå¹³å°ï¼Œè¯¥å¹³å°å¯å¤„ç†å¤§é‡ NLP ä»»åŠ¡å’Œç”¨ä¾‹ã€‚è®¸å¤šä¼˜ç§€çš„åº“å¯ç”¨äºè®­ç»ƒ NLP æ¨¡å‹ï¼Œå› æ­¤æˆ‘ä»¬æš‚æ—¶å°†å…¶ç•™ç»™å…¶ä»–å·¥å…·ã€‚æ— è®ºä½ æ˜¯ä½¿ç”¨ PyTorch NLPã€Hugging Face Transformers è¿˜æ˜¯ Facebook  çš„ fairseq ç­‰åº“æ¥è®­ç»ƒæ¨¡å‹ï¼Œä½ éƒ½å¯ä»¥å°†æ¨¡å‹å¯¼å…¥ Elasticsearch  å¹¶å¯¹è¿™äº›æ¨¡å‹è¿›è¡Œæ¨ç†ã€‚ Elasticsearch æ¨ç†æœ€åˆå°†ä»…åœ¨æ‘„å–æ—¶è¿›è¡Œï¼Œæœªæ¥è¿˜å¯ä»¥æ‰©å±•ä»¥åœ¨æŸ¥è¯¢æ—¶å¼•å…¥æ¨ç†ã€‚</p>
<p>Elasticsearch ä¸€ç›´æ˜¯è¿›è¡ŒNLP çš„å¥½åœ°æ–¹ï¼Œä½†ä»å†å²ä¸Šçœ‹ï¼Œå®ƒéœ€è¦åœ¨Elasticsearch ä¹‹å¤–è¿›è¡Œä¸€äº›å¤„ç†ï¼Œæˆ–è€…ç¼–å†™ä¸€äº›éå¸¸å¤æ‚çš„æ’ä»¶ã€‚ å€ŸåŠ© 8.0ï¼Œç”¨æˆ·ç°åœ¨å¯ä»¥åœ¨Elasticsearch ä¸­æ›´ç›´æ¥åœ°æ‰§è¡Œå‘½åå®ä½“è¯†åˆ«ã€æƒ…æ„Ÿåˆ†æã€æ–‡æœ¬åˆ†ç±»ç­‰æ“ä½œâ€”â€”æ— éœ€é¢å¤–çš„ç»„ä»¶æˆ–ç¼–ç ã€‚ ä¸ä»…åœ¨ Elasticsearch ä¸­æœ¬åœ°è®¡ç®—å’Œåˆ›å»ºå‘é‡åœ¨æ°´å¹³å¯æ‰©å±•æ€§æ–¹é¢æ˜¯â€œèƒœåˆ©â€ï¼ˆé€šè¿‡åœ¨æœåŠ¡å™¨é›†ç¾¤ä¸­åˆ†å¸ƒè®¡ç®—ï¼‰â€”â€”è¿™ä¸€å˜åŒ–è¿˜ä¸º Elasticsearch ç”¨æˆ·èŠ‚çœäº†å¤§é‡æ—¶é—´å’Œç²¾åŠ›</p>
<p>å€ŸåŠ©Elastic 8.0ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨ Elasticsearch ä¸­ä½¿ç”¨ PyTorch æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆä¾‹å¦‚ BERTï¼‰ï¼Œ å¹¶åœ¨Elasticsearch ä¸­ä½¿ç”¨è¿™äº›æ¨¡å‹è¿›è¡Œæ¨ç†ã€‚é€šè¿‡ä½¿ç”¨æˆ·èƒ½å¤Ÿç›´æ¥åœ¨ Elasticsearch ä¸­æ‰§è¡Œæ¨ç†ï¼Œå°†ç°ä»£ NLP çš„å¼ºå¤§åŠŸèƒ½é›†æˆåˆ°æœç´¢åº”ç”¨ç¨‹åºå’Œä½“éªŒã€æœ¬è´¨ä¸Šæ›´é«˜æ•ˆï¼ˆå¾—ç›Šäº Elasticsearch çš„åˆ†å¸ƒå¼è®¡ç®—èƒ½åŠ›ï¼‰å’Œ NLP æœ¬èº«æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´å®¹æ˜“ å˜å¾—æ›´å¿«ï¼Œå› ä¸ºä½ ä¸éœ€è¦å°†æ•°æ®ç§»å‡ºåˆ°å•ç‹¬çš„è¿›ç¨‹æˆ–ç³»ç»Ÿä¸­ã€‚</p>
<h3 id="4-3-NLPæ¼”ç¤º">4.3 NLPæ¼”ç¤º</h3>
<blockquote>
<p>é¡¹ç›®æ’ä»¶åœ°å€ï¼š<a href="https://github.com/spinscale/elasticsearch-ingest-opennlp/releases/tag/8.1.1.1" target="_blank" rel="noopener" title="https://github.com/spinscale/elasticsearch-ingest-opennlp/releases/tag/8.1.1.1">https://github.com/spinscale/elasticsearch-ingest-opennlp/releases/tag/8.1.1.1</a></p>
</blockquote>
<p>ç›®å‰è¿™ä¸ªNLP æ”¯æŒæ£€æµ‹ Dateï¼Œ Personï¼Œ Location, POS (part of speech) åŠå…¶å®ƒï¼Œç®€å•æ¦‚è¿°æ˜¯å°†è¿™ä¸ªæ¨¡å‹æ’ä»¶é›†æˆåˆ°ESï¼Œè¿™æ ·ESå¯ä»¥ç›´æ¥é€šè¿‡ä¸€å¥è¯è¿›è¡ŒæŸ¥è¯¢åˆ†è¯ï¼›å› ä¸ºç‰ˆæœ¬é—®é¢˜ï¼Œéœ€è¦æ‰“å¼€æ’ä»¶çš„<code>plugin-descriptor.properties</code>æ–‡ä»¶ï¼Œå°†ESç‰ˆæœ¬8.1.1æ”¹æˆ8.1.0ï¼Œç„¶åå°†ESè¿›è¡Œé‡å¯(é›†ç¾¤çš„è¯æ¯å°éƒ½è¦éƒ¨ç½²)</p>
<p>ç¬¬äºŒæ­¥ä¸‹è½½NERæ¨¡å‹ï¼Œä»sourceforge ä¸‹è½½æœ€æ–°çš„NER æ¨¡å‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bin/ingest-opennlp/download-models</span><br><span class="line"><span class="comment"># æ‰§è¡Œæ—¶ï¼Œå¯èƒ½ä¼šæç¤ºè„šæœ¬è·¯å¾„ä¸å¯¹ç­‰é—®é¢˜ã€‚ç›´æ¥ä¿®æ”¹è„šæœ¬æ–‡ä»¶æ”¹æ­£å³å¯</span></span><br></pre></td></tr></table></figure>
<p><img src="http://qnypic.shawncoding.top/blog/202304071915837.png" alt></p>
<p>ç¬¬ä¸‰æ­¥é…ç½® opennlpï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š<code>config/elasticsearch.yml</code>,é‡å¯</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ingest.opennlp.model.file.persons:</span> <span class="string">en-ner-persons.bin</span></span><br><span class="line"><span class="attr">ingest.opennlp.model.file.dates:</span> <span class="string">en-ner-dates.bin</span></span><br><span class="line"><span class="attr">ingest.opennlp.model.file.locations:</span> <span class="string">en-ner-locations.bin</span></span><br></pre></td></tr></table></figure>
<p>æœ€åè¿ç”¨ opennlp</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ”¯æŒ NLP çš„ pipeline</span></span><br><span class="line">PUT _ingest/pipeline/opennlp-pipeline</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">"A pipeline to do named entity extraction"</span>,</span><br><span class="line">  <span class="string">"processors"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"opennlp"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"message"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¢åŠ æ•°æ®</span></span><br><span class="line">PUT my-nlp-index</span><br><span class="line">PUT my-nlp-index/_doc/1?pipeline=opennlp-pipeline</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"message"</span>: <span class="string">"Shay Banon announced the release of Elasticsearch 6.0 in November 2017"</span></span><br><span class="line">&#125;</span><br><span class="line">PUT my-nlp-index/_doc/2?pipeline=opennlp-pipeline</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"message"</span>: <span class="string">"Kobe Bryant was one of the best basketball players of all times. Not even Michael Jordan has ever scored 81 points in one game. Munich is really an awesome city, but New York is as well. Yesterday has been the hottest day of the year."</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ•°æ®</span></span><br><span class="line">GET my-nlp-index/_doc/1 GET my-nlp-index/_doc/2</span><br></pre></td></tr></table></figure>
<h1>äº”ã€Elasticsearch ä¼˜åŒ–</h1>
<h2 id="1ã€æ€§èƒ½ä¼˜åŒ–ä¹‹ç¼“å­˜">1ã€æ€§èƒ½ä¼˜åŒ–ä¹‹ç¼“å­˜</h2>
<p>Elasticsearch åº”ç”¨æ—¶ä¼šä½¿ç”¨å„ç§ç¼“å­˜ï¼Œè€Œç¼“å­˜æ˜¯åŠ å¿«æ•°æ®æ£€ç´¢é€Ÿåº¦çš„ç‹é“ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç€é‡ä»‹ç»ä»¥ä¸‹ä¸‰ç§ç¼“å­˜ï¼š</p>
<ul>
<li>é¡µç¼“å­˜</li>
<li>åˆ†ç‰‡çº§è¯·æ±‚ç¼“å­˜</li>
<li>æŸ¥è¯¢ç¼“å­˜</li>
</ul>
<h3 id="1-1-é¡µç¼“å­˜">1.1 é¡µç¼“å­˜</h3>
<p>æ•°æ®çš„å®‰å…¨ã€å¯é ï¼Œå¸¸è§„æ“ä½œä¸­ï¼Œæ•°æ®éƒ½æ˜¯ä¿å­˜åœ¨ç£ç›˜æ–‡ä»¶ä¸­çš„ã€‚æ‰€ä»¥å¯¹æ•°æ®çš„è®¿é—®ï¼Œç»å¤§æ•°æƒ…å†µä¸‹å…¶å®å°±æ˜¯å¯¹æ–‡ä»¶çš„è®¿é—®ï¼Œä¸ºäº†æå‡å¯¹æ–‡ä»¶çš„è¯»å†™çš„è®¿é—®æ•ˆç‡ï¼ŒLinux å†…æ ¸ä¼šä»¥é¡µå¤§å°ï¼ˆ4KBï¼‰ä¸ºå•ä½ï¼Œå°†æ–‡ä»¶åˆ’åˆ†ä¸ºå¤šä¸ªæ•°æ®å—ã€‚å½“ç”¨æˆ·å¯¹æ–‡ä»¶ä¸­çš„æŸä¸ªæ•°æ®å—è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œå†…æ ¸é¦–å…ˆä¼šç”³è¯·ä¸€ä¸ªå†…å­˜é¡µï¼ˆç§°ä¸º PageCache é¡µç¼“å­˜ï¼‰ä¸æ–‡ä»¶ä¸­çš„æ•°æ®å—è¿›è¡Œç»‘å®šã€‚</p>
<p><img src="http://qnypic.shawncoding.top/blog/202304071915856.png" alt></p>
<p>é¡µç¼“å­˜çš„åŸºæœ¬ç†å¿µæ˜¯ä»ç£ç›˜è¯»å–æ•°æ®åå°†æ•°æ®æ”¾å…¥å¯ç”¨å†…å­˜ä¸­ï¼Œä»¥ä¾¿ä¸‹æ¬¡è¯»å–æ—¶ä»å†…å­˜è¿”å›æ•°æ®ï¼Œè€Œä¸”è·å–æ•°æ®ä¸éœ€è¦è¿›è¡Œç£ç›˜æŸ¥æ‰¾ã€‚æ‰€æœ‰è¿™äº›å¯¹åº”ç”¨ç¨‹åºæ¥è¯´æ˜¯å®Œå…¨é€æ˜çš„ï¼Œåº”ç”¨ç¨‹åºå‘å‡ºç›¸åŒçš„ç³»ç»Ÿè°ƒç”¨ï¼Œä½†æ“ä½œç³»ç»Ÿå¯ä»¥ä½¿ç”¨é¡µç¼“å­˜è€Œä¸æ˜¯ä»ç£ç›˜è¯»å–ã€‚<br>
Java ç¨‹åºæ˜¯è·¨å¹³å°çš„ï¼Œæ‰€ä»¥æ²¡æœ‰å’Œç¡¬ä»¶ï¼ˆç£ç›˜ï¼Œå†…å­˜ï¼‰ç›´æ¥äº¤äº’çš„èƒ½åŠ›ï¼Œå¦‚æœæƒ³è¦å’Œç£ç›˜æ–‡ä»¶äº¤äº’ï¼Œé‚£ä¹ˆå¿…é¡»è¦é€šè¿‡ OS æ“ä½œç³»ç»Ÿæ¥å®Œæˆæ–‡ä»¶çš„è¯»å†™ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°±ç§°ä¹‹ä¸ºç”¨æˆ·æ€è½¬æ¢ä¸ºå†…æ ¸æ€ã€‚è€Œæ“ä½œç³»ç»Ÿå¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯å¯¹æ–‡ä»¶çš„é¡µç¼“å­˜è¿›è¡Œè¯»å†™ã€‚æ‰€ä»¥å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œä¼šåˆ†ä»¥ä¸‹ä¸¤ç§æƒ…å†µè¿›è¡Œå¤„ç†ï¼š</p>
<ul>
<li>å½“ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®æ—¶ï¼Œå¦‚æœè¦è¯»å–çš„æ•°æ®æ‰€åœ¨çš„é¡µç¼“å­˜å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ç›´æ¥æŠŠé¡µç¼“å­˜çš„æ•°æ®æ‹·è´ç»™ç”¨æˆ·å³å¯ã€‚å¦åˆ™ï¼Œå†…æ ¸é¦–å…ˆä¼šç”³è¯·ä¸€ä¸ªç©ºé—²çš„å†…å­˜é¡µï¼ˆé¡µç¼“å­˜ï¼‰ï¼Œç„¶åä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®åˆ°é¡µç¼“å­˜ï¼Œå¹¶ä¸”æŠŠé¡µç¼“å­˜çš„æ•°æ®æ‹·è´ç»™ç”¨æˆ·ã€‚</li>
<li>å½“å‘æ–‡ä»¶ä¸­å†™å…¥æ•°æ®æ—¶ï¼Œå¦‚æœè¦å†™å…¥çš„æ•°æ®æ‰€åœ¨çš„é¡µç¼“å­˜å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆç›´æ¥æŠŠæ–°æ•°æ®å†™å…¥åˆ°é¡µç¼“å­˜å³å¯ã€‚å¦åˆ™ï¼Œå†…æ ¸é¦–å…ˆä¼šç”³è¯·ä¸€ä¸ªç©ºé—²çš„å†…å­˜é¡µï¼ˆé¡µç¼“å­˜ï¼‰ï¼Œå¹¶ä¸”æŠŠæ–°æ•°æ®å†™å…¥åˆ°é¡µç¼“å­˜ä¸­ã€‚å¯¹äºè¢«ä¿®æ”¹çš„é¡µç¼“å­˜ï¼Œå†…æ ¸ä¼šå®šæ—¶æŠŠè¿™äº›é¡µç¼“å­˜åˆ·æ–°åˆ°æ–‡ä»¶ä¸­</li>
</ul>
<p>é¡µç¼“å­˜å¯¹ Elasticsearch æ¥è¯´æ„å‘³ç€ä»€ä¹ˆï¼Ÿä¸è®¿é—®ç£ç›˜ä¸Šçš„æ•°æ®ç›¸æ¯”ï¼Œé€šè¿‡é¡µç¼“å­˜å¯ä»¥æ›´å¿«åœ°è®¿é—®æ•°æ®ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå»ºè®®çš„ Elasticsearch å†…å­˜é€šå¸¸ä¸è¶…è¿‡æ€»å¯ç”¨å†…å­˜çš„ä¸€åŠï¼Œè¿™æ ·å¦ä¸€åŠå°±å¯ç”¨äºé¡µç¼“å­˜äº†ã€‚è¿™ä¹Ÿæ„å‘³ç€ä¸ä¼šæµªè´¹ä»»ä½•å†…å­˜ã€‚å¦‚æœæ•°æ®æœ¬èº«å‘ç”Ÿæ›´æ”¹ï¼Œé¡µç¼“å­˜ä¼šå°†æ•°æ®æ ‡è®°ä¸ºè„æ•°æ®ï¼Œå¹¶å°†è¿™äº›æ•°æ®ä»é¡µç¼“å­˜ä¸­é‡Šæ”¾ã€‚ç”±äº Elasticsearch å’Œ Lucene ä½¿ç”¨çš„æ®µåªå†™å…¥ä¸€æ¬¡ï¼Œå› æ­¤è¿™ç§æœºåˆ¶éå¸¸é€‚åˆæ•°æ®çš„å­˜å‚¨æ–¹å¼ã€‚æ®µåœ¨åˆå§‹å†™å…¥ä¹‹åæ˜¯åªè¯»çš„ï¼Œå› æ­¤æ•°æ®çš„æ›´æ”¹å¯èƒ½æ˜¯åˆå¹¶æˆ–æ·»åŠ æ–°æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ éœ€è¦è¿›è¡Œæ–°çš„ç£ç›˜è®¿é—®ã€‚å¦ä¸€ç§å¯èƒ½æ˜¯å†…å­˜è¢«å¡«æ»¡äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼“å­˜æ•°æ®è¿‡æœŸçš„æ“ä½œä¸º LRUã€‚</p>
<h3 id="1-2-åˆ†ç‰‡çº§è¯·æ±‚ç¼“å­˜">1.2 åˆ†ç‰‡çº§è¯·æ±‚ç¼“å­˜</h3>
<p>å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªç´¢å¼•å‘é€æœç´¢è¯·æ±‚æ—¶ï¼Œæœç´¢è¯·æ±‚é¦–å…ˆä¼šå‘é€åˆ°ES é›†ç¾¤ä¸­çš„æŸä¸ªèŠ‚ç‚¹ï¼Œç§°ä¹‹ä¸º<strong>åè°ƒèŠ‚ç‚¹</strong>ï¼›åè°ƒèŠ‚ç‚¹ä¼šæŠŠè¯¥æœç´¢è¯·æ±‚åˆ†å‘ç»™å…¶ä»–èŠ‚ç‚¹å¹¶åœ¨ç›¸åº”åˆ†ç‰‡ä¸Šæ‰§è¡Œæœç´¢æ“ä½œï¼Œæˆ‘ä»¬æŠŠåˆ†ç‰‡ä¸Šçš„æ‰§è¡Œç»“æœç§°ä¸ºâ€œ<strong>æœ¬åœ°ç»“æœé›†</strong>â€ï¼Œä¹‹åï¼Œåˆ†ç‰‡å†å°†æ‰§è¡Œç»“æœè¿”å›ç»™åè°ƒèŠ‚ç‚¹ï¼›åè°ƒèŠ‚ç‚¹è·å¾—æ‰€æœ‰åˆ†ç‰‡çš„æœ¬åœ°ç»“æœé›†ä¹‹åï¼Œåˆå¹¶æˆæœ€ç»ˆçš„ç»“æœå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚Elasticsearch ä¼šåœ¨æ¯ä¸ªåˆ†ç‰‡ä¸Šç¼“å­˜äº†æœ¬åœ°ç»“æœé›†ï¼Œè¿™ä½¿å¾—é¢‘ç¹ä½¿ç”¨çš„æœç´¢è¯·æ±‚å‡ ä¹ç«‹å³è¿”å›ç»“æœã€‚è¿™é‡Œçš„ç¼“å­˜ï¼Œç§°ä¹‹ä¸º<strong>Request Cache</strong>, å…¨ç§°æ˜¯ Shard Request Cacheï¼Œå³åˆ†ç‰‡çº§è¯·æ±‚ç¼“å­˜ã€‚</p>
<p>ES èƒ½å¤Ÿä¿è¯åœ¨ä½¿ç”¨ä¸ä¸ä½¿ç”¨ Request Cache æƒ…å†µä¸‹çš„æœç´¢ç»“æœä¸€è‡´ï¼Œé‚£ ES æ˜¯å¦‚ä½•ä¿è¯çš„å‘¢ï¼Ÿè¿™å°±è¦é€šè¿‡** Request Cache çš„å¤±æ•ˆæœºåˆ¶<strong>æ¥äº†è§£å•¦ã€‚Request Cache ç¼“å­˜å¤±æ•ˆæ˜¯è‡ªåŠ¨çš„ï¼Œå½“ç´¢å¼• refresh æ—¶å°±ä¼šå¤±æ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ</strong> Request Cache æ˜¯æ¯ 1 ç§’é’Ÿå¤±æ•ˆä¸€æ¬¡**ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰åœ¨åˆ†ç‰‡çš„æ•°æ®å®é™…ä¸Šå‘ç”Ÿäº†å˜åŒ–æ—¶ï¼Œåˆ·æ–°åˆ†ç‰‡ç¼“å­˜æ‰ä¼šå¤±æ•ˆã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä¸€ä¸ªæ–‡æ¡£è¢«ç´¢å¼• åˆ° è¯¥æ–‡æ¡£å˜æˆ Searchable çš„è¿™æ®µæ—¶é—´å†…ï¼Œä¸ç®¡æ˜¯å¦æœ‰è¯·æ±‚å‘½ä¸­ç¼“å­˜è¯¥æ–‡æ¡£éƒ½ä¸ä¼šè¢«è¿”å›ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>index.refresh_interval</code> å‚æ•°æ¥è®¾ç½® refresh çš„åˆ·æ–°æ—¶é—´é—´éš”ï¼Œåˆ·æ–°é—´éš”è¶Šé•¿ï¼Œç¼“å­˜çš„æ•°æ®è¶Šå¤šï¼Œå½“ç¼“å­˜ä¸å¤Ÿçš„æ—¶å€™ï¼Œå°†ä½¿ç”¨LRU æœ€è¿‘æœ€å°‘ä½¿ç”¨ç­–ç•¥åˆ é™¤æ•°æ®ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®å‚æ•° <code>indices.request.cache.expire</code> æŒ‡å®šå¤±æ•ˆæ—¶é—´ï¼ˆå•ä½ä¸ºåˆ†é’Ÿï¼‰ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šæˆ‘ä»¬æ²¡å¿…è¦å»è¿™æ ·åšï¼Œå› ä¸ºç¼“å­˜åœ¨æ¯æ¬¡ç´¢å¼• refresh æ—¶éƒ½ä¼šè‡ªåŠ¨å¤±æ•ˆã€‚</p>
<ul>
<li><strong>Request Cache çš„ä½¿ç”¨</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼ŒRequest Cache æ˜¯å…³é—­çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºæ–°çš„ç´¢å¼•æ—¶å¯ç”¨</span></span><br><span class="line">curl -XPUT æœåŠ¡å™¨ IP:ç«¯å£/ç´¢å¼•å -d <span class="string">'&#123;</span></span><br><span class="line"><span class="string">  "settings": &#123;</span></span><br><span class="line"><span class="string">  "index.requests.cache.enable": true</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥é€šè¿‡åŠ¨æ€å‚æ•°é…ç½®æ¥è¿›è¡Œè®¾ç½®</span></span><br><span class="line">curl -XPUT æœåŠ¡å™¨ IP:ç«¯å£/ç´¢å¼•å/_settings -d <span class="string">'&#123;</span></span><br><span class="line"><span class="string">"index.requests.cache.enable": true</span></span><br><span class="line"><span class="string">&#125;'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯ç¼“å­˜åï¼Œéœ€è¦åœ¨æœç´¢è¯·æ±‚ä¸­åŠ ä¸Š request_cache=true å‚æ•°ï¼Œæ‰èƒ½ä½¿æŸ¥è¯¢è¯·æ±‚è¢«ç¼“å­˜</span></span><br><span class="line">curl -XGET â€˜æœåŠ¡å™¨ IP:ç«¯å£/ç´¢å¼•å/_search?request_cache=<span class="literal">true</span>&amp;pretty<span class="string">' -H '</span>Content-Type: application/json<span class="string">' -d</span></span><br><span class="line"><span class="string">  '</span>&#123;</span><br><span class="line">  <span class="string">"size"</span>: 0,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123; <span class="string">"popular_colors"</span>: &#123;</span><br><span class="line">  <span class="string">"terms"</span>: &#123;</span><br><span class="line">  <span class="string">"field"</span>: <span class="string">"colors"</span></span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;<span class="string">'</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ï¼šå‚æ•° sizeï¼š0 å¿…é¡»å¼ºåˆ¶æŒ‡å®šæ‰èƒ½è¢«ç¼“å­˜ï¼Œå¦åˆ™è¯·æ±‚æ˜¯ä¸ä¼šç¼“å­˜çš„ï¼Œå³ä½¿æ‰‹åŠ¨çš„è®¾ç½® request_cache=true<br>
ç¬¬äºŒï¼šåœ¨ä½¿ç”¨ script è„šæœ¬æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œç”±äºè„šæœ¬çš„æ‰§è¡Œç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼ˆæ¯”å¦‚ä½¿ç”¨random å‡½æ•°æˆ–ä½¿ç”¨äº†å½“å‰æ—¶é—´ä½œä¸ºå‚æ•°ï¼‰ï¼Œä¸€å®šè¦æŒ‡å®š request_cache=false ç¦ç”¨ Request Cache ç¼“å­˜ã€‚</p>
<ul>
<li>Request Cache çš„è®¾ç½®</li>
</ul>
<p>Request Cache ä½œç”¨åŸŸä¸º Nodeï¼Œåœ¨ Node ä¸­çš„ Shard å…±äº«è¿™ä¸ª Cache ç©ºé—´ã€‚é»˜è®¤æœ€å¤§å¤§å°ä¸º JVM å †å†…å­˜çš„ 1ï¼…ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ <code>config/elasticsearch.yml</code> æ–‡ä»¶ä¸­è¿›è¡Œæ›´æ”¹ï¼š<code>indices.requests.cache.size: 1%</code>ã€‚Request Cache æ˜¯ä»¥æŸ¥è¯¢çš„æ•´ä¸ªDSL è¯­å¥åšä¸º key çš„ï¼Œæ‰€ä»¥å¦‚æœè¦å‘½ä¸­ç¼“å­˜ï¼Œé‚£ä¹ˆæŸ¥è¯¢ç”Ÿæˆçš„ DSL ä¸€å®šè¦ä¸€æ ·ï¼Œå³ä½¿ä¿®æ”¹äº†ä¸€ä¸ªå­—ç¬¦æˆ–è€…æ¡ä»¶é¡ºåºï¼Œéƒ½ä¸èƒ½åˆ©ç”¨ç¼“å­˜ï¼Œéœ€è¦é‡æ–°ç”ŸæˆCacheã€‚</p>
<h3 id="1-3-æŸ¥è¯¢ç¼“å­˜">1.3 æŸ¥è¯¢ç¼“å­˜</h3>
<p>è¿™ç§ç¼“å­˜çš„å·¥ä½œæ–¹å¼ä¹Ÿä¸å…¶ä»–ç¼“å­˜æœ‰ç€å¾ˆå¤§çš„ä¸åŒã€‚é¡µç¼“å­˜æ–¹å¼ç¼“å­˜çš„æ•°æ®ä¸å®é™…ä»æŸ¥è¯¢ä¸­è¯»å–çš„æ•°æ®é‡æ— å…³ã€‚å½“ä½¿ç”¨ç±»ä¼¼æŸ¥è¯¢æ—¶ï¼Œåˆ†ç‰‡çº§è¯·æ±‚ç¼“å­˜ä¼šç¼“å­˜æ•°æ®ã€‚æŸ¥è¯¢ç¼“å­˜æ›´ç²¾ç»†äº›ï¼Œå¯ä»¥ç¼“å­˜åœ¨ä¸åŒæŸ¥è¯¢ä¹‹é—´é‡å¤ä½¿ç”¨çš„æ•°æ®ã€‚</p>
<p>Elasticsearch å…·æœ‰ IndicesQueryCache ç±»ã€‚è¿™ä¸ªç±»ä¸ IndicesService çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåœ¨ä¸€èµ·ï¼Œè¿™æ„å‘³ç€å®ƒä¸æ˜¯æŒ‰ç´¢å¼•ï¼Œè€Œæ˜¯æŒ‰èŠ‚ç‚¹çš„ç‰¹æ€§ â€” è¿™æ ·åšæ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºç¼“å­˜æœ¬èº«ä½¿ç”¨äº† Java  å †ã€‚è¿™ä¸ªç´¢å¼•æŸ¥è¯¢ç¼“å­˜å ç”¨ä»¥ä¸‹ä¸¤ä¸ªé…ç½®é€‰é¡¹<code>indices.queries.cache.countï¼šç¼“å­˜æ¡ç›®æ€»æ•°ï¼Œé»˜è®¤ä¸º 10,000ï¼Œindices.queries.cache.sizeï¼šç”¨äºæ­¤ç¼“å­˜çš„ Java å †çš„ç™¾åˆ†æ¯”ï¼Œé»˜è®¤ä¸º 10%</code></p>
<p>æŸ¥è¯¢ç¼“å­˜å·²è¿›å…¥ä¸‹ä¸€ä¸ªç²’åº¦çº§åˆ«ï¼Œå¯ä»¥è·¨æŸ¥è¯¢é‡ç”¨ï¼å‡­å€Ÿå…¶å†…ç½®çš„å¯å‘å¼ç®—æ³•ï¼Œå®ƒåªç¼“å­˜å¤šæ¬¡ä½¿ç”¨çš„ç­›é€‰å™¨ï¼Œè¿˜æ ¹æ®ç­›é€‰å™¨å†³å®šæ˜¯å¦å€¼å¾—ç¼“å­˜ï¼Œæˆ–è€…ç°æœ‰çš„æŸ¥è¯¢æ–¹æ³•æ˜¯å¦è¶³å¤Ÿå¿«ï¼Œ ä»¥é¿å…æµªè´¹ä»»ä½•å †å†…å­˜ã€‚è¿™äº›ä½é›†çš„ç”Ÿå‘½å‘¨æœŸä¸æ®µçš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåœ¨ä¸€èµ·ï¼Œä»¥é˜²æ­¢è¿”å›è¿‡æ—¶çš„æ•°æ®ã€‚ä¸€æ—¦ä½¿ç”¨äº†æ–°æ®µï¼Œå°±éœ€è¦åˆ›å»ºæ–°çš„ä½é›†ã€‚</p>
<p>ç¼“å­˜æ˜¯åŠ å¿«æ£€ç´¢é€Ÿåº¦çš„å”¯ä¸€æ–¹æ³•å—ï¼Ÿ</p>
<ul>
<li>io_uringã€‚è¿™æ˜¯ä¸€ç§åœ¨ Linux ä¸‹ä½¿ç”¨è‡ª Linux 5.1 ä»¥æ¥å‘å¸ƒçš„å®Œæˆé˜Ÿåˆ—è¿›è¡Œå¼‚æ­¥ I/O çš„æ–°æ–¹æ³•ã€‚è¯·æ³¨æ„ï¼Œio_uring ä»å¤„äºå¤§åŠ›å¼€å‘é˜¶æ®µã€‚ä½†æ˜¯ï¼ŒJava ä¸­æœ‰ä¸€äº›é¦–æ¬¡ä½¿ç”¨ io_uring çš„å°è¯•ï¼Œä¾‹å¦‚ nettyã€‚ç®€å•åº”ç”¨ç¨‹åºçš„æ€§èƒ½æµ‹è¯•ç»“æœååˆ†æƒŠäººã€‚æˆ‘æƒ³æˆ‘ä»¬è¿˜å¾—ç­‰ä¸€æ®µæ—¶é—´æ‰èƒ½çœ‹åˆ°å®é™…çš„æ€§èƒ½æ•°æ®ï¼Œå°½ç®¡æˆ‘é¢„è®¡è¿™äº›æ•°æ®ä¹Ÿä¼šæœ‰é‡å¤§å˜åŒ–ã€‚æˆ‘ä»¬å¸Œæœ› JDK å°†æ¥ä¹Ÿèƒ½æä¾›å¯¹è¿™ä¸€åŠŸèƒ½çš„æ”¯æŒã€‚æœ‰ä¸€äº›è®¡åˆ’æ”¯æŒ io_uring ä½œä¸º Project Loom çš„ä¸€éƒ¨åˆ†ï¼Œ è¿™å¯èƒ½ä¼šå°† io_uring å¼•å…¥ JVMã€‚æ›´å¤šçš„ä¼˜åŒ–ï¼Œæ¯”å¦‚èƒ½å¤Ÿé€šè¿‡ madvise() æç¤ºLinux å†…æ ¸çš„è®¿é—®æ¨¡å¼ï¼Œè¿˜å°šæœªå†…ç½®äº JVM ä¸­ã€‚è¿™ä¸ªæç¤ºå¯é˜²æ­¢é¢„è¯»é—®é¢˜ï¼Œå³å†…æ ¸å°è¯•è¯»å–çš„æ•°æ®ä¼šæ¯”é¢„æœŸä¸‹æ¬¡è¯»å–çš„æ•°æ®è¦å¤šï¼Œè¿™åœ¨éœ€è¦éšæœºè®¿é—®æ—¶æ˜¯æ— ç”¨çš„ã€‚</li>
<li>Lucene å¼€å‘äººå‘˜ä¸€å¦‚æ—¢å¾€åœ°å¿™äºä»ä»»ä½•ç³»ç»Ÿä¸­è·å¾—æœ€å¤§çš„æ”¶ç›Šã€‚ç›®å‰å·²ç»æœ‰ä½¿ç”¨Foreign Memory API é‡å†™ Lucene MMapDirectory çš„åˆç¨¿ï¼Œè¿™å¯èƒ½ä¼šæˆä¸º Java 16 ä¸­çš„ä¸€ä¸ªé¢„è§ˆåŠŸèƒ½ã€‚ç„¶è€Œï¼Œè¿™æ ·åšå¹¶ä¸æ˜¯å‡ºäºæ€§èƒ½åŸå› ï¼Œè€Œæ˜¯ä¸ºäº†å…‹æœå½“å‰ MMap å®ç°çš„æŸäº›é™åˆ¶</li>
<li>Luceneæœ€è¿‘çš„å¦ä¸€ä¸ªå˜åŒ–æ˜¯é€šè¿‡åœ¨FileChannel ç±»ä¸­ä½¿ç”¨ç›´æ¥i/o (O_DIRECT)æ¥æ‘†è„±åŸç”Ÿæ‰©å±•ã€‚è¿™æ„å‘³ç€å†™å…¥æ•°æ®å°†ä¸ä¼šè®©é¡µç¼“å­˜å‡ºç°â€œæŠ–åŠ¨â€ç°è±¡ï¼Œè¿™å°†æ˜¯ Lucene 9 çš„åŠŸèƒ½</li>
</ul>
<h2 id="2ã€æ€§èƒ½ä¼˜åŒ–ä¹‹å‡å°‘å†…å­˜å †">2ã€æ€§èƒ½ä¼˜åŒ–ä¹‹å‡å°‘å†…å­˜å †</h2>
<p>ç”±äº Elasticsearch ç”¨æˆ·ä¸æ–­çªç ´åœ¨ Elasticsearch èŠ‚ç‚¹ä¸Šå­˜å‚¨çš„æ•°æ®é‡çš„æé™ï¼Œæ‰€ä»¥ä»–ä»¬æœ‰æ—¶ä¼šåœ¨è€—å°½ç£ç›˜ç©ºé—´ä¹‹å‰å°±å°†å †å†…å­˜ç”¨å®Œäº†ã€‚å¯¹äºè¿™äº›ç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜éš¾å…è®©ä»–ä»¬æ²®ä¸§ï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ‹Ÿåˆå°½å¯èƒ½å¤šçš„æ•°æ®é€šå¸¸æ˜¯é™ä½æˆæœ¬çš„é‡è¦æ‰‹æ®µã€‚</p>
<p>ä½†ä¸ºä»€ä¹ˆ Elasticsearch éœ€è¦å †å†…å­˜æ¥å­˜å‚¨æ•°æ®å‘¢ï¼Ÿä¸ºä»€ä¹ˆå®ƒä¸èƒ½åªç”¨ç£ç›˜ç©ºé—´å‘¢ï¼Ÿè¿™å…¶ä¸­æœ‰å‡ ä¸ªåŸå› ï¼Œä½†æœ€ä¸»è¦çš„ä¸€ä¸ªæ˜¯ï¼ŒLucene éœ€è¦åœ¨å†…å­˜ä¸­å­˜å‚¨ä¸€äº›ä¿¡æ¯ï¼Œä»¥ä¾¿çŸ¥é“åœ¨ç£ç›˜çš„ä»€ä¹ˆä½ç½®è¿›è¡ŒæŸ¥æ‰¾ã€‚ä¾‹å¦‚ï¼ŒLucene çš„å€’æ’ç´¢å¼•ç”±æœ¯è¯­å­—å…¸å’Œæœ¯è¯­ç´¢å¼•ç»„æˆï¼Œæœ¯è¯­å­—å…¸å°†æœ¯è¯­æŒ‰æ’åºé¡ºåºå½’å…¥ç£ç›˜ä¸Šçš„åŒºå—ï¼Œæœ¯è¯­ç´¢å¼•ç”¨äºå¿«é€ŸæŸ¥æ‰¾æœ¯è¯­å­—å…¸ã€‚è¯¥æœ¯è¯­ç´¢å¼•å°†æœ¯è¯­å‰ç¼€ä¸ç£ç›˜ä¸ŠåŒºå—ï¼ˆåŒ…å«å…·æœ‰è¯¥å‰ç¼€çš„æœ¯è¯­ï¼‰èµ·å§‹ä½ç½®çš„åç§»é‡å»ºç«‹æ˜ å°„ã€‚æœ¯è¯­å­—å…¸åœ¨ç£ç›˜ä¸Šï¼Œä½†æ˜¯æœ¯è¯­ç´¢å¼•ç›´åˆ°æœ€è¿‘è¿˜åœ¨å †ä¸Šã€‚</p>
<p>ç´¢å¼•éœ€è¦å¤šå°‘å†…å­˜ï¼Ÿé€šå¸¸æƒ…å†µä¸‹ï¼Œ<strong>æ¯ GB ç´¢å¼•éœ€è¦å‡  MB å†…å­˜</strong>ã€‚è¿™å¹¶ä¸ç®—å¤šï¼Œä½†éšç€ç”¨æˆ·åœ¨èŠ‚ç‚¹ä¸Šå®‰è£… TB æ•°è¶Šæ¥è¶Šå¤§çš„ç£ç›˜ï¼Œç´¢å¼•å¾ˆå¿«å°±éœ€è¦ 10-20 GB çš„å †å†…å­˜æ¥å­˜å‚¨è¿™äº› TB é‡çº§çš„ç´¢å¼•ã€‚<strong>é‰´äº Elastic çš„å»ºè®®ï¼Œä¸è¦è¶…è¿‡ 30 GB</strong>ï¼Œä¸ç„¶å°±æ²¡æœ‰ç»™èšåˆç­‰å…¶ä»–å †å†…å­˜æ¶ˆè€—è€…ç•™ä¸‹å¤ªå¤šç©ºé—´ï¼Œè€Œä¸”ï¼Œå¦‚æœ JVM æ²¡æœ‰ä¸ºé›†ç¾¤ç®¡ç†æ“ä½œç•™å‡ºè¶³å¤Ÿçš„ç©ºé—´ï¼Œå°±ä¼šå¯¼è‡´ç¨³å®šæ€§é—®é¢˜ã€‚ä½¿ç”¨ **7.7 **ç‰ˆæœ¬å‡å°‘ **Elasticsearch **å †ï¼</p>
<h2 id="3ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹å†»ç»“å±‚å’Œå¯æœç´¢å¿«ç…§">3ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹å†»ç»“å±‚å’Œå¯æœç´¢å¿«ç…§</h2>
<p>Elasticsearch 7.12 ç‰ˆä¸­æ¨å‡ºäº†å†»ç»“å±‚çš„æŠ€æœ¯é¢„è§ˆç‰ˆï¼Œè®©æ‚¨èƒ½å¤Ÿå°†è®¡ç®—ä¸å­˜å‚¨å®Œå…¨åˆ†ç¦»ï¼Œ å¹¶ç›´æ¥åœ¨å¯¹è±¡å­˜å‚¨ï¼ˆå¦‚ AWS S3ã€Microsoft Azure Storage å’Œ Google Cloud Storageï¼‰ä¸­æœç´¢æ•°æ®ã€‚ä½œä¸ºæˆ‘ä»¬æ•°æ®å±‚æ—…ç¨‹çš„ä¸‹ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ï¼Œå†»ç»“å±‚å®ç°ä»¥è¶…ä½æˆæœ¬é•¿æœŸå­˜å‚¨å¤§é‡æ•°æ®çš„åŒæ—¶ï¼Œè¿˜èƒ½ä¿æŒæ•°æ®å¤„äºå®Œå…¨æ´»åŠ¨å’Œå¯æœç´¢çŠ¶æ€ï¼Œæ˜¾è‘—æ‰©å±•äº†æ‚¨çš„æ•°æ®è¦†ç›–èŒƒå›´ã€‚</p>
<p>é•¿æœŸä»¥æ¥ï¼Œæˆ‘ä»¬ä¸€ç›´æ”¯æŒé€šè¿‡å¤šä¸ªæ•°æ®å±‚æ¥è¿›è¡Œæ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š<strong>çƒ­å±‚ç”¨äºæä¾›è¾ƒé«˜çš„å¤„ç†é€Ÿåº¦ï¼Œæ¸©å±‚åˆ™ç”¨äºé™ä½æˆæœ¬ï¼Œä½†æ€§èƒ½ä¹Ÿè¾ƒä½</strong>ã€‚ä¸¤è€…éƒ½åˆ©ç”¨æœ¬åœ°ç¡¬ä»¶æ¥å­˜å‚¨ä¸»æ•°æ®å’Œå†—ä½™å‰¯æœ¬ã€‚æœ€è¿‘ï¼Œæˆ‘ä»¬å¼•å…¥äº†å†·å±‚ï¼Œé€šè¿‡æ¶ˆé™¤åœ¨æœ¬åœ°å­˜å‚¨å†—ä½™å‰¯æœ¬çš„éœ€è¦ï¼Œæ‚¨å¯ä»¥åœ¨ç›¸åŒæ•°é‡çš„ç¡¬ä»¶ä¸Šæœ€å¤šå­˜å‚¨ä¸¤å€äºçƒ­å±‚çš„æ•°æ®ã€‚å°½ç®¡ä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼Œä¸»æ•°æ®ä»ç„¶å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä½†å†·å±‚ä¸­çš„ç´¢å¼•ç”±å­˜å‚¨åœ¨å¯¹è±¡å­˜å‚¨ä¸­çš„å¯æœç´¢å¿«ç…§æä¾›æ”¯æŒï¼Œä»¥å®ç°å†—ä½™ã€‚</p>
<p><strong>å†»ç»“å±‚</strong>æ›´è¿›ä¸€æ­¥ï¼Œå®Œå…¨ä¸éœ€è¦åœ¨æœ¬åœ°å­˜å‚¨ä»»ä½•æ•°æ®ã€‚ç›¸åï¼Œå®ƒä¼šä½¿ç”¨å¯æœç´¢å¿«ç…§æ¥ç›´æ¥æœç´¢å­˜å‚¨åœ¨å¯¹è±¡å­˜å‚¨ä¸­çš„æ•°æ®ï¼Œè€Œæ— éœ€å…ˆå°†å…¶è§£å†»ã€‚æœ¬åœ°ç¼“å­˜å­˜å‚¨æœ€è¿‘æŸ¥è¯¢çš„æ•°æ®ï¼Œä»¥ä¾¿åœ¨è¿›è¡Œé‡å¤æœç´¢æ—¶æä¾›æœ€ä½³æ€§èƒ½ã€‚å› æ­¤ï¼Œå­˜å‚¨æˆæœ¬æ˜¾è‘—ä¸‹é™ï¼šä¸çƒ­å±‚æˆ–æ¸©å±‚ç›¸æ¯”ï¼Œæœ€å¤šå¯é™ä½90%ï¼›ä¸å†·å±‚ç›¸æ¯”ï¼Œæœ€å¤šå¯é™ä½ 80%ã€‚æ•°æ®çš„å…¨è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç°å·²æˆä¸ºå®Œæ•´ä½“ï¼šä»çƒ­åˆ°æ¸©åˆ°å†·ï¼Œç„¶åå†åˆ°å†»ç»“ï¼ŒåŒæ—¶è¿˜å¯ç¡®ä¿ä»¥å°½å¯èƒ½ä½çš„å­˜å‚¨æˆæœ¬è·å¾—æ‰€éœ€çš„è®¿é—®å’Œæœç´¢æ€§èƒ½ã€‚</p>
<p><strong>å†»ç»“å±‚åˆ©ç”¨å¯æœç´¢å¿«ç…§å°†è®¡ç®—ä¸å­˜å‚¨å®Œå…¨åˆ†ç¦»</strong>ã€‚åœ¨æ ¹æ®ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç† (ILM) ç­–ç•¥å°†æ•°æ®ä»æ¸©å±‚æˆ–å†·å±‚è¿ç§»åˆ°å†»ç»“å±‚æ—¶ï¼Œæœ¬åœ°èŠ‚ç‚¹ä¸Šçš„ç´¢å¼•å°†è¿ç§»åˆ° S3 æˆ–æ‚¨é€‰æ‹©çš„å¯¹è±¡å­˜å‚¨ä¸­ã€‚å†·å±‚å°†ç´¢å¼•è¿ç§»åˆ°å¯¹è±¡å­˜å‚¨ï¼Œä½†å®ƒä»ç„¶åœ¨æœ¬åœ°èŠ‚ç‚¹ä¸Šä¿ç•™æ•°æ®çš„å•ä¸ªå®Œæ•´å‰¯æœ¬ï¼Œä»¥ç¡®ä¿æä¾›å¿«é€Ÿè€Œä¸€è‡´çš„æœç´¢ä½“éªŒã€‚å¦ä¸€æ–¹é¢ï¼Œå†»ç»“å±‚å®Œå…¨æ¶ˆé™¤äº†æœ¬åœ°å‰¯æœ¬ï¼Œè€Œæ˜¯ç›´æ¥æœç´¢å¯¹è±¡å­˜å‚¨ä¸­çš„æ•°æ®ã€‚å®ƒä¼šä¸ºæœ€è¿‘æŸ¥è¯¢çš„æ•°æ®æ„å»ºæœ¬åœ°ç¼“å­˜ï¼Œä»¥ä¾¿åŠ å¿«é‡å¤æœç´¢çš„é€Ÿåº¦ï¼Œä½†ç¼“å­˜å¤§å°åªæ˜¯å­˜å‚¨åœ¨å†»ç»“å±‚ä¸­çš„å®Œæ•´æ•°æ®å¤§å°çš„ä¸€å°éƒ¨åˆ†ã€‚</p>
<p>å¯¹äºå…¸å‹çš„ 10% æœ¬åœ°ç¼“å­˜å¤§å°ï¼Œè¿™æ„å‘³ç€æ‚¨åªéœ€å°‘æ•°å‡ ä¸ªæœ¬åœ°å±‚èŠ‚ç‚¹å³å¯å¤„ç†æ•°ç™¾TB çš„å†»ç»“å±‚æ•°æ®ã€‚ä¸‹é¢ç®€å•æ¯”è¾ƒä¸€ä¸‹ï¼šå¦‚æœ RAM ä¸º 64 GB çš„å…¸å‹æ¸©å±‚èŠ‚ç‚¹å¯ç®¡ç† 10 TBï¼Œå†·å±‚èŠ‚ç‚¹å°†èƒ½å¤Ÿå¤„ç†å¤§çº¦ä¸¤å€äºæ­¤çš„ 20 TBï¼Œè€Œå†»ç»“å±‚èŠ‚ç‚¹å°†è·ƒå‡è‡³ 100 TBã€‚è¿™ç›¸å½“äº 1:1500 çš„ RAM ä¸å­˜å‚¨æ¯”ç‡ï¼Œè¿™è¿˜åªæ˜¯ä¸€ä¸ªä¿å®ˆçš„ä¼°è®¡ã€‚</p>
<h2 id="4ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹åŸç”ŸçŸ¢é‡æœç´¢">4ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹åŸç”ŸçŸ¢é‡æœç´¢</h2>
<p>Elasticsearch 8.0 ç‰ˆå¼•å…¥äº†ä¸€æ•´å¥—åŸç”ŸçŸ¢é‡æœç´¢åŠŸèƒ½ï¼Œè®©å®¢æˆ·å’Œå‘˜å·¥èƒ½å¤Ÿä½¿ç”¨ä»–ä»¬è‡ªå·±çš„æ–‡å­—å’Œè¯­è¨€æ¥æœç´¢å¹¶æ”¶åˆ°é«˜åº¦ç›¸å…³çš„ç»“æœã€‚æ—©åœ¨ Elasticsearch 7.0 ç‰ˆä¸­ï¼Œæˆ‘ä»¬å°±é’ˆå¯¹é«˜ç»´çŸ¢é‡å¼•å…¥äº†å­—æ®µç±»å‹ã€‚åœ¨ Elasticsearch 7.3 å’Œ Elasticsearch 7.4 ç‰ˆä¸­ï¼Œå¼•å…¥äº†å¯¹çŸ¢é‡ç›¸ä¼¼å‡½æ•°çš„æ”¯æŒã€‚åœ¨ Elasticsearch 8.0 ç‰ˆä¸­ï¼Œå°†å¯¹è‡ªç„¶è¯­è¨€å¤„ç† (NLP) æ¨¡å‹çš„åŸç”Ÿæ”¯æŒç›´æ¥å¼•å…¥äº† Elasticsearchï¼Œè®©çŸ¢é‡æœç´¢åŠŸèƒ½æ›´å®¹æ˜“å®ç°ã€‚æ­¤å¤–ï¼ŒElasticsearch 8.0 ç‰ˆè¿˜åŒ…å«äº†å¯¹è¿‘ä¼¼æœ€è¿‘é‚» (ANN) æœç´¢çš„åŸç”Ÿæ”¯æŒï¼Œå› æ­¤å¯ä»¥å¿«é€Ÿä¸”å¤§è§„æ¨¡åœ°æ¯”è¾ƒåŸºäºçŸ¢é‡çš„æŸ¥è¯¢ä¸åŸºäºçŸ¢é‡çš„æ–‡æ¡£è¯­æ–™åº“ã€‚</p>
<p>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNatural Language Processingï¼‰æ˜¯è®¡ç®—ç§‘å­¦é¢†åŸŸä¸äººå·¥æ™ºèƒ½é¢†åŸŸä¸­çš„ä¸€ä¸ªé‡è¦æ–¹å‘ã€‚å®ƒç ”ç©¶èƒ½å®ç°äººä¸è®¡ç®—æœºä¹‹é—´ç”¨è‡ªç„¶è¯­è¨€è¿›è¡Œæœ‰æ•ˆé€šä¿¡çš„å„ç§ç†è®ºå’Œæ–¹æ³•ã€‚è‡ªç„¶è¯­è¨€å¤„ç†æ˜¯ä¸€é—¨èè¯­è¨€å­¦ã€è®¡ç®—æœºç§‘å­¦ã€æ•°å­¦äºä¸€ä½“çš„ç§‘å­¦ã€‚å› æ­¤ï¼Œè¿™ä¸€é¢†åŸŸçš„ç ”ç©¶å°†æ¶‰åŠè‡ªç„¶è¯­è¨€ï¼Œå³äººä»¬æ—¥å¸¸ä½¿ç”¨çš„è¯­è¨€ï¼Œæ‰€ä»¥å®ƒä¸è¯­è¨€å­¦çš„ç ”ç©¶æœ‰ç€å¯†åˆ‡çš„è”ç³»ï¼Œä½†åˆæœ‰é‡è¦çš„åŒºåˆ«ã€‚è‡ªç„¶è¯­è¨€å¤„ç†å¹¶ä¸æ˜¯ä¸€èˆ¬åœ°ç ”ç©¶è‡ªç„¶è¯­è¨€ï¼Œè€Œåœ¨äºç ”åˆ¶èƒ½æœ‰æ•ˆåœ°å®ç°è‡ªç„¶è¯­è¨€é€šä¿¡çš„è®¡ç®—æœºç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯å…¶ä¸­çš„è½¯ä»¶ç³»ç»Ÿã€‚å› è€Œå®ƒæ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€éƒ¨åˆ†</p>
<ul>
<li>NLP çš„ç›®æ ‡</li>
</ul>
<p>NLP çš„ç›®æ ‡æ˜¯è®©è®¡ç®—æœºåœ¨ç†è§£è¯­è¨€æ–¹é¢åƒäººç±»ä¸€æ ·æ™ºèƒ½ï¼Œæœ€ç»ˆçš„ç›®æ ‡æ˜¯å¼¥è¡¥äººç±»äº¤æµï¼ˆè‡ªç„¶è¯­è¨€ï¼‰å’Œè®¡ç®—æœºç†è§£ï¼ˆæœºå™¨è¯­è¨€ï¼‰ä¹‹é—´çš„å·®è·ã€‚</p>
<ul>
<li>ä¸ºä»€ä¹ˆéœ€è¦ NLP</li>
</ul>
<p>æœ‰äº† NLPï¼Œå°±å¯èƒ½å®Œæˆè‡ªåŠ¨è¯­éŸ³ã€è‡ªåŠ¨æ–‡æœ¬çš„ç¼–å†™ç­‰ä»»åŠ¡ã€‚è®©æˆ‘ä»¬ä»å¤§é‡çš„æ•°æ®ä¸­è§£æ”¾å‡ºæ¥ï¼Œè®©è®¡ç®—æœºå»æ‰§è¡Œã€‚è¿™äº›ä»»åŠ¡åŒ…æ‹¬è‡ªåŠ¨ç”Ÿæˆç»™å®šæ–‡æœ¬çš„æ‘˜è¦ã€æœºå™¨ç¿»è¯‘åŠå…¶ä»–çš„ä»»åŠ¡ã€‚</p>
<h2 id="5ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹æœç´¢èšåˆ">5ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹æœç´¢èšåˆ</h2>
<p>Elasticsearch 7.13 ç‰ˆæ–°å¢åŠŸèƒ½å¯ä»¥å®ç°æ›´å¿«çš„èšåˆã€‚åœ¨ date_histogram èšåˆæ–¹é¢ï¼Œ Elasticsearch é€šè¿‡åœ¨å†…éƒ¨å°†å…¶é‡å†™ä¸º filters èšåˆï¼Œè·å¾—äº†å·¨å¤§çš„æ€§èƒ½æå‡ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå˜æˆäº†ä¸€ä¸ªåŒ…å« range æŸ¥è¯¢çš„ filters èšåˆã€‚è¿™å°±æ˜¯Elasticsearch ä¼˜åŒ–çš„å†…å®¹ â€” range æŸ¥è¯¢ã€‚</p>
<p>ä¸ºäº†åŠ å¿« terms å’Œ date_histogram è¿™ä¸¤ä¸ªèšåˆçš„é€Ÿåº¦ã€‚å¯ä»¥å°†å®ƒä»¬ä½œä¸º filters è¿è¡Œï¼Œ ç„¶ååŠ å¿« filters çš„èšåˆé€Ÿåº¦ã€‚</p>
<hr>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://www.bilibili.com/video/BV1hh411D7sb?p=63" target="_blank" rel="noopener" title="https://www.bilibili.com/video/BV1hh411D7sb?p=63">https://www.bilibili.com/video/BV1hh411D7sb?p=63</a></p>

      

      


      
        <div class="page-reward">
          <a href="javascript:;" class="page-reward-btn tooltip-top">
            <div class="tooltip tooltip-east">
            <span class="tooltip-item">
              èµ
            </span>
            <span class="tooltip-content">
              <span class="tooltip-text">
                <span class="tooltip-inner">
                  <p class="reward-p"><i class="icon icon-quo-left"></i>è°¢è°¢ä½ è¯·æˆ‘åƒç³–æœ<i class="icon icon-quo-right"></i></p>
                  <div class="reward-box">
                    
                    <div class="reward-box-item">
                      <img class="reward-img" src="/img/alipay.png">
                      <span class="reward-type">æ”¯ä»˜å®</span>
                    </div>
                    
                    
                  </div>
                </span>
              </span>
            </span>
          </div>
          </a>
        </div>
      
    </div>

    <!-- æ·»åŠ æœ¬æ–‡ç»“æŸæ ‡è®°-->
    
    <div style="text-align:center;color: #00BFFF;font-size:14px;">
         -------------æœ¬æ–‡ç»“æŸ^-^æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------
         </div>
    
    <!-- æ·»åŠ å®Œæˆ -->


      <!-- ã€Šæ·»åŠ ç‰ˆæƒå£°æ˜ -->
      
          <!-- ã€Šæ·»åŠ ç‰ˆæƒå£°æ˜ -->
<!--æ·»åŠ ç‰ˆæƒå£°æ˜https://github.com/JoeyBling/hexo-theme-yilia-plus/commit/c1215e132f6d5621c5fea83d3c4f7ccbcca074a3-->


<!-- #ç‰ˆæƒåŸºç¡€è®¾å®šï¼š0-å…³é—­å£°æ˜ï¼› 1-æ–‡ç« å¯¹åº”çš„mdæ–‡ä»¶é‡Œæœ‰declare: trueå±æ€§ï¼Œæ‰æœ‰ç‰ˆæƒå£°æ˜ï¼› 2-æ‰€æœ‰æ–‡ç« å‡æœ‰ç‰ˆæƒå£°æ˜ -->

  <div class="declare">
    <strong class="author">æœ¬æ–‡ä½œè€…ï¼š</strong>
    
      Shawn
    
    <br>
    <strong class="create-time">å‘å¸ƒæ—¶é—´ï¼š</strong>
    2023-04-07
    <br>
    <strong class="update-time">æœ€åæ›´æ–°ï¼š</strong>
    2023-04-07
    <br>
    <strong class="article-titles">æœ¬æ–‡æ ‡é¢˜ï¼š</strong>
    <a href="https://blog.shawncoding.top/posts/6b517eb9.html" title="Elasticsearch8.xå­¦ä¹ ç¬”è®°" target="_blank">Elasticsearch8.xå­¦ä¹ ç¬”è®°</a>
    <br>
    <strong class="article-url">æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://blog.shawncoding.top/posts/6b517eb9.html" title="Elasticsearch8.xå­¦ä¹ ç¬”è®°" target="_blank">https://blog.shawncoding.top/posts/6b517eb9.html</a>
    <br>
    <strong class="copyright">ç‰ˆæƒå£°æ˜ï¼š</strong>
    æœ¬ä½œå“é‡‡ç”¨
    <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®">CC BY-NC-SA 4.0</a>
    è®¸å¯åè®®è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
    
      <br>
      <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"/></a>
    
  </div>

<!-- æ·»åŠ ç‰ˆæƒå£°æ˜ã€‹ -->
      
      <!-- æ·»åŠ ç‰ˆæƒå£°æ˜ã€‹ -->

    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">ä¸­é—´ä»¶</a>
        		</li>
      		
		</ul>
	</div>

      
      <!-- æ–‡æœ«è®¿é—®é‡ç»Ÿè®¡ï¼ˆå¼€å§‹ï¼‰ -->
      <!--<span id="busuanzi_container_page_pv">
          |é˜…è¯»é‡:<span id="busuanzi_value_page_pv"></span>æ¬¡
      </span>-->
      <!-- æ–‡æœ«è®¿é—®é‡ç»Ÿè®¡ï¼ˆç»“æŸï¼‰ -->

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/Java//" class="article-tag-list-link color5">Java</a>
        		</li>
      		
		</ul>
	</div>


     

      
        
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div class="wx-qrcode">
      <img src="//pan.baidu.com/share/qrcode?url=https://blog.shawncoding.top/posts/6b517eb9.html" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
    </div>
</div>

<div class="mask js-mask"></div>
      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/posts/db8c3dcd.html" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          iptablesé˜²ç«å¢™è¯¦è§£
        
      </div>
    </a>
  
  
    <a href="/posts/4f9b313c.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">è¯­é›€æ‰¹é‡å¯¼å‡ºä¸å›¾ç‰‡ä¸‹è½½</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>


<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
        <div class="toc-container tooltip-left">
            <i class="icon-font icon-category"></i>
            <div class="tooltip tooltip-east">
                <span class="tooltip-item">
                </span>
                <span class="tooltip-content">
                    <div class="toc-article">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-number">1.</span> <span class="toc-text">ä¸€ã€Elasticsearch8.xæ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1ã€Elasticsearch-æ–°ç‰¹æ€§"><span class="toc-number">1.1.</span> <span class="toc-text">1ã€Elasticsearch æ–°ç‰¹æ€§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2ã€8-xä¸7-xçš„å¯¹æ¯”"><span class="toc-number">1.2.</span> <span class="toc-text">2ã€8.xä¸7.xçš„å¯¹æ¯”</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-number">2.</span> <span class="toc-text">äºŒã€Elasticsearch å®‰è£…ä¸ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1ã€Elasticsearch-é›†ç¾¤å®‰è£…"><span class="toc-number">2.1.</span> <span class="toc-text">1ã€Elasticsearch é›†ç¾¤å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-ESä¸‹è½½ä¸é›†ç¾¤è§„åˆ’"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.1 ESä¸‹è½½ä¸é›†ç¾¤è§„åˆ’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-é…ç½®ç¯å¢ƒ"><span class="toc-number">2.1.2.</span> <span class="toc-text">1.2 é…ç½®ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-ä¿®æ”¹é…ç½®æ–‡ä»¶"><span class="toc-number">2.1.3.</span> <span class="toc-text">1.3 ä¿®æ”¹é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-å¯åŠ¨ES"><span class="toc-number">2.1.4.</span> <span class="toc-text">1.4 å¯åŠ¨ES</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-å®‰è£…å…¶ä»–ç»“ç‚¹"><span class="toc-number">2.1.5.</span> <span class="toc-text">1.5 å®‰è£…å…¶ä»–ç»“ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-é—®é¢˜è§£å†³"><span class="toc-number">2.1.6.</span> <span class="toc-text">1.6 é—®é¢˜è§£å†³</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2ã€Kibana-å®‰è£…"><span class="toc-number">2.2.</span> <span class="toc-text">2ã€Kibana å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-ä¸‹è½½"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.1 ä¸‹è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-é…ç½®ç¯å¢ƒ"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2 é…ç½®ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-ä¿®æ”¹é…ç½®æ–‡ä»¶"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.3 ä¿®æ”¹é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-å¯åŠ¨"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.4 å¯åŠ¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-number">3.</span> <span class="toc-text">ä¸‰ã€Elasticsearch åŸºç¡€åŠŸèƒ½</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1ã€ç´¢å¼•æ“ä½œ"><span class="toc-number">3.1.</span> <span class="toc-text">1ã€ç´¢å¼•æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2ã€æ–‡æ¡£æ“ä½œ"><span class="toc-number">3.2.</span> <span class="toc-text">2ã€æ–‡æ¡£æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3ã€æœç´¢"><span class="toc-number">3.3.</span> <span class="toc-text">3ã€æœç´¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-æ•°æ®æœç´¢"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.1 æ•°æ®æœç´¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-èšåˆæœç´¢"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.2 èšåˆæœç´¢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4ã€ç´¢å¼•æ¨¡æ¿"><span class="toc-number">3.4.</span> <span class="toc-text">4ã€ç´¢å¼•æ¨¡æ¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5ã€ä¸­æ–‡åˆ†è¯"><span class="toc-number">3.5.</span> <span class="toc-text">5ã€ä¸­æ–‡åˆ†è¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-ä½¿ç”¨IKåˆ†è¯å™¨"><span class="toc-number">3.5.1.</span> <span class="toc-text">5.1 ä½¿ç”¨IKåˆ†è¯å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-è‡ªå®šä¹‰åˆ†è¯æ•ˆæœ"><span class="toc-number">3.5.2.</span> <span class="toc-text">5.2 è‡ªå®šä¹‰åˆ†è¯æ•ˆæœ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6ã€æ–‡æ¡£å¾—åˆ†"><span class="toc-number">3.6.</span> <span class="toc-text">6ã€æ–‡æ¡£å¾—åˆ†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-æ‰“åˆ†æœºåˆ¶ä¸¾ä¾‹"><span class="toc-number">3.6.1.</span> <span class="toc-text">6.1 æ‰“åˆ†æœºåˆ¶ä¸¾ä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-æ‰“åˆ†æœºåˆ¶è¯¦è§£"><span class="toc-number">3.6.2.</span> <span class="toc-text">6.2 æ‰“åˆ†æœºåˆ¶è¯¦è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-ä¿®æ”¹æŸ¥è¯¢é¡ºåº"><span class="toc-number">3.6.3.</span> <span class="toc-text">6.3 ä¿®æ”¹æŸ¥è¯¢é¡ºåº</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-number">4.</span> <span class="toc-text">å››ã€Elasticsearchè¿›é˜¶åŠŸèƒ½</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1ã€Java-API-æ“ä½œ"><span class="toc-number">4.1.</span> <span class="toc-text">1ã€Java API æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-å¢åŠ ä¾èµ–å…³ç³»"><span class="toc-number">4.1.1.</span> <span class="toc-text">1.1 å¢åŠ ä¾èµ–å…³ç³»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-è·å–å®¢æˆ·ç«¯å¯¹è±¡"><span class="toc-number">4.1.2.</span> <span class="toc-text">1.2 è·å–å®¢æˆ·ç«¯å¯¹è±¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-ç´¢å¼•æ“ä½œ"><span class="toc-number">4.1.3.</span> <span class="toc-text">1.3 ç´¢å¼•æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-æ–‡æ¡£æ“ä½œ"><span class="toc-number">4.1.4.</span> <span class="toc-text">1.4 æ–‡æ¡£æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-æ–‡æ¡£æŸ¥è¯¢"><span class="toc-number">4.1.5.</span> <span class="toc-text">1.5 æ–‡æ¡£æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-å®¢æˆ·ç«¯å¼‚æ­¥æ“ä½œ"><span class="toc-number">4.1.6.</span> <span class="toc-text">1.6 å®¢æˆ·ç«¯å¼‚æ­¥æ“ä½œ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2ã€EQLæ“ä½œ"><span class="toc-number">4.2.</span> <span class="toc-text">2ã€EQLæ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-åŸºç¡€è¯­æ³•"><span class="toc-number">4.2.1.</span> <span class="toc-text">2.1 åŸºç¡€è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-å®‰å…¨æ£€æµ‹"><span class="toc-number">4.2.2.</span> <span class="toc-text">2.2 å®‰å…¨æ£€æµ‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3ã€SQLæ“ä½œ"><span class="toc-number">4.3.</span> <span class="toc-text">3ã€SQLæ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-æ¦‚è¿°"><span class="toc-number">4.3.1.</span> <span class="toc-text">3.1 æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-SQLå’ŒElasticsearchå¯¹åº”å…³ç³»"><span class="toc-number">4.3.2.</span> <span class="toc-text">3.2 SQLå’ŒElasticsearchå¯¹åº”å…³ç³»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-æ•°æ®å‡†å¤‡ä¸æ¡ä»¶æŸ¥è¯¢"><span class="toc-number">4.3.3.</span> <span class="toc-text">3.3 æ•°æ®å‡†å¤‡ä¸æ¡ä»¶æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-SQLä¸DSLæ··åˆæŸ¥è¯¢"><span class="toc-number">4.3.4.</span> <span class="toc-text">3.4 SQLä¸DSLæ··åˆæŸ¥è¯¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-å¸¸ç”¨SQlæ“ä½œ"><span class="toc-number">4.3.5.</span> <span class="toc-text">3.5 å¸¸ç”¨SQlæ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-åŸºç¡€èšåˆæ“ä½œ"><span class="toc-number">4.3.6.</span> <span class="toc-text">3.6 åŸºç¡€èšåˆæ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-SQL-å®¢æˆ·ç«¯-DataGrip"><span class="toc-number">4.3.7.</span> <span class="toc-text">3.7 SQL å®¢æˆ·ç«¯ DataGrip</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4ã€è‡ªç„¶è¯­è¨€å¤„ç†-NLP"><span class="toc-number">4.4.</span> <span class="toc-text">4ã€è‡ªç„¶è¯­è¨€å¤„ç† NLP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-ç®€ä»‹"><span class="toc-number">4.4.1.</span> <span class="toc-text">4.1 ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-Elasticsearch-ä¸­çš„è‡ªç„¶è¯­è¨€å¤„ç†"><span class="toc-number">4.4.2.</span> <span class="toc-text">4.2 Elasticsearch ä¸­çš„è‡ªç„¶è¯­è¨€å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-NLPæ¼”ç¤º"><span class="toc-number">4.4.3.</span> <span class="toc-text">4.3 NLPæ¼”ç¤º</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-number">5.</span> <span class="toc-text">äº”ã€Elasticsearch ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1ã€æ€§èƒ½ä¼˜åŒ–ä¹‹ç¼“å­˜"><span class="toc-number">5.1.</span> <span class="toc-text">1ã€æ€§èƒ½ä¼˜åŒ–ä¹‹ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-é¡µç¼“å­˜"><span class="toc-number">5.1.1.</span> <span class="toc-text">1.1 é¡µç¼“å­˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-åˆ†ç‰‡çº§è¯·æ±‚ç¼“å­˜"><span class="toc-number">5.1.2.</span> <span class="toc-text">1.2 åˆ†ç‰‡çº§è¯·æ±‚ç¼“å­˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-æŸ¥è¯¢ç¼“å­˜"><span class="toc-number">5.1.3.</span> <span class="toc-text">1.3 æŸ¥è¯¢ç¼“å­˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2ã€æ€§èƒ½ä¼˜åŒ–ä¹‹å‡å°‘å†…å­˜å †"><span class="toc-number">5.2.</span> <span class="toc-text">2ã€æ€§èƒ½ä¼˜åŒ–ä¹‹å‡å°‘å†…å­˜å †</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹å†»ç»“å±‚å’Œå¯æœç´¢å¿«ç…§"><span class="toc-number">5.3.</span> <span class="toc-text">3ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹å†»ç»“å±‚å’Œå¯æœç´¢å¿«ç…§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹åŸç”ŸçŸ¢é‡æœç´¢"><span class="toc-number">5.4.</span> <span class="toc-text">4ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹åŸç”ŸçŸ¢é‡æœç´¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹æœç´¢èšåˆ"><span class="toc-number">5.5.</span> <span class="toc-text">5ã€åŠŸèƒ½ä¼˜åŒ–ä¹‹æœç´¢èšåˆ</span></a></li></ol></li></ol>
                    </div>
                </span>
            </div>
        </div>
        
    </div>
</aside>

<!-- è¯„è®º -->

  
    <section id="comments" class="comments">
       <div id="vcomment" class="comment"></div> 
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
   var notify = 'false' == true ? true : false;
   var verify = 'false' == true ? true : false;
    window.onload = function() {
        new Valine({
            el: '.comment',
            notify: notify,
            verify: verify,
            app_id: "hRDQtFPNrfKmHhxhBlFlXkGq-gzGzoHsz",
            app_key: "jSCOVLxSm31BVC1D8RrKWn1d",
            placeholder: "ğŸ˜‰çœ‹äº†è¿™ä¹ˆä¹…ï¼Œæœ‰å•¥æƒ³è¯´çš„å—ï¼ŸğŸ¤”",
            avatar:"retro"
        });
    }
</script>
  </section>

  
  
  

  

  

  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
        <div class="footer-left">
            <!--å¦‚æœæœ‰è®¾ç½®theme.sinceï¼Œå¹¶ä¸”æ—¶é—´å°äºå½“å‰æ—¶é—´ï¼ˆå¹´ä»½ï¼‰ï¼Œå½¢å¼ä¸ºï¼š@ 2018 - 2019(+ä½œè€…/æ ‡é¢˜)ï¼›å¦åˆ™é»˜è®¤ä¸ºå½“å‰å¹´ä»½(+ä½œè€…/æ ‡é¢˜)ã€‚ -->
            
                &copy; 2020-2023
            
            Shawn
        </div>


<!-- ã€Šç½‘ç«™å¤‡æ¡ˆå· -->
    
        <div class="BeiAn-info">
            <!-- <img src="https://gitee.com/LXT2017/Picbed/raw/blogimg/noteimg/china.png" title="å¤‡æ¡ˆç®¡ç†ç³»ç»Ÿ"> -->
            <img src="https://picblog.shawncoding.top/background/china.png" title="å¤‡æ¡ˆç®¡ç†ç³»ç»Ÿ">
            <a href="https://beian.miit.gov.cn/" style="color:#f72b07" target="_blank" title="å¤‡æ¡ˆå·">
                ç²¤ICPå¤‡00000000å·
            </a>
        </div>
    
    <!-- ç½‘ç«™å¤‡æ¡ˆå·ã€‹ -->

<div class="footer-right">
        <span id="timeDate">è½½å…¥å¤©æ•°...</span><span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
    <script>
        var now = new Date(); 
        function createtime() { 
            var grt= new Date("1/1/2020 00:00:00");//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´ 
            now.setTime(now.getTime()+250); 
            days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
            hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
            if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
            mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
            seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
            snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
            document.getElementById("timeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ "+dnum+" å¤© "; 
            document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’"; 
        } 
        setInterval("createtime()",250);
    </script>


    	
    </div>
</div>
</div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};n.m=t,n.c=r,n.p="./",n(0)}([function(t,n,r){r(195),t.exports=r(191)},function(t,n,r){var e=r(3),i=r(52),o=r(27),u=r(28),c=r(53),f="prototype",a=function(t,n,r){var s,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,b=t&a.B,m=d?e:y?e[n]||(e[n]={}):(e[n]||{})[f],x=d?i:i[n]||(i[n]={}),w=x[f]||(x[f]={});d&&(r=n);for(s in r)l=!p&&m&&void 0!==m[s],h=(l?m:r)[s],v=b&&l?c(h,e):g&&"function"==typeof h?c(Function.call,h):h,m&&u(m,s,h,t&a.U),x[s]!=h&&o(x,s,v),g&&w[s]!=h&&(w[s]=h)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(6);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(126)("wks"),i=r(76),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(94),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(167),o=r(50),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(58),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(5).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(67),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(46);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(63),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(11),i=r(66);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(3),i=r(27),o=r(24),u=r(76)("src"),c="toString",f=Function[c],a=(""+f).split(c);r(52).inspectSource=function(t){return f.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[u]||f.call(this)})},function(t,n,r){var e=r(1),i=r(4),o=r(46),u=function(t,n,r,e){var i=String(o(t)),u="<"+n;return""!==r&&(u+=" "+r+'="'+String(e).replace(/"/g,"&quot;")+'"'),u+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(u),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(115),i=r(46);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(116),i=r(66),o=r(30),u=r(50),c=r(24),f=r(167),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(24),i=r(17),o=r(145)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(15)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(5),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(21);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(15)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(53),i=r(115),o=r(17),u=r(16),c=r(203);t.exports=function(t,n){var r=1==t,f=2==t,a=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),b=i(g),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):f?v(n,0):void 0;x>w;w++)if((h||w in b)&&(d=b[w],y=m(d,w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:a||s?s:S}}},function(t,n,r){var e=r(1),i=r(52),o=r(4);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(6);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(91),u=r(13),c="prototype",f=function(t,n,r){var a,s,l,h=t&f.F,v=t&f.G,p=t&f.S,d=t&f.P,y=t&f.B,g=t&f.W,b=v?i:i[n]||(i[n]={}),m=b[c],x=v?e:p?e[n]:(e[n]||{})[c];v&&(r=n);for(a in r)(s=!h&&x&&void 0!==x[a])&&a in b||(l=s?x[a]:r[a],b[a]=v&&"function"!=typeof x[a]?r[a]:y&&s?o(l,e):g&&x[a]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n[c]=t[c],n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&f.R&&m&&!m[a]&&u(m,a,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(26);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(183),i=r(1),o=r(126)("metadata"),u=o.store||(o.store=new(r(186))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},f=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},a=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};t.exports={store:u,map:c,has:f,get:a,set:s,keys:l,key:h,exp:v}},function(t,n,r){"use strict";if(r(10)){var e=r(69),i=r(3),o=r(4),u=r(1),c=r(127),f=r(152),a=r(53),s=r(68),l=r(66),h=r(27),v=r(73),p=r(67),d=r(16),y=r(75),g=r(50),b=r(24),m=r(180),x=r(114),w=r(6),S=r(17),_=r(137),O=r(70),E=r(32),P=r(71).f,j=r(154),F=r(76),M=r(7),A=r(48),N=r(117),T=r(146),I=r(155),k=r(80),L=r(123),R=r(74),C=r(130),D=r(160),U=r(11),W=r(31),G=U.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K="ArrayBuffer",J="Shared"+K,Y="BYTES_PER_ELEMENT",H="prototype",$=Array[H],X=f.ArrayBuffer,Q=f.DataView,Z=A(0),tt=A(2),nt=A(3),rt=A(4),et=A(5),it=A(6),ot=N(!0),ut=N(!1),ct=I.values,ft=I.keys,at=I.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,bt=M("iterator"),mt=M("toStringTag"),xt=F("typed_constructor"),wt=F("def_constructor"),St=c.CONSTR,_t=c.TYPED,Ot=c.VIEW,Et="Wrong length!",Pt=A(1,function(t,n){return Tt(T(t,t[wt]),n)}),jt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ft=!!q&&!!q[H].set&&o(function(){new q(1).set({})}),Mt=function(t,n){if(void 0===t)throw z(Et);var r=+t,e=d(t);if(n&&!m(r,e))throw V(Et);return e},At=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Nt=function(t){if(w(t)&&_t in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&xt in t))throw z("It is not a typed array constructor!");return new t(n)},It=function(t,n){return kt(T(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Tt(t,e);e>r;)i[r]=n[r++];return i},Lt=function(t,n,r){G(t,n,{get:function(){return this._d[r]}})},Rt=function(t){var n,r,e,i,o,u,c=S(t),f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,h=j(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&f>2&&(s=a(s,arguments[2],2)),n=0,r=d(c.length),i=Tt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},Ct=function(){for(var t=0,n=arguments.length,r=Tt(this,n);n>t;)r[t]=arguments[t++];return r},Dt=!!q&&o(function(){gt.call(new q(1))}),Ut=function(){return gt.apply(Dt?dt.call(Nt(this)):Nt(this),arguments)},Wt={copyWithin:function(t,n){return D.call(Nt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return C.apply(Nt(this),arguments)},filter:function(t){return It(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(Nt(this),arguments)},lastIndexOf:function(t){return st.apply(Nt(this),arguments)},map:function(t){return Pt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,n=this,r=Nt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Nt(this),t)},subarray:function(t,n){var r=Nt(this),e=r.length,i=y(t,e);return new(T(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},Gt=function(t,n){return It(this,dt.call(Nt(this),t,n))},Bt=function(t){Nt(this);var n=At(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw V(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(Nt(this))},keys:function(){return ft.call(Nt(this))},values:function(){return ct.call(Nt(this))}},zt=function(t,n){return w(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return zt(t,n=g(n,!0))?l(2,t[n]):B(t,n)},Kt=function(t,n,r){return!(zt(t,n=g(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,n,r):(t[n]=r.value,t)};St||(W.f=qt,U.f=Kt),u(u.S+u.F*!St,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Kt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Jt=v({},Wt);v(Jt,Vt),h(Jt,bt,Vt.values),v(Jt,{slice:Gt,set:Bt,constructor:function(){},toString:yt,toLocaleString:Ut}),Lt(Jt,"buffer","b"),Lt(Jt,"byteOffset","o"),Lt(Jt,"byteLength","l"),Lt(Jt,"length","e"),G(Jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,n,r,f){f=!!f;var a=t+(f?"Clamped":"")+"Array",l="Uint8Array"!=a,v="get"+t,p="set"+t,y=i[a],g=y||{},b=y&&E(y),m=!y||!c.ABV,S={},_=y&&y[H],j=function(t,r){var e=t._d;return e.v[v](r*n+e.o,jt)},F=function(t,r,e){var i=t._d;f&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[p](r*n+i.o,e,jt)},M=function(t,n){G(t,n,{get:function(){return j(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};m?(y=r(function(t,r,e,i){s(t,y,a,"_d");var o,u,c,f,l=0,v=0;if(w(r)){if(!(r instanceof X||(f=x(r))==K||f==J))return _t in r?kt(y,r):Rt.call(y,r);o=r,v=At(e,n);var p=r.byteLength;if(void 0===i){if(p%n)throw V(Et);if((u=p-v)<0)throw V(Et)}else if((u=d(i)*n)+v>p)throw V(Et);c=u/n}else c=Mt(r,!0),u=c*n,o=new X(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new Q(o)});l<c;)M(t,l++)}),_=y[H]=O(Jt),h(_,"constructor",y)):L(function(t){new y(null),new y(t)},!0)||(y=r(function(t,r,e,i){s(t,y,a);var o;return w(r)?r instanceof X||(o=x(r))==K||o==J?void 0!==i?new g(r,At(e,n),i):void 0!==e?new g(r,At(e,n)):new g(r):_t in r?kt(y,r):Rt.call(y,r):new g(Mt(r,l))}),Z(b!==Function.prototype?P(g).concat(P(b)):P(g),function(t){t in y||h(y,t,g[t])}),y[H]=_,e||(_.constructor=y));var A=_[bt],N=!!A&&("values"==A.name||void 0==A.name),T=Vt.values;h(y,xt,!0),h(_,_t,a),h(_,Ot,!0),h(_,wt,y),(f?new y(1)[mt]==a:mt in _)||G(_,mt,{get:function(){return a}}),S[a]=y,u(u.G+u.W+u.F*(y!=g),S),u(u.S,a,{BYTES_PER_ELEMENT:n,from:Rt,of:Ct}),Y in _||h(_,Y,n),u(u.P,a,Wt),R(a),u(u.P+u.F*Ft,a,{set:Bt}),u(u.P+u.F*!N,a,Vt),u(u.P+u.F*(_.toString!=yt),a,{toString:yt}),u(u.P+u.F*o(function(){new y(1).slice()}),a,{slice:Gt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),a,{toLocaleString:Ut}),k[a]=N?A:T,e||N||h(_,bt,T)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(5).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var e=r(36),i=r(51),o=r(64),u=r(13),c=r(8),f=r(35),a=r(96),s=r(38),l=r(103),h=r(15)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n,r){var e=r(20),i=r(100),o=r(34),u=r(39)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(57)("iframe"),e=o.length;for(n.style.display="none",r(93).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(63),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(8),i=r(9),o=r(90)(!1),u=r(39)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(76)("meta"),i=r(6),o=r(24),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(2),i=r(173),o=r(133),u=r(145)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(132)("iframe"),e=o.length;for(n.style.display="none",r(135).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(175),i=r(133).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(175),i=r(133);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(28);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(67),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;void 0==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(53),i=r(169),o=r(137),u=r(2),c=r(16),f=r(154),a={},s={},n=t.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:f(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>m;m++)if((y=n?b(u(p=t[m])[0],p[1]):b(t[m]))===a||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,b,p.value,n))===a||y===s)return y};n.BREAK=a,n.RETURN=s},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(24),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(1),i=r(46),o=r(4),u=r(150),c="["+u+"]",f="â€‹Â…",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||f[t]()!=f}),a=i[t]=c?n(h):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n,r){t.exports={default:r(86),__esModule:!0}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(84),o=e(i),u=r(83),c=e(u),f="function"==typeof c.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":typeof t};n.default="function"==typeof c.default&&"symbol"===f(o.default)?function(t){return void 0===t?"undefined":f(t)}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":void 0===t?"undefined":f(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(25).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(9),i=r(106),o=r(105);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(88);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(19),i=r(62),o=r(37);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){t.exports=r(5).document&&document.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(60),i=r(22),o=r(38),u={};r(13)(u,r(15)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(19),i=r(9);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,r){var e=r(14),i=r(20),o=r(19);t.exports=r(12)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(9),u=r(42),c=r(8),f=r(58),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(9),i=r(61).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(77),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(41),i=r(33);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(89),i=r(97),o=r(35),u=r(9);t.exports=r(59)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(5),i=r(8),o=r(12),u=r(51),c=r(64),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(15),p=r(44),d=r(43),y=r(98),g=r(92),b=r(95),m=r(20),x=r(9),w=r(42),S=r(22),_=r(60),O=r(102),E=r(101),P=r(14),j=r(19),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(61).f=O.f=Z,r(37).f=X,r(62).f=tt,o&&!r(36)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(13)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(5),i=r(13),o=r(35),u=r(15)("toStringTag"),c=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var e=r(45),i=r(7)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(30),i=r(16),o=r(75);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){"use strict";var e=r(3),i=r(1),o=r(28),u=r(73),c=r(65),f=r(79),a=r(68),s=r(6),l=r(4),h=r(123),v=r(81),p=r(136);t.exports=function(t,n,r,d,y,g){var b=e[t],m=b,x=y?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var O=new m,E=O[x](g?{}:-0,1)!=O,P=l(function(){O.has(1)}),j=h(function(t){new m(t)}),F=!g&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});j||(m=n(function(n,r){a(n,m,t);var e=p(new b,n,m);return void 0!=r&&f(r,y,e[x],e),e}),m.prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||E)&&_(x),g&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,y,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),g||d.setStrong(m,t,y),m}},function(t,n,r){"use strict";var e=r(27),i=r(28),o=r(4),u=r(46),c=r(7);t.exports=function(t,n,r){var f=c(t),a=r(u,f,""[t]),s=a[0],l=a[1];o(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,f,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}
},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(6),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(7)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){t.exports=r(69)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(76),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:-1==t.indexOf("MicroMessenger")}}()};t.exports=r},function(t,n,r){"use strict";var e=r(85),i=function(t){return t&&t.__esModule?t:{default:t}}(e),o=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):r[t]||t}function n(t){return e[t]}var r={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},e={};for(var u in r)e[r[u]]=u;return r["&apos;"]="'",e["'"]="&#39;",{encode:function(t){return t?(""+t).replace(/['<> "&]/g,n).replace(/\r?\n/g,"<br/>").replace(/\s/g,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(/<br\s*\/?>/gi,"\n").replace(/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,t).replace(/\u00a0/g," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)t[n]=o.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,i.default)(t)))for(var e in t)t[e]=o.encodeObject(t[e]);else if("string"==typeof t)return o.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=o},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),f=u>2?arguments[2]:void 0,a=void 0===f?r:i(f,r);a>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(11),i=r(66);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(6),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){t.exports=r(3).document&&document.documentElement},function(t,n,r){var e=r(6),i=r(144).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(70),i=r(66),o=r(81),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(69),i=r(1),o=r(28),u=r(27),c=r(24),f=r(80),a=r(139),s=r(81),l=r(32),h=r(7)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var e=r(3),i=r(151).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,f="process"==r(45)(u);t.exports=function(){var t,n,r,a=function(){var e,i;for(f&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(f)r=function(){u.nextTick(a)};else if(o){var s=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(a)}}else r=function(){i.call(e,a)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){var e=r(6),i=r(2),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{e=r(53)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),e(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(126)("keys"),i=r(76);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(2),i=r(26),o=r(7)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(67),i=r(46);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(122),i=r(46);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var e=r(67),i=r(46);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r Â áš€á â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(53),c=r(121),f=r(135),a=r(132),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++d]=function(){c("function"==typeof t?t:Function(t),n)},e(d),d},v=function(t){delete y[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=g in a("script")?function(t){f.appendChild(a("script"))[g]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(69),u=r(127),c=r(27),f=r(73),a=r(4),s=r(68),l=r(67),h=r(16),v=r(71).f,p=r(11).f,d=r(130),y=r(81),g="ArrayBuffer",b="DataView",m="prototype",x="Wrong length!",w="Wrong index!",S=e[g],_=e[b],O=e.Math,E=e.RangeError,P=e.Infinity,j=S,F=O.abs,M=O.pow,A=O.floor,N=O.log,T=O.LN2,I="buffer",k="byteLength",L="byteOffset",R=i?"_b":I,C=i?"_l":k,D=i?"_o":L,U=function(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=F(t),t!=t||t===P?(i=t!=t?1:0,e=f):(e=A(N(t)/T),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+a>=1?s/o:s*M(2,1-a),t*o>=2&&(e++,o/=2),e+a>=f?(i=0,e=f):e+a>=1?(i=(t*o-1)*M(2,n),e+=a):(i=t*M(2,a-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u},W=function(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;c>0;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-P:P;e+=M(2,n),s-=u}return(a?-1:1)*e*M(2,s-n)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return U(t,52,8)},K=function(t){return U(t,23,4)},J=function(t,n,r){p(t[m],n,{get:function(){return this[r]}})},Y=function(t,n,r,e){var i=+r,o=l(i);if(i!=o||o<0||o+n>t[C])throw E(w);var u=t[R]._b,c=o+t[D],f=u.slice(c,c+n);return e?f:f.reverse()},H=function(t,n,r,e,i,o){var u=+r,c=l(u);if(u!=c||c<0||c+n>t[C])throw E(w);for(var f=t[R]._b,a=c+t[D],s=e(+i),h=0;h<n;h++)f[a+h]=s[o?h:n-h-1]},$=function(t,n){s(t,S,g);var r=+n,e=h(r);if(r!=e)throw E(x);return e};if(u.ABV){if(!a(function(){new S})||!a(function(){new S(.5)})){S=function(t){return new j($(this,t))};for(var X,Q=S[m]=j[m],Z=v(j),tt=0;Z.length>tt;)(X=Z[tt++])in S||c(S,X,j[X]);o||(Q.constructor=S)}var nt=new _(new S(2)),rt=_[m].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||f(_[m],{setInt8:function(t,n){rt.call(this,t,n<<24>>24)},setUint8:function(t,n){rt.call(this,t,n<<24>>24)}},!0)}else S=function(t){var n=$(this,t);this._b=d.call(Array(n),0),this[C]=n},_=function(t,n,r){s(this,_,b),s(t,S,b);var e=t[C],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw E(x);this[R]=t,this[D]=i,this[C]=r},i&&(J(S,k,"_l"),J(_,I,"_b"),J(_,k,"_l"),J(_,L,"_o")),f(_[m],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var n=Y(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Y(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return G(Y(this,4,t,arguments[1]))},getUint32:function(t){return G(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return W(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return W(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){H(this,1,t,B,n)},setUint8:function(t,n){H(this,1,t,B,n)},setInt16:function(t,n){H(this,2,t,V,n,arguments[2])},setUint16:function(t,n){H(this,2,t,V,n,arguments[2])},setInt32:function(t,n){H(this,4,t,z,n,arguments[2])},setUint32:function(t,n){H(this,4,t,z,n,arguments[2])},setFloat32:function(t,n){H(this,4,t,K,n,arguments[2])},setFloat64:function(t,n){H(this,8,t,q,n,arguments[2])}});y(S,g),y(_,b),c(_[m],u.VIEW,!0),n[g]=S,n[b]=_},function(t,n,r){var e=r(3),i=r(52),o=r(69),u=r(182),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(52).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(78),i=r(170),o=r(80),u=r(30);t.exports=r(140)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){function r(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=r},function(t,n){function r(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}t.exports=r},function(t,n){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}function u(){d&&v&&(d=!1,v.length?p=v.concat(p):y=-1,p.length&&c())}function c(){if(!d){var t=i(u);d=!0;for(var n=p.length;n;){for(v=p,p=[];++y<n;)v&&v[y].run();y=-1,n=p.length}v=null,d=!1,o(t)}}function f(t,n){this.fun=t,this.array=n}function a(){}var s,l,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var v,p=[],d=!1,y=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.push(new f(t,n)),1!==p.length||d||i(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),f=i(n,u),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?u:i(a,u))-f,u-c),l=1;for(f<c&&c<f+s&&(l=-1,f+=s-1,c+=s-1);s-- >0;)f in r?r[c]=r[f]:delete r[c],c+=l,f+=l;return r}},function(t,n,r){var e=r(79);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var e=r(26),i=r(17),o=r(115),u=r(16);t.exports=function(t,n,r,c,f){e(n);var a=i(t),s=o(a),l=u(a.length),h=f?l-1:0,v=f?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,f?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;f?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,a));return c}},function(t,n,r){"use strict";var e=r(26),i=r(6),o=r(121),u=[].slice,c={},f=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?f(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n,r){"use strict";var e=r(11).f,i=r(70),o=r(73),u=r(53),c=r(68),f=r(46),a=r(79),s=r(140),l=r(170),h=r(74),v=r(10),p=r(65).fastKey,d=v?"_s":"size",y=function(t,n){var r,e=p(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,s){var l=t(function(t,e){c(t,l,n,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[s],t)});return o(l.prototype,{clear:function(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=this,r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){c(this,l,"forEach");for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(this,t)}}),v&&e(l.prototype,"size",{get:function(){return f(this[d])}}),l},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){s(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?l(0,r.k):"values"==n?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),h(n)}}},function(t,n,r){var e=r(114),i=r(161);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var e=r(73),i=r(65).getWeak,o=r(2),u=r(6),c=r(68),f=r(79),a=r(48),s=r(24),l=a(5),h=a(6),v=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,n){return l(t.a,function(t){return t[0]===n})};d.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=h(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var a=t(function(t,e){c(t,a,n,"_i"),t._i=v++,t._l=void 0,void 0!=e&&f(e,r,t[o],t)});return e(a.prototype,{delete:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).delete(t):n&&s(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).has(t):n&&s(n,this._i)}}),a},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(132)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(6),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var e=r(2);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(72),i=r(125),o=r(116),u=r(17),c=r(115),f=Object.assign;t.exports=!f||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=i.f,l=o.f;f>a;)for(var h,v=c(arguments[a++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:f},function(t,n,r){var e=r(11),i=r(2),o=r(72);t.exports=r(10)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(30),i=r(71).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(24),i=r(30),o=r(117)(!1),u=r(145)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){var e=r(72),i=r(30),o=r(116).f;t.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),f=c.length,a=0,s=[];f>a;)o.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(71),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(150)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(150),u=/^[\-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(16),i=r(149),o=r(46);t.exports=function(t,n,r,u){var c=String(o(t)),f=c.length,a=void 0===r?" ":String(r),s=e(n);if(s<=f||""==a)return c;var l=s-f,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(this,t);return n&&n.v},set:function(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(48)(0),o=r(28),u=r(65),c=r(172),f=r(166),a=r(6),s=u.getWeak,l=Object.isExtensible,h=f.ufstore,v={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(a(t)){var n=s(t);return!0===n?h(this).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(this,t,n)}},y=t.exports=r(118)("WeakMap",p,d,f,!0,!0);7!=(new y).set((Object.freeze||Object)(v),7).get(v)&&(e=f.getConstructor(p),c(e.prototype,d),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=y.prototype,r=n[t];o(n,t,function(n,i){if(a(n)&&!l(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},,,,function(t,n){"use strict";function r(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">ä¸Šä¸€é¡µ</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">ä¸‹ä¸€é¡µ</a>'),yiliaConfig&&yiliaConfig.open_in_new){document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}if(yiliaConfig&&yiliaConfig.toc_hide_index){document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}t.exports={init:r}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var r=/\/|index.html/g;return t.replace(r,"")===n.replace(r,"")}function o(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var o=t[r];i(n,o.getAttribute("href"))&&(0,h.default)(o,"active")}}function u(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}function c(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}function f(t,n,r,e,i){var o=u(t),f=c(t)-n;if(f-r<=i){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,d.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(r||f)+"px",a.style.left=o+"px",a.style.zIndex=e||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");f(t,document.body.scrollTop,-63,2,0),f(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}var l=r(156),h=e(l),v=r(157),p=(e(v),r(382)),d=e(p),y=r(128),g=e(y),b=r(190),m=e(b),x=r(129);(function(){g.default.versions.mobile&&window.screen.width<800&&(o(),s())})(),(0,x.addLoadEvent)(function(){m.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}if(r(381),r(391),r(198),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},,,function(t,n,r){r(210),t.exports=r(52).RegExp.escape},,,,function(t,n,r){var e=r(6),i=r(138),o=r(7)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){var e=r(202);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(2),i=r(50),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),t!=o)}},function(t,n,r){var e=r(72),i=r(125),o=r(116);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(72),i=r(30);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){"use strict";var e=r(208),i=r(121),o=r(26);t.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,f=!1;n>u;)(r[u]=arguments[u++])===c&&(f=!0);return function(){var e,o=this,u=arguments.length,a=0,s=0;if(!f&&!u)return i(t,r,o);if(e=r.slice(),f)for(;n>a;a++)e[a]===c&&(e[a]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},function(t,n,r){t.exports=r(3)},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){var e=r(1),i=r(209)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(160)}),r(78)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(130)}),r(78)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(53),i=r(1),o=r(17),u=r(169),c=r(137),f=r(16),a=r(131),s=r(154);i(i.S+i.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,b=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==b||v==Array&&c(b))for(n=f(h.length),r=new v(n);n>g;g++)a(r,g,y?d(h[g],g):h[g]);else for(l=b.call(h),r=new v;!(i=l.next()).done;g++)a(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(138)})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=r(67),u=r(16),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(131);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(135),o=r(45),u=r(75),c=r(16),f=[].slice;e(e.P+e.F*r(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return f.call(this,t,n);for(var i=u(t,r),a=u(n,r),s=c(a-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(26),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(74)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=Date.prototype.getTime,u=function(t){return t>9?t:"0"+t};e(e.P+e.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){
if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(204))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t===t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(163)})},function(t,n,r){"use strict";var e=r(6),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=r(66),o=r(24),u=Function.prototype,c="name",f=Object.isExtensible||function(){return!0};c in u||r(10)&&e(u,c,{configurable:!0,get:function(){try{var t=this,n=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,c)||!f(t)||e(t,c,i(5,n)),n}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(171),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:e})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(142);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(141);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1),i=r(142),o=Math.pow,u=o(2,-52),c=o(2,-23),f=o(2,127)*(2-c),a=o(2,-126),s=function(t){return t+1/u-1/u};e(e.S,"Math",{fround:function(t){var n,r,e=Math.abs(t),o=i(t);return e<a?o*s(e/a/c)*a*c:(n=(1+c/u)*e,r=n-(n-e),r>f||r!=r?o*(1/0):o*r)}})},function(t,n,r){var e=r(1),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,f=0;u<c;)r=i(arguments[u++]),f<r?(e=f/r,o=o*e*e+1,f=r):r>0?(e=r/f,o+=e*e):o+=r;return f===1/0?1/0:f*Math.sqrt(o)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(171)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(142)})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(45),u=r(136),c=r(50),f=r(4),a=r(71).f,s=r(31).f,l=r(11).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(70)(y))==v,b="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=b?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,f=n.slice(2),a=0,s=f.length;a<s;a++)if((u=f.charCodeAt(a))<48||u>i)return NaN;return parseInt(f,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?f(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(m(n)),r,p):m(n)};for(var x,w=r(10)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,x=w[S])&&!i(p,x)&&l(p,x,s(d,x));p.prototype=y,y.constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(168)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(168),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(178);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),i=r(67),o=r(159),u=r(149),c=1..toFixed,f=Math.floor,a=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l="0",h=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*a[r],a[r]=e%1e7,e=f(e/1e7)},v=function(t){for(var n=6,r=0;--n>=0;)r+=a[n],a[n]=f(r/t),r=r%t*1e7},p=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==a[t]){var r=String(a[t]);n=""===n?r:n+u.call(l,7-r.length)+r}return n},d=function(t,n,r){return 0===n?r:n%2==1?d(t,n-1,r*t):d(t*t,n/2,r)},y=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,f=o(this,s),a=i(t),g="",b=l;if(a<0||a>20)throw RangeError(s);if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(g="-",f=-f),f>1e-21)if(n=y(f*d(2,69,1))-69,r=n<0?f*d(2,-n,1):f/d(2,n,1),r*=4503599627370496,(n=52-n)>0){for(h(0,r),e=a;e>=7;)h(1e7,0),e-=7;for(h(d(10,e,1),0),e=n-1;e>=23;)v(1<<23),e-=23;v(1<<e),h(1,1),v(2),b=p()}else h(0,r),h(1<<-n,0),b=p()+u.call(l,a);return a>0?(c=b.length,b=g+(c<=a?"0."+u.call(l,a-c)+b:b.slice(0,c-a)+"."+b.slice(c-a))):b=g+b,b}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(159),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(70)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(173)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(30),i=r(31).f;r(49)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(49)("getOwnPropertyNames",function(){return r(174).f})},function(t,n,r){var e=r(17),i=r(32);r(49)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6);r(49)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(6);r(49)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(6);r(49)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(180)})},function(t,n,r){var e=r(17),i=r(72);r(49)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(144).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(178);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u=r(69),c=r(3),f=r(53),a=r(114),s=r(1),l=r(6),h=r(26),v=r(68),p=r(79),d=r(146),y=r(151).set,g=r(143)(),b="Promise",m=c.TypeError,x=c.process,w=c[b],x=c.process,S="process"==a(x),_=function(){},O=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(_)instanceof n}catch(t){}}(),E=function(t,n){return t===n||t===w&&n===o},P=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},j=function(t){return E(w,t)?new F(t):new i(t)},F=i=function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw m("Bad Promise constructor");n=t,r=e}),this.resolve=h(n),this.reject=h(r)},M=function(t){try{t()}catch(t){return{error:t}}},A=function(t,n){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,f=n.reject,a=n.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?r=e:(a&&a.enter(),r=u(e),a&&a.exit()),r===n.promise?f(m("Promise-chain cycle")):(o=P(r))?o.call(r,c,f):c(r)):f(e)}catch(t){f(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){y.call(c,function(){var n,r,e,i=t._v;if(T(t)&&(n=M(function(){S?x.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=S||T(t)?2:1),t._a=void 0,n)throw n.error})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!T(n.promise))return!1;return!0},I=function(t){y.call(c,function(){var n;S?x.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},k=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),A(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(n=P(t))?g(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(k,e,1))}catch(t){k.call(e,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){k.call({_w:r,_d:!1},t)}}};O||(w=function(t){v(this,w,b,"_h"),h(t),e.call(this);try{t(f(L,this,1),f(k,this,1))}catch(t){k.call(this,t)}},e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=r(73)(w.prototype,{then:function(t,n){var r=j(d(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),F=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(k,t,1)}),s(s.G+s.W+s.F*!O,{Promise:w}),r(81)(w,b),r(74)(b),o=r(52)[b],s(s.S+s.F*!O,b,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(u||!O),b,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var n=j(this);return(0,n.resolve)(t),n.promise}}),s(s.S+s.F*!(O&&r(123)(function(t){w.all(t).catch(_)})),b,{all:function(t){var n=this,r=j(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var c=o++,f=!1;r.push(void 0),u++,n.resolve(t).then(function(t){f||(f=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o&&i(o.error),r.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i&&e(i.error),r.promise}})},function(t,n,r){var e=r(1),i=r(26),o=r(2),u=(r(3).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(4)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),f=o(r);return u?u(e,n,f):c.call(e,n,f)}})},function(t,n,r){var e=r(1),i=r(70),o=r(26),u=r(2),c=r(6),f=r(4),a=r(163),s=(r(3).Reflect||{}).construct,l=f(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!f(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(a.apply(t,e))}var f=r.prototype,v=i(c(f)?f:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(50);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(139)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){function e(t,n){var r,c,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(r=i.f(t,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(s):void 0:f(c=o(t))?e(c,n,s):void 0}var i=r(31),o=r(32),u=r(24),c=r(1),f=r(6),a=r(2);c(c.S,"Reflect",{get:e})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(177)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(144);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){function e(t,n,r){var f,h,v=arguments.length<4?t:arguments[3],p=o.f(s(t),n);if(!p){if(l(h=u(t)))return e(h,n,r,v);p=a(0)}return c(p,"value")?!(!1===p.writable||!l(v)||(f=o.f(v,n)||a(0),f.value=r,i.f(v,n,f),0)):void 0!==p.set&&(p.set.call(v,r),!0)}var i=r(11),o=r(31),u=r(32),c=r(24),f=r(1),a=r(66),s=r(2),l=r(6);f(f.S,"Reflect",{set:e})},function(t,n,r){var e=r(3),i=r(136),o=r(11).f,u=r(71).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),o=void 0===n;return!r&&e&&t.constructor===a&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&o?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(t){t in a||o(a,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=a,a.prototype=l,r(28)(e,"RegExp",a)}r(74)("RegExp")},function(t,n,r){r(119)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(119)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("split",2,function(t,n,e){"use strict";var i=r(122),o=e,u=[].push,c="split",f="length",a="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[f]||2!="ab"[c](/(?:ab)*/)[f]||4!="."[c](/(.?)(.?)/)[f]||"."[c](/()()/)[f]>1||""[c](/.?/)[f]){var s=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,b=new RegExp(t.source,d+"g");for(s||(e=new RegExp("^"+b.source+"$(?!\\s)",d));(c=b.exec(r))&&!((l=c.index+c[0][f])>y&&(p.push(r.slice(y,c.index)),!s&&c[f]>1&&c[0].replace(e,function(){for(v=1;v<arguments[f]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[f]>1&&c.index<r[f]&&u.apply(p,c.slice(1)),h=c[0][f],y=l,p[f]>=g));)b[a]===c.index&&b[a]++;return y===r[f]?!h&&b.test("")||p.push(""):p.push(r.slice(y)),p[f]>g?p.slice(0,g):p}}else"0"[c](void 0,0)[f]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";r(184);var e=r(2),i=r(120),o=r(10),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="endsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{endsWith:function(t){var n=o(this,t,u),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),f=void 0===r?e:Math.min(i(r),e),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(29)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){var e=r(1),i=r(75),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(148),o="includes";e(e.P+e.F*r(134)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(147)(!0);r(140)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){var e=r(1),i=r(30),o=r(16);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(149)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="startsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(10),u=r(1),c=r(28),f=r(65).KEY,a=r(4),s=r(126),l=r(81),h=r(76),v=r(7),p=r(182),d=r(153),y=r(206),g=r(205),b=r(138),m=r(2),x=r(30),w=r(50),S=r(66),_=r(70),O=r(174),E=r(31),P=r(11),j=r(72),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(71).f=O.f=Z,r(116).f=X,r(125).f=tt,o&&!r(69)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(27)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(127),o=r(152),u=r(2),c=r(75),f=r(16),a=r(6),s=r(3).ArrayBuffer,l=r(146),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(f(i-e)),a=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,a.getUint8(e++));return o}}),r(74)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(127).ABV,{DataView:r(152).DataView})},function(t,n,r){r(55)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){"use strict";var e=r(166);r(118)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)("includes")},function(t,n,r){var e=r(1),i=r(143)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(165)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>16,f=i>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>16)+((o*f>>>0)+(a&r)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>>16,f=i>>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>>16)+((o*f>>>0)+(a&r)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(176)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),i=r(177),o=r(30),u=r(31),c=r(131);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r=o(t),e=u.f,f=i(r),a={},s=0;f.length>s;)c(a,n=f[s++],e(r,n));return a}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(176)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),i=r(3),o=r(52),u=r(143)(),c=r(7)("observable"),f=r(26),a=r(2),s=r(68),l=r(73),h=r(27),v=r(79),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},m=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){b(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=f(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){f(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,c,function(){return this}),e(e.G,{Observable:w}),r(74)("Observable")},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var f=c.get(n);return f.delete(r),!!f.size||c.delete(n)}})},function(t,n,r){var e=r(185),i=r(161),o=r(54),u=r(2),c=r(32),f=o.keys,a=o.key,s=function(t,n){var r=f(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){
return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(26),u=e.key,c=e.set;e.exp({metadata:function(t,n){return function(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(165)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(16),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(139)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(153)("asyncIterator")},function(t,n,r){r(153)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){for(var e=r(155),i=r(28),o=r(3),u=r(27),c=r(80),f=r(7),a=f("iterator"),s=f("toStringTag"),l=c.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],v=0;v<5;v++){var p,d=h[v],y=o[d],g=y&&y.prototype;if(g){g[a]||u(g,a,l),g[s]||u(g,s,d),c[d]=l;for(p in e)g[p]||i(g,p,e[p],!0)}}},function(t,n,r){var e=r(1),i=r(151);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(121),u=r(207),c=e.navigator,f=!!c&&/MSIE .\./.test(c.userAgent),a=function(t){return f?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*f,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){r(330),r(269),r(271),r(270),r(273),r(275),r(280),r(274),r(272),r(282),r(281),r(277),r(278),r(276),r(268),r(279),r(283),r(284),r(236),r(238),r(237),r(286),r(285),r(256),r(266),r(267),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(317),r(322),r(329),r(320),r(312),r(313),r(318),r(323),r(325),r(308),r(309),r(310),r(311),r(314),r(315),r(316),r(319),r(321),r(324),r(326),r(327),r(328),r(231),r(233),r(232),r(235),r(234),r(220),r(218),r(224),r(221),r(227),r(229),r(217),r(223),r(214),r(228),r(212),r(226),r(225),r(219),r(222),r(211),r(213),r(216),r(215),r(230),r(155),r(302),r(307),r(184),r(303),r(304),r(305),r(306),r(287),r(183),r(185),r(186),r(342),r(331),r(332),r(337),r(340),r(341),r(335),r(338),r(336),r(339),r(333),r(334),r(288),r(289),r(290),r(291),r(292),r(295),r(293),r(294),r(296),r(297),r(298),r(299),r(301),r(300),r(343),r(369),r(372),r(371),r(373),r(374),r(370),r(375),r(376),r(354),r(357),r(353),r(351),r(352),r(355),r(356),r(346),r(368),r(377),r(345),r(347),r(349),r(348),r(350),r(359),r(360),r(362),r(361),r(364),r(363),r(365),r(366),r(367),r(344),r(358),r(380),r(379),r(378),t.exports=r(52)},function(t,n){function r(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}t.exports=r},,,,,,,,,function(t,n,r){(function(n,r){!function(n){"use strict";function e(t,n,r,e){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),c=new p(e||[]);return u._invoke=s(t,r,c),u}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function u(){}function c(){}function f(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(r,e,o,u){var c=i(t[r],t,e);if("throw"!==c.type){var f=c.arg,a=f.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(a).then(function(t){f.value=t,o(f)},u)}u(c.arg)}function e(t,r){function e(){return new Promise(function(e,i){n(t,r,e,i)})}return o=o?o.then(e,e):e()}"object"==typeof r&&r.domain&&(n=r.domain.bind(n));var o;this._invoke=e}function s(t,n,r){var e=P;return function(o,u){if(e===F)throw new Error("Generator is already running");if(e===M){if("throw"===o)throw u;return y()}for(r.method=o,r.arg=u;;){var c=r.delegate;if(c){var f=l(c,r);if(f){if(f===A)continue;return f}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===P)throw e=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=F;var a=i(t,n,r);if("normal"===a.type){if(e=r.done?M:j,a.arg===A)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=M,r.method="throw",r.arg=a.arg)}}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=i(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,A;var o=e.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function h(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function v(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var n=t[w];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function n(){for(;++r<t.length;)if(m.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n};return e.next=e}}return{next:y}}function y(){return{value:g,done:!0}}var g,b=Object.prototype,m=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",S=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",O="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=n.regeneratorRuntime=O?t.exports:{},E.wrap=e;var P="suspendedStart",j="suspendedYield",F="executing",M="completed",A={},N={};N[w]=function(){return this};var T=Object.getPrototypeOf,I=T&&T(T(d([])));I&&I!==b&&m.call(I,w)&&(N=I);var k=c.prototype=o.prototype=Object.create(N);u.prototype=k.constructor=c,c.constructor=u,c[_]=u.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===u||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(k),t},E.awrap=function(t){return{__await:t}},f(a.prototype),a.prototype[S]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,i){var o=new a(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},f(k),k[_]="Generator",k.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(v),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,e){return o.type="throw",o.arg=t,r.next=n,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw t;for(var r=this,e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=m.call(i,"catchLoc"),c=m.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),A},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),A}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),A}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}(),r(158))}])</script><script src="/./main.0cf68a.js"></script><script>!function(){!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}("/slider.e37972.js")}()</script>

    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">æ‰€æœ‰æ–‡ç« </a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">å‹é“¾</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">å…³äºæˆ‘</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find somethingâ€¦">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">SpringåŸºç¡€</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">å®‰å“</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">python</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">SpringCloud</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">è™šæ‹Ÿæœº</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">C&C++</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">docker</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">SQL</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">linuxåŸºç¡€</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">ä¸­é—´ä»¶</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">IDETools</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">MyBatis</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">JavaåŸºç¡€</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">SpringBoot</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Linuxè¿ç»´</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">K8S</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">è™šæ‹ŸåŒ–ä¸äº‘è®¡ç®—</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">ç½‘ç»œ</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">ROS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Python</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">æºç åˆ†æ</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">è™šæ‹ŸåŒ–åŸºç¡€</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">å‰ç«¯</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Github</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">linuxè¿ç»´</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">vue</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">å¤§æ•°æ®</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            ç¼ºå¤±æ¨¡å—ã€‚<br/>1ã€è¯·ç¡®ä¿nodeç‰ˆæœ¬å¤§äº6.2<br/>2ã€åœ¨åšå®¢æ ¹ç›®å½•ï¼ˆæ³¨æ„ä¸æ˜¯yiliaæ ¹ç›®å½•ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br/> npm i hexo-generator-json-content --save<br/><br/>
            3ã€åœ¨æ ¹ç›®å½•_config.ymlé‡Œæ·»åŠ é…ç½®ï¼š
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="https://lxt2017.github.io/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>Github</a>
            </li>
          
            <li class="search-li">
              <a href="https://blog.csdn.net/lemon_TT" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>CSDNåšå®¢</a>
            </li>
          
            <li class="search-li">
              <a href="https://www.yansheng.xyz/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>è·å¡˜æœˆè‰²</a>
            </li>
          
            <li class="search-li">
              <a href="https://tding.top/archives/9a232bbe.html" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å°ä¸çš„ä¸ªäººåšå®¢</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
          <div class="aboutme-wrap">
        <div style="display:;">
          <script type="text/javascript" src="https://api.lwl12.com/hitokoto/v1?encode=js&charset=utf-8"></script>
          <p style="margin:0 20px 0 20px;">
            <span id="lwlhitokoto">
              <script>
                lwlhitokoto();
              </script>
            </span>
          </p>
          <p id="js-aboutme" style="margin:0 20px 0 20px;">&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;å¿ƒæ€€å¤©ä¸‹&lt;br/&gt;åªè®¤çœŸç”Ÿæ´»&lt;br/&gt;è‡ªä¿¡å¾®ç¬‘é¢å¯¹æœªæ¥</P>
        </div>
      </div>
        
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
  <!-- é›ªèŠ±ç‰¹æ•ˆ3 -->
  
    <script type="text/javascript" src="/js/snow3.js"></script>
  
<!-- ä»£ç å—å¤åˆ¶åŠŸèƒ½ -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js"></script>
<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="/js/clipboard_use.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"right","width":120,"height":300},"mobile":{"show":false},"log":false});</script></body>

<!-- ã€Šæ·»åŠ æŠ˜å æŒ‰é’®è„šæœ¬ -->
<script>
    var hide = false;
    function myFunction(x) {
        x.classList.toggle("change");
        if(hide == false){
            $(".left-col").css('display', 'none');
            $(".mid-col").css("left", 6);
            $(".tools-col").css('display', 'none');
            $(".tools-col.hide").css('display', 'none');
            hide = true;

            $(".mymenucontainer").css('left', '0');

        }else{
            $(".left-col").css('display', '');
            $(".mid-col").css("left", 300);
            $(".tools-col").css('display', '');
            $(".tools-col.hide").css('display', '');
            hide = false;

            $(".mymenucontainer").css('left', '260px');
        }
    }
</script>
<script>
    // ç§»åŠ¨è®¾å¤‡ä¾¦æµ‹
    var isMobile = {
      Android: function () {
        return navigator.userAgent.match(/Android/i);
      },
      BlackBerry: function () {
        return navigator.userAgent.match(/BlackBerry/i);
      },
      iOS: function () {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
      },
      Opera: function () {
        return navigator.userAgent.match(/Opera Mini/i);
      },
      Windows: function () {
        return navigator.userAgent.match(/IEMobile/i);
      },
      any: function () {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
      }
    };

    if(isMobile.any()){
        //æ‰‹æœºç«¯å–æ¶ˆæœç´¢åŠŸèƒ½
        $('.local-search').css("display","none");
    }

    if ($('.local-search').size() && !isMobile.any()) {
      $.getScript('/js/search.js', function() {
        searchFunc("/search.xml", 'local-search-input', 'local-search-result');
      });
    }
</script>
<!-- æ·»åŠ æŠ˜å æŒ‰é’®è„šæœ¬ã€‹ -->
</html>
<script type="text/javascript" src="/js/src/love.js"></script>